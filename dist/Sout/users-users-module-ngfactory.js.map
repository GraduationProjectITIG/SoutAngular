{"version":3,"sources":["./src/app/users/components/sidebar/sidebar.component.ts","./src/app/users/components/talents/talents.component.ts","./src/app/users/components/profile/profile.component.ts","./src/app/users/components/other-profile/other-profile.component.ts","./src/app/users/components/notofication/notofication.component.html","./src/app/models/report.model.ts","./src/app/services/talent.service.ts","./src/app/users/components/setting/setting.component.ts","./src/app/users/components/bookmark/bookmark.component.html","./src/app/users/users-routing.module.ts","./src/app/users/components/other-profile/other-profile.component.html","./src/app/users/components/notofication/notofication.component.ts","./src/app/users/components/home/home.component.html","./src/app/users/components/search/search.component.html","./src/app/users/components/chat/chat.component.html","./src/app/users/components/home/home.component.ts","./src/app/users/components/discover/discover.component.html","./src/app/users/components/discover/discover.component.ts","./src/app/users/components/header/header.component.html","./src/app/users/components/chat/chat.component.ts","./src/app/users/components/sidebar/sidebar.component.html","./src/app/services/mode.service.ts","./src/app/users/components/setting/setting.component.html","./src/app/users/components/bookmark/bookmark.component.ts","./src/app/users/components/profile/profile.component.html","./src/app/services/user-chats.service.ts","./src/app/services/posts.service.ts","./src/app/services/search-service.service.ts","./src/app/users/components/search/search.component.ts","./src/app/users/components/talents/talents.component.html","./src/app/models/post.model.ts","./node_modules/recordrtc/RecordRTC.js","./src/app/users/components/header/header.component.ts","./node_modules/ngx-toggle-switch/index.d.ts.UiSwitchComponent.html","./src/app/services/fire.service.ts","./src/app/users/users.module.ts"],"names":[],"mappings":"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;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,8EAA8E;;AAE9E;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uDAAuD,kCAAkC;AACzF;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAwB;;AAExB;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,sCAAsC;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,sCAAsC;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,6CAA6C;AAC7C;AACA,YAAY;AACZ,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA,kBAAkB;AAClB,mBAAmB,MAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,YAAY;AACvC;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;;AAET;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,iCAAiC,iCAAiC;AAClE,sBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,iCAAiC,iCAAiC;AAClE,sBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY,iCAAiC;AAC7C,sBAAsB,YAAY;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,sBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,sBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD,wCAAwC;AACxC,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,sBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,IAAI,IAA6B;AACjC;AACA;;AAEA,IAAI,IAA0C;AAC9C,IAAI,iCAAoB,EAAE,mCAAE;AAC5B;AACA,KAAK;AAAA,oGAAC;AACN;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,WAAW,OAAO,YAAY;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA,IAAI,6BAA6B,iCAAiC,gBAAgB;AAClF,yDAAyD,gBAAgB;AACzE,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA,SAAS;AACT,WAAW,YAAY;AACvB,WAAW,OAAO,WAAW;AAC7B;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,IAAI,sBAAsB,iCAAiC,gBAAgB;AAC3E;AACA,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,WAAW,YAAY;AACvB,WAAW,OAAO,WAAW;AAC7B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B,gBAAgB;AAC9C;AACA,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,WAAW,YAAY;AACvB,cAAc;AACd;;AAEA;;AAEA;AACA,mDAAmD,iBAAiB;AACpE,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,OAAO,cAAc;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,oBAAoB;AAC9F,qEAAqE;AACrE,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mDAAmD,kCAAkC;AACrF;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,eAAe,OAAO,SAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,6BAA6B;AAC7B,6BAA6B;AAC7B,IAAI;AACJ;AACA;;AAEA;AACA;AACA,WAAW,OAAO,YAAY;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,mCAAmC;AACnC,oCAAoC;AACpC,wCAAwC;AACxC;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wFAAwF;AACxF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA,oCAAoC,UAAU,kBAAkB;AAChE;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,WAAW,KAAK;AAChB,WAAW,SAAS;AACpB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,2CAA2C,gBAAgB;AAC3D,aAAa;AACb,YAAY;AACZ;AACA;AACA,cAAc,mBAAmB;AACjC,SAAS;AACT;;AAEA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,oDAAoD,qFAAqF,iBAAiB,gBAAgB;AAC1K,2BAA2B,qFAAqF;AAChH,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,SAAS;AACT,WAAW,YAAY;AACvB,WAAW,OAAO,WAAW;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,MAAM;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,qCAAqC;AACrC,8BAA8B,gBAAgB;;AAE9C;AACA;;AAEA;AACA,kCAAkC;AAClC;AACA;;AAEA;AACA,kBAAkB,MAAM;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA,oCAAoC;;AAEpC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS,mCAAmC;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,MAAM;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC;AACjC,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sDAAsD,gBAAgB;AACtE;AACA,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ,SAAS;AACT,WAAW,YAAY;AACvB,WAAW,OAAO,WAAW;AAC7B;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS,mCAAmC;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,+BAA+B,SAAS;AACxC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,mCAAmC,gBAAgB;AACnD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,SAAS;AACxC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,SAAS;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAc,kCAAkC,kCAAkC;AAClF;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,aAAa;;AAEb;AACA,0BAA0B,YAAY;AACtC;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA,0BAA0B,SAAS;AACnC;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA,QAAQ;AACR;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA,4CAA4C;AAC5C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iDAAiD,gBAAgB,iGAAiG,aAAa;AAC/K;AACA,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA,mDAAmD,6CAA6C;AAChG;AACA;AACA;AACA,IAAI;AACJ,SAAS;AACT,WAAW,YAAY;AACvB,WAAW,OAAO,WAAW;AAC7B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mEAAmE;AACnE,aAAa;AACb;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;;AAEA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iDAAiD,gBAAgB,uDAAuD,aAAa;AACrI;AACA,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,SAAS;AACT,WAAW,YAAY;AACvB,WAAW,OAAO,WAAW;AAC7B;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA,iDAAiD;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;;AAGA;AACA;AACA,eAAe,MAAM;AACrB,eAAe,OAAO;AACtB,eAAe,OAAO,2DAA2D;AACjF,eAAe,OAAO,6DAA6D;AACnF,iBAAiB,MAAM;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,yEAAyE;AACzE,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC,mBAAmB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yCAAyC,gBAAgB,uDAAuD;AAChH;AACA,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,wDAAwD,aAAa;AACrE;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA,gCAAgC;AAChC;AACA;;AAEA;AACA;AACA;;AAEA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,+CAA+C,kCAAkC;AACjF;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;;AAEA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;;AAEA,yDAAyD;AACzD,mCAAmC,OAAO;AAC1C;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+CAA+C,gBAAgB;AAC/D;AACA,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,iCAAiC;AACjC,iCAAiC;AACjC,iCAAiC;AACjC,IAAI;AACJ;AACA,6CAA6C;AAC7C,cAAc,SAAS;AACvB,cAAc,SAAS;AACvB,cAAc,SAAS;AACvB,cAAc,SAAS;AACvB,cAAc,OAAO;AACrB,SAAS;AACT;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,qCAAqC;AACrC,qCAAqC;AACrC,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,4CAA4C,gBAAgB;AAC5D,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA,qEAAqE,iHAAiH;AACtL;AACA;AACA;AACA,IAAI;AACJ,SAAS;AACT,WAAW,YAAY;AACvB,WAAW,OAAO,WAAW;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,wBAAwB;AACxB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,uCAAuC;AACvC,wCAAwC;AACxC,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,4FAA4F;AAC5F;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;;AAET;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,QAAQ,IAA6B;AACrC;AACA;;AAEA,QAAQ,IAA0C;AAClD,QAAQ,iCAA4B,EAAE,mCAAE;AACxC;AACA,SAAS;AAAA,oGAAC;AACV;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,SAAS;AACT,WAAW,aAAa;AACxB,WAAW,OAAO,WAAW;AAC7B;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sDAAsD,gBAAgB,SAAS;AAC/E,0BAA0B;AAC1B,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,WAAW,YAAY;AACvB,WAAW,OAAO,WAAW;AAC7B;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,kBAAkB,KAAK,iCAAiC,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,O;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,oBAAoB,EAAE;AAChE,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,SAAS;AACT,WAAW,YAAY;AACvB,WAAW,OAAO,WAAW;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;ACrjMA;AAAA;AAAO,MAAM,eAAe;IAK1B,YAAoB,OAAwB,EAAU,KAAa,EAAU,UAAgC;QAAzF,YAAO,GAAP,OAAO,CAAiB;QAAU,UAAK,GAAL,KAAK,CAAQ;QAAU,eAAU,GAAV,UAAU,CAAsB;QAH7G,QAAG,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,CAAE,CAAC;IAKnD,CAAC;IAID,4BAA4B;IAC5B,qEAAqE;IACrE,0DAA0D;IAI1D,IAAI;IAEJ,QAAQ;QAEN,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,EAAE;YACtB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;SAClC;IACH,CAAC;IACD,MAAM;QACJ,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;QACpB,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC9B,YAAY,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QACpC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QACvB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;IACnC,CAAC;IACD,MAAM,CAAC,GAAW;QAChB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC;QAEhB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,gBAAgB,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IAChD,CAAC;CAEF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uGClCG,gJAGO,KAFL,wJAA8C,KAC9C,yJAAgD,wDAD/B,mBAAqB,UAAtC,YAA8C,EAA7B,SAAqB,GACpB,mBAAsB,WAAxC,YAAgD,EAA9B,SAAsB;uGAf1C,6VAiBO,KAPP,4PAAmH,KACnH,8IACQ,KACR,0YAGO,iDAHmB,wCAA+B,YAAzD,YAGO,EAHmB,UAA+B,mDAZzD,mBAAyB,UACzB,mBAA2B,WAC3B,qCAAuC,GACvC,sCAAyC,GACzC,qCAAuC,GACvC,uCAAgD,YAChD,mBAAqC,aACrC,0CAA8C,GAR9C,YAiBO,EAhBP,SAAyB,EACzB,SAA2B,EAC3B,SAAuC,EACvC,SAAyC,EACzC,SAAuC,EACvC,SAAgD,EAChD,SAAqC,EACrC,SAA8C,GAEK,mBAAmB,UAAtE,YAAmH,EAAhE,SAAmB,GAC/D,0CAA4C,GAAnD,YACQ,EADD,SAA4C;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJhD,MAAM,WAAW;IAKtB,YAAoB,GAAqB;QAArB,QAAG,GAAH,GAAG,CAAkB;IAAI,CAAC;IAE9C,aAAa,CAAC,cAAsB;QAClC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAM,cAAc,CAAC,CAAC;QAC3D,OAAO,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;IACzD,CAAC;IAED,WAAW,CAAC,YAAoB;QAC9B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAM,YAAY,CAAC,CAAC;QAChD,OAAO,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC;IACtC,CAAC;IAED,WAAW,CAAC,cAAsB,EAAE,MAAW;;QAC7C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAM,cAAc,CAAC,CAAC;QAC3D,UAAI,CAAC,UAAU,0CAAE,GAAG,CAAC,MAAM,EAAE;IAC/B,CAAC;IAAA,CAAC;IAEF,cAAc,CAAC,YAAoB,EAAE,YAAiB;QACpD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAM,YAAY,CAAC,CAAC;QAChD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;IACrC,CAAC;IAAA,CAAC;IAEF,WAAW,CAAC,YAAoB,EAAE,SAAc;QAC9C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAM,YAAY,CAAC,CAAC;QAChD,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IAC/B,CAAC;IAAA,CAAC;IAEF,cAAc,CAAC,YAAoB;QACjC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAM,YAAY,CAAC,CAAC;QAChD,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;IACzB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkBH;AAAA;AAAO,MAAM,WAAW;CAAI","file":"users-users-module-ngfactory.js","sourcesContent":["import { AngularFirestore } from '@angular/fire/firestore';\r\nimport { Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { ModeService } from 'src/app/services/mode.service';\r\n\r\nimport { Subscription } from 'rxjs';\r\nimport { FireService } from 'src/app/services/fire.service';\r\n\r\nimport { UserInfoService } from 'src/app/services/user-info.service';\r\nimport { ISettingsData } from '../../viewModels/isettings-data';\r\n\r\n\r\n@Component({\r\n  selector: 'app-sidebar',\r\n  templateUrl: './sidebar.component.html',\r\n  styleUrls: ['./sidebar.component.scss']\r\n})\r\nexport class SidebarComponent implements OnInit {\r\n  public notificationsNo: number = 0\r\n  subs: Subscription[] = []\r\n  user: any;\r\n  talentsList: any[] = []\r\n  subscribtion: Subscription[] = [];\r\n\r\n  usertalents: any[] = []\r\n    settingsData: ISettingsData={privateAcc:false,favColor:'',favMode:'',oldPassword:'',deactive:false};\r\n  constructor(private modeService: ModeService, private usrInfo: FireService, private route: Router, private firestore: AngularFirestore) {\r\n    this.user = JSON.parse(localStorage.getItem('userdata')!);\r\n    this.loadTalents()\r\n    this.loadUserTalents()\r\n    console.log(\"user\",this.user)\r\n    if(this.user.favMode === \"dark\") this.modeService.OnDark();\r\n    else this.modeService.defaultMode();\r\n  }\r\n\r\n\r\n  loadTalents() {\r\n    this.subscribtion.push(this.usrInfo.getCollection('talents').subscribe(data => {\r\n      this.talentsList = data;\r\n    }))\r\n  }\r\n\r\n  loadUserTalents() {\r\n    this.subscribtion.push(this.firestore.collection('Users').doc(this.user.id).collection('talents').valueChanges().subscribe(data => {\r\n      this.usertalents = data;\r\n    }))\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.getnotificationsno()\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    //Called once, before the instance is destroyed.\r\n    //Add 'implements OnDestroy' to the class.\r\n    this.subs.forEach(e => {\r\n      e.unsubscribe();\r\n    })\r\n  }\r\n\r\n  getnotificationsno() {\r\n    this.subs.push(this.firestore.collection('Users').doc(this.user.id).collection('notifications').valueChanges().subscribe((data) => {\r\n      this.notificationsNo = 0\r\n      data.forEach(element => {\r\n        if (element.seen === false || element.seen === undefined) this.notificationsNo++;\r\n      })\r\n    }))\r\n  }\r\n\r\n  addtalents(talent: any) {\r\n    this.firestore.collection('Users').doc(this.user.id).collection('talents').doc(talent.id).set(talent)\r\n  }\r\n\r\n  async removeTalent(t: any) {\r\n    await this.firestore.collection('Users').doc(this.user.id).collection('talents').doc(t).delete()\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router } from '@angular/router';\r\nimport * as RecordRTC from 'recordrtc';\r\nimport { Subscription } from 'rxjs';\r\nimport { Post } from 'src/app/models/post.model';\r\nimport { FireService } from 'src/app/services/fire.service';\r\nimport { PostsService } from 'src/app/services/posts.service';\r\nimport { UserInfoService } from 'src/app/services/user-info.service';\r\n\r\n@Component({\r\n  selector: 'app-talents',\r\n  templateUrl: './talents.component.html',\r\n  styleUrls: ['./talents.component.scss']\r\n})\r\nexport class TalentsComponent implements OnInit {\r\n  isRecordingVideo: boolean = false;\r\n  urlsVideo: any[] = [];\r\n\r\n  styleObject(): Object {\r\n    return { color: this.user.favColor }\r\n  }\r\n  isRecording = false; //audio recorder item\r\n  private record: any; //audio recorder item\r\n  public urls: any[] = []; //audio recorder audios\r\n  private error: any; //audio recorder error\r\n  subscribtion: Subscription[] = [];\r\n  postList: any[] = [];\r\n  LikesList: any[] = [];\r\n  commentsList: any[] = [];\r\n  talentsList: any[] = [];\r\n  public post: Post = new Post();\r\n  postMind: string = \"\";\r\n  postDesc: string = \"\";\r\n  user: any;\r\n  postcomfields: string[] = [];\r\n  greating: string;\r\n  selectedTalent: string = \"\";\r\n  constructor(private fireService: FireService, private domSanitizer: DomSanitizer, private usrInfo: UserInfoService, private firestore: AngularFirestore, private postsService: PostsService, private route: Router) {\r\n    this.user = JSON.parse(localStorage.getItem('userdata')!);\r\n    this.greating = \"What's up, \" + this.user.firstName! + \" \" + this.user.secondName! + \"?\";\r\n    this.loadTalents()\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (document.querySelector('.modal-backdrop')) {\r\n      document.querySelector('.modal-backdrop')!.remove();\r\n    }\r\n    this.loadTalents()\r\n  }\r\n\r\n  async getComments(postid: string) {\r\n    this.commentsList = []\r\n    this.subscribtion.push(await this.firestore.collection('post').doc(postid).collection('comment').valueChanges().subscribe((data) => {\r\n      this.commentsList.push(data);\r\n      console.log(data)\r\n    }))\r\n  }\r\n\r\n  async getLikes(postid: string) {\r\n    this.LikesList = []\r\n    this.subscribtion.push(await this.firestore.collection('post').doc(postid).collection('like').valueChanges().subscribe((data) => {\r\n      this.LikesList.push(data)\r\n      console.log(data)\r\n    }))\r\n  }\r\n\r\n  async notifyUser(usrId: string, msg: string) {\r\n    let id = this.firestore.createId();\r\n    if (this.user.id !== usrId)\r\n      await this.firestore.collection(`Users`).doc(usrId).collection('notifications').doc(id).set({\r\n        id: id,\r\n        date: new Date().toISOString(),\r\n        description: msg,\r\n        seen: false,\r\n        maker: {\r\n          id: this.user.id,\r\n          name: this.user.firstName + \" \" + this.user.secondName,\r\n          picURL: this.user.picURL\r\n        }\r\n      })\r\n  }\r\n\r\n\r\n  addPost(desc: string, audio: any = null, video: any = null, images: any[] = []) {\r\n    this.post.description = desc;\r\n    this.post.audio = audio;\r\n    this.post.image = images;\r\n    this.post.video = video;\r\n    this.post.talent = this.selectedTalent;\r\n    this.post.owner.id = this.user.id;\r\n    this.post.owner.name = this.user.firstName + \" \" + this.user.secondName;\r\n    this.post.owner.picURL = this.user.picURL;\r\n    this.post.id = this.firestore.createId();\r\n    this.postsService.addPost(this.post).then(() => {\r\n      console.log(this.post)\r\n    });\r\n    this.ngOnInit()\r\n  }\r\n\r\n  bookmarkpost(post: any) {\r\n    this.firestore.collection(\"Users\").doc(this.user.id).collection(\"bookmarks\").add({\r\n      date: new Date().toISOString(),\r\n      description: post.description ? post.description : undefined,\r\n      id: post.id,\r\n      audio: post.audio ? post.audio : undefined,\r\n      video: post.video ? post.video : undefined,\r\n      talent: post.talent ? post.talent : undefined,\r\n      images: post.images ? post.images : undefined,\r\n      owner: {\r\n        id: post.owner.id,\r\n        name: post.owner.name,\r\n        picURL: post.owner.picURL\r\n      }\r\n    })\r\n    alert(`post added`)\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscribtion.forEach(element => {\r\n      element.unsubscribe();\r\n    })\r\n  }\r\n\r\n\r\n  addLike(postid: any) {\r\n    this.firestore.collection('post').doc(postid.id).collection(\"like\").add({\r\n      userid: this.user.id\r\n    })\r\n    this.notifyUser(postid.owner.id, `${this.user.firstName} liked on your post `)\r\n  }\r\n\r\n  addComment(postid: any, index: number) {\r\n    this.firestore.collection(`post`).doc(postid.id).collection('comment').add({\r\n      writer: {\r\n        id: this.user.id,\r\n        name: this.user.firstName + \" \" + this.user.secondName,\r\n        picURL: this.user.picURL\r\n      },\r\n      description: this.postcomfields[index],\r\n      date: new Date().toISOString(),\r\n    })\r\n    this.notifyUser(postid.owner.id, `${this.user.firstName} commented on your post \"${this.postcomfields[index]}\"`)\r\n  }\r\n\r\n\r\n  startRecording() {\r\n    this.isRecording = true;\r\n    let mediaConstraints = {\r\n      video: false,\r\n      audio: true\r\n    };\r\n    navigator.mediaDevices\r\n      .getUserMedia(mediaConstraints)\r\n      .then(this.successCallback.bind(this), this.errorCallback.bind(this));\r\n  }\r\n\r\n\r\n  startVideoRecording() {\r\n    this.isRecordingVideo = true;\r\n    let mediaConstraints = {\r\n      video: true,\r\n      audio: true\r\n    };\r\n    navigator.mediaDevices\r\n      .getUserMedia(mediaConstraints)\r\n      .then(this.successCallbackVideo.bind(this), this.errorCallback.bind(this));\r\n  }\r\n\r\n  successCallbackVideo(stream: any) {\r\n    var options = {\r\n      mimeType: \"video/mp4\",\r\n    };\r\n\r\n    //Start Actuall Recording\r\n    var MediaStreamRecorder = RecordRTC.MediaStreamRecorder;\r\n    this.record = new MediaStreamRecorder(stream, options);\r\n    this.record.record();\r\n  }\r\n\r\n  successCallback(stream: any) {\r\n    var options = {\r\n      mimeType: \"audio/wav\",\r\n      numberOfAudioChannels: 1\r\n    };\r\n\r\n    //Start Actuall Recording\r\n    var StereoAudioRecorder = RecordRTC.StereoAudioRecorder;\r\n    this.record = new StereoAudioRecorder(stream, options);\r\n    this.record.record();\r\n  }\r\n\r\n  stopRecording() {\r\n    this.isRecording = false;\r\n    this.record.stop(this.processRecording.bind(this));\r\n  }\r\n\r\n  stopRecordingVideo() {\r\n    this.isRecordingVideo = false;\r\n    this.record.stop(this.processRecordingVideo.bind(this));\r\n  }\r\n\r\n  processRecording(blob: any) {\r\n    this.urls.push(URL.createObjectURL(blob)!);\r\n  }\r\n\r\n  processRecordingVideo(blob: any) {\r\n    this.urlsVideo.push(URL.createObjectURL(blob)!);\r\n  }\r\n\r\n  sanitize(url: string) {\r\n    console.log(url)\r\n    return this.domSanitizer.bypassSecurityTrustUrl(url);\r\n  }\r\n\r\n  errorCallback(error: any) {\r\n    this.error = 'Can not play audio in your browser';\r\n  }\r\n\r\n  selectcat(catid: string) {\r\n    this.selectedTalent = catid;\r\n    this.subscribtion.push(this.postsService.getPostsOfTalent(this.selectedTalent).subscribe((res) => {\r\n      this.postList = res;\r\n      console.log(res);\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getComments(this.postList[index].id)\r\n      }\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getLikes(this.postList[index].id)\r\n      }\r\n    }))\r\n  }\r\n\r\n  loadTalents() {\r\n    this.talentsList = []\r\n    this.subscribtion.push(this.firestore.collection('Users').doc(this.user.id).collection('talents').valueChanges().subscribe(data => {\r\n      this.talentsList = data;\r\n    }))\r\n  }\r\n\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { Router } from '@angular/router';\r\nimport { Post } from 'src/app/models/post.model';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { PostsService } from 'src/app/services/posts.service';\r\nimport { FireService } from 'src/app/services/fire.service';\r\nimport { NgbModalConfig, NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { Subscription } from 'rxjs';\r\nimport { ISettingsData } from '../../viewModels/isettings-data';\r\nimport { ModeService } from 'src/app/services/mode.service';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport * as RecordRTC from 'recordrtc';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.scss']\r\n})\r\nexport class ProfileComponent implements OnInit {\r\n  userName: string = \"\";\r\n  picURL: any;\r\n  coverPicURL: string = \"\";\r\n  public user: User = new User();\r\n  postList: Post[] = [];\r\n  public post: Post = new Post();\r\n  postMind: string = \"\";\r\n  postDesc: string = \"\";\r\n  postcomfields: string[] = [];\r\n  LikesList: any[] = [];\r\n  commentsList: any[] = [];\r\n  notificationsNo: number = 0;\r\n\r\n  following: number = 0;\r\n  followers: number = 0;\r\n\r\n  usersList: User[] = [];\r\n\r\n  followersList: any[] = [];\r\n  followingList: any[] = [];\r\n\r\n  updatedUser: User = new User();\r\n\r\n  subscribtion: Subscription[] = [];\r\n\r\n  comment: object = {};\r\n  isRecordingVideo: boolean = false;\r\n  urlsVideo: any[] = [];\r\n\r\n  styleObject(): Object {\r\n    return { color: this.user.favColor }\r\n  }\r\n  isRecording = false; //audio recorder item\r\n  private record: any; //audio recorder item\r\n  public urls: any[] = []; //audio recorder audios\r\n  private error: any; //audio recorder error\r\n\r\n  settingsData: ISettingsData = { privateAcc: false, favColor: '', favMode: '', oldPassword: '', deactive: false };\r\n\r\n  constructor(private postsService: PostsService, private route: Router,\r\n    private firestore: AngularFirestore, private storage: AngularFireStorage, private FireService: FireService\r\n    , config: NgbModalConfig, private modalService: NgbModal, private modeService: ModeService, private domSanitizer: DomSanitizer, private firestorage: AngularFireStorage,) {\r\n    this.modalService.dismissAll();\r\n  }\r\n\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.user = JSON.parse(localStorage.getItem('userdata')!)\r\n    if (this.user) {\r\n      this.userName = this.user.firstName + \" \" + this.user.secondName;\r\n      this.picURL = this.user.picURL;\r\n      this.coverPicURL = this.user.coverPicURL;\r\n      this.settingsData.favMode = this.user.favMode;\r\n      this.postMind = \"What's on your mind, \" + this.user.firstName + \"?\";\r\n      this.getAllPosts();\r\n      this.getnotificationsno();\r\n      this.getFollowers();\r\n      this.getFollowing();\r\n      console.log(this.user);\r\n\r\n      if (this.settingsData.favMode === \"dark\") { this.modeService.OnDark(); this.settingsData.favMode = \"dark\"; }\r\n      else if (this.settingsData.favMode === \"light\") { this.modeService.defaultMode(); this.settingsData.favMode = \"light\"; }\r\n    }\r\n    else\r\n      this.route.navigate(['/landing'])\r\n  }\r\n\r\n  // OnDark(){\r\n  //   this.modeService.OnDarkFont(document.querySelectorAll(\".nav-item a\"),document.querySelectorAll(\".darkFont\"),document.querySelectorAll(\"#name\"));\r\n  //   this.modeService.OnDarkColumn(document.querySelectorAll(\"#sidebarMenu\")); this.settingsData.favMode=\"dark\";\r\n  // }\r\n  // defaultMode(){\r\n  //   this.modeService.defaultModeColumn(document.querySelectorAll(\"#sidebarMenu\")); this.settingsData.favMode=\"light\";\r\n  //   this.modeService.defaultModeFont(document.querySelectorAll(\".nav-item a\"),document.querySelectorAll(\".darkFont\"),document.querySelectorAll(\"#name\"));\r\n\r\n  // }\r\n\r\n  uploadFile(event: any, type: string) {\r\n    var filePath: any;\r\n    var userId = this.user.id\r\n    const file = event.target.files[0];\r\n\r\n    if (type == \"profile\")\r\n      filePath = '/Users/profile_pics/' + userId;\r\n    else if (type == \"cover\")\r\n      filePath = '/Users/cover_photos/' + userId;\r\n\r\n    this.storage.upload(filePath, file);\r\n    const ref = this.storage.refFromURL(\"gs://sout-2d0f6.appspot.com\" + filePath);\r\n\r\n    ref.getDownloadURL().toPromise().then(url => {\r\n      if (type == \"profile\") {\r\n\r\n        this.user.picURL = url;\r\n        this.FireService.updateDocument(\"Users/\" + userId, this.user)\r\n\r\n        this.picURL = url;\r\n        console.log(this.user.picURL)\r\n      }\r\n      else if (type == \"cover\") {\r\n        this.coverPicURL = url;\r\n        this.FireService.updateDocument(\"Users/\" + userId, this.user)\r\n\r\n        this.user.coverPicURL = url;\r\n      }\r\n\r\n      localStorage.setItem('userdata', JSON.stringify(this.user))\r\n      this.route.navigate(['/users/profile']).then(() => {\r\n        window.location.reload();\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n  getAllPosts() {\r\n    this.postsService.getAllUserPosts(this.user.id).subscribe(res => {\r\n      this.postList = res\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getComments(this.postList[index].id)\r\n      }\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getLikes(this.postList[index].id)\r\n      }\r\n    });\r\n    // return this.postList;\r\n    //console.log(this.postList)\r\n\r\n  }\r\n\r\n  // addPost(desc: string) {\r\n  //   this.post.description = desc;\r\n  //   this.post.owner.id = this.user.id;\r\n  //   this.post.owner.name = this.user.firstName + \" \" + this.user.secondName,\r\n  //     this.post.owner.picURL = this.user.picURL,\r\n  //     this.post.id = this.firestore.createId();\r\n  //   this.postsService.addPost(this.post).then(() => {\r\n  //     console.log(this.post)\r\n  //   });\r\n  //   this.ngOnInit()\r\n  // }\r\n\r\n  addPost(desc: string, audio: any = null, video: any = null, images: any[] = []) {\r\n    this.post.description = desc;\r\n    this.post.owner.id = this.user.id;\r\n    this.post.owner.name = this.user.firstName + \" \" + this.user.secondName;\r\n    this.post.owner.picURL = this.user.picURL;\r\n    this.post.id = this.firestore.createId();\r\n    this.postsService.addPost(this.post).then(() => {\r\n      console.log(this.post)\r\n    });\r\n    this.ngOnInit();\r\n    this.route.navigate(['/users/profile']).then(() => {\r\n      window.location.reload();\r\n    });\r\n  }\r\n\r\n  deletePost(id: string) {\r\n    this.postsService.deletePost(id).then(\r\n      (data) => {\r\n        console.log(data);\r\n\r\n        this.ngOnInit();\r\n\r\n      })\r\n\r\n  }\r\n\r\n  addLike(post: any) {\r\n    this.firestore.collection('post').doc(post.id).collection(\"like\").add({\r\n      userid: this.user.id\r\n    })\r\n    this.notifyUser(post.owner.id, `${this.user.firstName} liked on your post `)\r\n  }\r\n\r\n  addComment(post: any, index: number) {\r\n    var commentId = this.firestore.createId();\r\n    this.comment = {\r\n      id: commentId,\r\n      writer: {\r\n        id: this.user.id,\r\n        name: this.user.firstName + \" \" + this.user.secondName,\r\n        picURL: this.user.picURL\r\n      },\r\n      description: this.postcomfields[index],\r\n      date: new Date().toISOString(),\r\n    }\r\n    this.FireService.setDocument(\"/post/\" + post.id + \"/comment/\" + commentId, { ...this.comment });\r\n    this.notifyUser(post.owner.id, `${this.user.firstName} commented on your post \"${this.postcomfields[index]}\"`)\r\n  }\r\n\r\n  async getComments(postid: string) {\r\n    await this.firestore.collection('post').doc(postid).collection('comment').valueChanges().subscribe((data) => {\r\n      this.commentsList.push(data);\r\n      console.log(data)\r\n    })\r\n  }\r\n\r\n  async getLikes(postid: string) {\r\n    await this.firestore.collection('post').doc(postid).collection('like').valueChanges().subscribe((data) => {\r\n      this.LikesList.push(data)\r\n      console.log(data)\r\n    })\r\n  }\r\n\r\n  async notifyUser(usrId: string, msg: string) {\r\n    await this.firestore.collection(`Users`).doc(usrId).collection('notifications').add({\r\n      date: new Date().toISOString(),\r\n      description: msg,\r\n      seen: false,\r\n      maker: {\r\n        id: this.user.id,\r\n        name: this.user.firstName + \" \" + this.user.secondName,\r\n        picURL: this.user.picURL\r\n      }\r\n    })\r\n  }\r\n\r\n  getnotificationsno() {\r\n    this.firestore.collection('Users').doc(this.user.id).collection('notifications').valueChanges().subscribe((data) => {\r\n      console.log(`notifications: ${data}`)\r\n      this.notificationsNo = data.length\r\n    })\r\n  }\r\n\r\n  getFollowers() {\r\n    this.followersList = []\r\n    this.subscribtion.push(this.firestore.collection(`Users`).doc(this.user.id).collection('followers').valueChanges().subscribe((data) => {\r\n      this.followers = data.length\r\n      data.forEach(el => {\r\n        this.followersList.push(el);\r\n      })\r\n    })\r\n    )\r\n\r\n  }\r\n\r\n  getFollowing() {\r\n    this.followingList = []\r\n    this.subscribtion.push(this.firestore.collection(`Users`).doc(this.user.id).collection('following').valueChanges().subscribe((data) => {\r\n      this.following = data.length\r\n      data.forEach(el => {\r\n        this.followingList.push(el);\r\n      })\r\n\r\n    })\r\n    )\r\n    console.log(this.followingList)\r\n\r\n  }\r\n\r\n  changeName(name: string) {\r\n    var splittedName = name.split(\" \");\r\n    this.user.firstName = splittedName[0];\r\n    this.user.secondName = (splittedName[1]) ? splittedName[1] : \"\";\r\n    // this.user.firstName = name\r\n    this.FireService.updateDocument(\"Users/\" + this.user.id, this.user);\r\n\r\n    this.postList.forEach(el => {\r\n      el.owner.name = name;\r\n      this.FireService.updateDocument(\"post/\" + el.id, el);\r\n\r\n      // this.getComments(el.id);\r\n      // console.log(this.commentsList)\r\n      // this.commentsList.forEach(element => {\r\n      //   element.forEach((x:any) => {\r\n      //     x.writer.name = name;\r\n      //     this.FireService.updateDocument(\"/post/\" + el.id + \"/comment/\" + element.id, x);\r\n      //   })\r\n\r\n      // })\r\n    });\r\n\r\n\r\n    // this.getAllUsers();\r\n\r\n    // this.usersList.forEach(el => {\r\n    //   this.FireService.getCollection(\"Users/\" + el.id + \"/followers/\").subscribe(res => {\r\n    //     res.forEach(element => {\r\n    //       if (element.userid == this.user.id) {\r\n    //         element.name = name;\r\n    //       }\r\n    //     })\r\n    //   });\r\n    // });\r\n\r\n    console.log(this.postList)\r\n\r\n    localStorage.setItem('userdata', JSON.stringify(this.user));\r\n    this.ngOnInit()\r\n  }\r\n\r\n  getUserById(id: string) {\r\n    this.FireService.getDocument(\"Users/\" + id).subscribe(res => {\r\n      this.updatedUser = res\r\n      console.log(this.updatedUser)\r\n    });\r\n  }\r\n\r\n  getAllUsers() {\r\n    this.FireService.getCollection(\"Users/\").subscribe(res => {\r\n      this.usersList = res\r\n      console.log(this.usersList)\r\n    });\r\n  }\r\n\r\n  open(content: any) {\r\n    this.modalService.open(content);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscribtion.forEach(element => {\r\n      element.unsubscribe();\r\n    })\r\n  }\r\n  startRecording() {\r\n    this.isRecording = true;\r\n    let mediaConstraints = {\r\n      video: false,\r\n      audio: true\r\n    };\r\n    navigator.mediaDevices\r\n      .getUserMedia(mediaConstraints)\r\n      .then(this.successCallback.bind(this), this.errorCallback.bind(this));\r\n  }\r\n\r\n\r\n  startVideoRecording() {\r\n    this.isRecordingVideo = true;\r\n    let mediaConstraints = {\r\n      video: true,\r\n      audio: true\r\n    };\r\n    navigator.mediaDevices\r\n      .getUserMedia(mediaConstraints)\r\n      .then(this.successCallbackVideo.bind(this), this.errorCallback.bind(this));\r\n  }\r\n\r\n  successCallbackVideo(stream: any) {\r\n    var options = {\r\n      mimeType: \"video/mp4\",\r\n    };\r\n\r\n    //Start Actuall Recording\r\n    var MediaStreamRecorder = RecordRTC.MediaStreamRecorder;\r\n    this.record = new MediaStreamRecorder(stream, options);\r\n    this.record.record();\r\n  }\r\n\r\n  successCallback(stream: any) {\r\n    var options = {\r\n      mimeType: \"audio/wav\",\r\n      numberOfAudioChannels: 1\r\n    };\r\n\r\n    //Start Actuall Recording\r\n    var StereoAudioRecorder = RecordRTC.StereoAudioRecorder;\r\n    this.record = new StereoAudioRecorder(stream, options);\r\n    this.record.record();\r\n  }\r\n\r\n  stopRecording() {\r\n    this.isRecording = false;\r\n    this.record.stop(this.processRecording.bind(this));\r\n  }\r\n\r\n  stopRecordingVideo() {\r\n    this.isRecordingVideo = false;\r\n    this.record.stop(this.processRecordingVideo.bind(this));\r\n  }\r\n\r\n  processRecording(blob: any) {\r\n    this.urls.push(URL.createObjectURL(blob)!);\r\n  }\r\n\r\n  processRecordingVideo(blob: any) {\r\n    this.urlsVideo.push(URL.createObjectURL(blob)!);\r\n  }\r\n\r\n  sanitize(url: string) {\r\n    // console.log(url)\r\n    return this.domSanitizer.bypassSecurityTrustUrl(url);\r\n  }\r\n\r\n  errorCallback(error: any) {\r\n    this.error = 'Can not play audio in your browser';\r\n  }\r\n\r\n  async uploadFile2(event: any, type: string) {\r\n    var filePath: any;\r\n    const file = event.target.files[0];\r\n    const id = this.firestore.createId()\r\n    if (type == \"image\")\r\n      filePath = '/post/images/' + id;\r\n    else if (type == \"audio\")\r\n      filePath = '/post/audio/' + id;\r\n    else if (type == \"video\")\r\n      filePath = '/post/video/' + id;\r\n    await this.firestorage.upload(filePath, file);\r\n    const ref = this.firestorage.refFromURL(\"gs://sout-2d0f6.appspot.com\" + filePath).getDownloadURL().toPromise().then((url => {\r\n      console.log(url);\r\n      if (type == \"image\") {\r\n        this.post.image = url\r\n      } else if (type == \"audio\") {\r\n        this.post.audio = url\r\n      } else if (type == \"video\") {\r\n        this.post.video = url\r\n      }\r\n      console.log(url)\r\n    }));\r\n    alert('upload done')\r\n    // });\r\n  }\r\n\r\n  bookmarkpost(post: any) {\r\n    this.firestore.collection(\"Users\").doc(this.user.id).collection(\"bookmarks\").add({\r\n      post: this.firestore.collection(\"post\").doc(post.id).ref,\r\n    })\r\n    alert(`post added`)\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { Post } from 'src/app/models/post.model';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { FireService } from 'src/app/services/fire.service';\r\nimport { PostsService } from 'src/app/services/posts.service';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\n\r\nimport { NgbModalConfig, NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { Report } from 'src/app/models/report.model';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { finalize, map } from 'rxjs/operators';\r\n\r\nimport { Subscription } from 'rxjs';\r\nimport { ISettingsData } from '../../viewModels/isettings-data';\r\nimport { ModeService } from 'src/app/services/mode.service';\r\n\r\n@Component({\r\n  selector: 'app-other-profile',\r\n  templateUrl: './other-profile.component.html',\r\n  styleUrls: ['./other-profile.component.scss'],\r\n  providers: [NgbModalConfig, NgbModal]\r\n})\r\nexport class OtherProfileComponent implements OnInit {\r\n  userId: string | null = \"\";\r\n  user: User = new User();\r\n  postList: Post[] = [];\r\n  userInfo: User = new User();\r\n  ownerId: string = \"\";\r\n  postMind: string = \"\";\r\n  report: Report | any = new Report();\r\n  postcomfields: string[] = [];\r\n  LikesList: any[] = [];\r\n  commentsList: any[] = [];\r\n  picURL: any;\r\n  coverPicURL: string = \"\";\r\n  reportImageURL: string = \"\";\r\n\r\n  uploadPercent: Observable<number> | any;\r\n  downloadURL: Observable<string> | any;\r\n  uploaded: string = \"\";\r\n  imageReStatus: string = \"Choose Image\";\r\n  notificationsNo: number = 0;\r\n  check: boolean | undefined;\r\n  checkFollower: boolean = false;\r\n\r\n  following: number = 0;\r\n  followers: number = 0;\r\n  followersList: any[] = [];\r\n  followingList: any[] = [];\r\n\r\n  subscribtion: Subscription[] = [];\r\n  settingsData: ISettingsData = { privateAcc: false, favColor: '', favMode: '', oldPassword: '', deactive: false };\r\n\r\n  constructor(private postsService: PostsService, private activatedRoute: ActivatedRoute,\r\n    private router: Router, private FireService: FireService, config: NgbModalConfig, private modalService: NgbModal\r\n    , private firestore: AngularFirestore, private storage: AngularFireStorage, private modeService: ModeService) {\r\n\r\n    config.backdrop = 'static';\r\n    config.keyboard = false;\r\n    this.modalService.dismissAll();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.user = JSON.parse(localStorage.getItem('userdata')!)\r\n    if (this.user) {\r\n\r\n      this.picURL = this.user.picURL;\r\n      this.settingsData.favMode = this.user.favMode;\r\n      if (this.settingsData.favMode === \"dark\") { this.modeService.OnDark(); this.settingsData.favMode = \"dark\"; }\r\n      else if (this.settingsData.favMode === \"light\") { this.modeService.defaultMode(); this.settingsData.favMode = \"light\"; }\r\n\r\n      this.activatedRoute.paramMap.subscribe((params) => {\r\n        let UIDParam: string | null = params.get('UID');\r\n        this.userId = UIDParam;\r\n\r\n\r\n        if (this.userId == this.user.id)\r\n          this.router.navigate(['/users/profile'])\r\n        else {\r\n          this.getUserById(this.userId!)\r\n          this.getAllPosts();\r\n          this.getnotificationsno();\r\n          this.getFollowers();\r\n          this.getFollowing();\r\n          // if(this.check)\r\n          // this.checkFollower=false;\r\n\r\n        }\r\n      });\r\n    }\r\n    else\r\n      this.router.navigate(['/landing'])\r\n  }\r\n\r\n\r\n  getUserById(id: string) {\r\n\r\n    this.FireService.getDocument(\"Users/\" + id).subscribe(res => {\r\n      this.userInfo = res\r\n      console.log(this.userInfo)\r\n      this.postMind = \"Write something to \" + this.userInfo.firstName + \" ...\"\r\n    });\r\n  }\r\n\r\n  getAllPosts() {\r\n    this.postsService.getAllUserPosts(this.userId!).subscribe(res => {\r\n      this.postList = res\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getComments(this.postList[index].id)\r\n      }\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getLikes(this.postList[index].id)\r\n      }\r\n    });\r\n    // return this.postList;\r\n    console.log(this.postList)\r\n\r\n  }\r\n\r\n  open(content: any) {\r\n    this.modalService.open(content);\r\n  }\r\n\r\n  addLike(post: any) {\r\n    this.firestore.collection('post').doc(post.id).collection(\"like\").add({\r\n      userid: this.user.id\r\n    })\r\n    this.notifyUser(post.owner.id, `${this.user.firstName} liked on your post `)\r\n  }\r\n\r\n  addComment(post: any, index: number) {\r\n    this.firestore.collection(`post`).doc(post.id).collection('comment').add({\r\n      writer: {\r\n        id: this.user.id,\r\n        name: this.user.firstName + \" \" + this.user.secondName,\r\n        picURL: this.user.picURL\r\n      },\r\n      description: this.postcomfields[index],\r\n      date: new Date().toISOString(),\r\n    })\r\n\r\n    this.notifyUser(post.owner.id, `${this.user.firstName} commented on your post \"${this.postcomfields[index]}\"`)\r\n  }\r\n\r\n  follow() {\r\n    if (this.check) {\r\n      console.log(\"You already follow this user\")\r\n      this.checkFollower = true;\r\n    } else {\r\n      this.FireService.setDocument(\"/Users/\" + this.userInfo.id + \"/followers/\" + this.user.id, {\r\n        userid: this.user.id,\r\n        name: this.user.firstName + \" \" + this.user.secondName,\r\n        picURL: this.user.picURL\r\n      });\r\n      this.FireService.setDocument(\"/Users/\" + this.user.id + \"/following/\" + this.userInfo.id, {\r\n        userid: this.userInfo.id,\r\n        name: this.userInfo.firstName + \" \" + this.userInfo.secondName,\r\n        picURL: this.userInfo.picURL\r\n      })\r\n      this.notifyUser(this.userInfo.id, `${this.user.firstName} followed You!`)\r\n      this.check = true;\r\n    }\r\n\r\n  }\r\n\r\n  getFollowers() {\r\n    this.followersList = []\r\n    this.subscribtion.push(this.firestore.collection(`Users`).doc(this.userId!).collection('followers').valueChanges().subscribe((data) => {\r\n      this.followers = data.length\r\n      data.forEach(el => {\r\n        this.followersList.push(el);\r\n      })\r\n    }))\r\n    console.log(this.followersList)\r\n\r\n  }\r\n\r\n  getFollowing() {\r\n    this.followingList = []\r\n    this.subscribtion.push(this.firestore.collection(`Users`).doc(this.userId!).collection('following').valueChanges().subscribe((data) => {\r\n      this.following = data.length\r\n      data.forEach(el => {\r\n        this.followingList.push(el);\r\n      })\r\n    }))\r\n\r\n  }\r\n\r\n  async getComments(postid: string) {\r\n    this.subscribtion.push(await this.firestore.collection('post').doc(postid).collection('comment').valueChanges().subscribe((data) => {\r\n      this.commentsList.push(data);\r\n      console.log(data)\r\n    })\r\n    )\r\n  }\r\n\r\n  async getLikes(postid: string) {\r\n    this.subscribtion.push(await this.firestore.collection('post').doc(postid).collection('like').valueChanges().subscribe((data) => {\r\n      this.LikesList.push(data)\r\n      console.log(data)\r\n    })\r\n    )\r\n  }\r\n\r\n  async notifyUser(usrId: string, msg: string) {\r\n    await this.firestore.collection(`Users`).doc(usrId).collection('notifications').add({\r\n      date: new Date().toISOString(),\r\n      description: msg,\r\n      seen: false,\r\n      maker: {\r\n        id: this.user.id,\r\n        name: this.user.firstName + \" \" + this.user.secondName,\r\n        picURL: this.user.picURL\r\n      }\r\n    })\r\n  }\r\n\r\n  getnotificationsno() {\r\n    this.subscribtion.push(this.firestore.collection('Users').doc(this.user.id).collection('notifications').valueChanges().subscribe((data) => {\r\n      console.log(`notifications: ${data}`)\r\n      this.notificationsNo = data.length\r\n    })\r\n    )\r\n  }\r\n\r\n  //************** For Report ******************** \r\n\r\n  uploadReportImage(event: any) {\r\n    var filePath: any;\r\n    const file = event.target.files[0];\r\n    var imageId = this.firestore.createId();\r\n\r\n    filePath = '/Reports/images/' + imageId;\r\n\r\n    const task = this.storage.upload(filePath, file);\r\n    const ref = this.storage.refFromURL(\"gs://sout-2d0f6.appspot.com\" + filePath);\r\n\r\n    this.imageReStatus = \"\"\r\n    this.uploaded = `Uploading..`\r\n\r\n    task.snapshotChanges().pipe(\r\n      finalize(() => {\r\n        this.uploaded = `Image Uploaded`;\r\n        this.imageReStatus = file.name\r\n\r\n        const downloadURL = ref.getDownloadURL();\r\n        downloadURL.subscribe(url => {\r\n          this.reportImageURL = url\r\n          console.log(this.reportImageURL)\r\n        })\r\n\r\n      })\r\n    )\r\n      .subscribe()\r\n\r\n  }\r\n\r\n  reportUser(title: string, des: string) {\r\n\r\n    this.report.title = title;\r\n    this.report.description = des;\r\n    this.report.userId = this.user.id;\r\n    this.report.reportedId = this.userInfo.id;\r\n    this.report.type = \"user\";\r\n    this.report.id = this.firestore.createId();\r\n    this.report.image = this.reportImageURL;\r\n    this.FireService.setDocument(\"/Reports/\" + this.report.id, { ...this.report });\r\n  }\r\n\r\n  bookmarkpost(post: any) {\r\n    this.firestore.collection(\"Users\").doc(this.user.id).collection(\"bookmarks\").add({\r\n      post: this.firestore.collection(\"post\").doc(post.id).ref,\r\n    })\r\n    alert(`post added`)\r\n  }\r\n\r\n  reportPost(title: string, des: string, postId: string) {\r\n\r\n    this.report.title = title;\r\n    this.report.description = des;\r\n    this.report.userId = this.user.id;\r\n    this.report.reportedId = postId;\r\n    this.report.type = \"post\";\r\n    this.report.id = this.firestore.createId();\r\n    this.report.image = this.reportImageURL;\r\n    this.FireService.setDocument(\"/Reports/\" + this.report.id, { ...this.report });\r\n  }\r\n  ngOnDestroy(): void {\r\n    this.subscribtion.forEach(element => {\r\n      element.unsubscribe();\r\n    })\r\n  }\r\n\r\n}\r\n\r\n","<app-header></app-header>\r\n\r\n<div class=\"container-fluid\">\r\n  <div class=\"row\">\r\n    <app-sidebar></app-sidebar>\r\n    <div style=\"width: 80%;\" class=\"col-xs-9 col-sm-9 col-md-7 col-lg-8 my-2 mx-auto\"> \r\n              <div id=\"sidebarMenu\"  style=\"background-color: #F5F7F8 ;padding-left:3%;padding: 2%;margin-left: 0.5%\">\r\n              <h1>Notifications:</h1>\r\n              <div class=\"dropdown-divider\"></div>\r\n             \r\n                <div class=\"card\"  *ngFor=\"let item of notoficationArr\" style=\"width: 95%;max-height: 90px;\">\r\n                  <button *ngIf=\"!item.seen\" class=\"btn btn-outline-light\" [ngStyle]=\"{'background-color': this.user.favColor}\" (click)=\"removeN(item.id)\">\r\n                  <div class=\"card-body p-3\">\r\n                    <p class=\"card-text\">{{item.description}}<img class=\" float-right\" style=\"width: 5%;\"  [src]=\"item.maker.picURL\" alt=\"Card image cap\"></p>\r\n                    <small class=\"card-text\">{{item.date | date:'dd-MM-yyyy HH-mm'}}</small>\r\n                    \r\n                  </div>\r\n                  </button>\r\n                </div>\r\n                <br>\r\n                 <br>\r\n                 <hr>\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n","export class Report {\r\n    constructor(\r\n        public id: string = \"\",\r\n        public date: Date = new Date(),\r\n        public audio: string = \"\",\r\n        public description: string = \"\",\r\n        public image: string = \"\",\r\n        public reportedId: string = \"\",\r\n        public title: string = \"\",\r\n        public type: string = \"\",\r\n        public userId: string = \"\"\r\n    ) { }\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { Talent } from '../models/talent.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TalentService {\r\n\r\n  public allTalents: Talent[] = []\r\n  public dataTalent: any;\r\n  constructor(private firestore: AngularFirestore) { }\r\n\r\n  getAllTalents(): Observable<any> {\r\n    this.allTalents = [];\r\n    var docs;\r\n\r\n    return this.firestore.collection(\"/talents\").get().pipe(map(res => {\r\n      docs = res.docs\r\n      docs.forEach(el => {\r\n        this.dataTalent = el.data()\r\n        this.allTalents.push(this.dataTalent)\r\n      })\r\n      console.log(this.allTalents)\r\n      return this.allTalents;\r\n\r\n    }))\r\n  }\r\n\r\n\r\n}\r\n","import { OnDestroy, SimpleChanges } from '@angular/core';\r\nimport { AfterViewInit, OnChanges } from '@angular/core';\r\nimport { Component, NgModule, OnInit } from '@angular/core';\r\nimport {FormsModule, NgForm} from '@angular/forms';\r\nimport { ISettingsShow } from 'src/app/users/viewModels/isettings';\r\nimport { ISettingsData } from 'src/app/users/viewModels/isettings-data';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { UiSwitchModule } from 'ngx-toggle-switch';\r\n\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { FireService } from 'src/app/services/fire.service';\r\nimport { ModeService } from 'src/app/services/mode.service';\r\n\r\n@Component({\r\n  selector: 'app-setting',\r\n  templateUrl: './setting.component.html',\r\n  styleUrls: ['./setting.component.scss']\r\n})\r\nexport class SettingComponent implements OnInit {\r\n  settings: ISettingsShow={accountPrivacy:true,themes:false,changePassword:false,notifications:false,report:false,manageAccount:false};\r\n  settingsData: ISettingsData={privateAcc:false,favColor:'',favMode:'',oldPassword:'',deactive:false};\r\n  openedValue:boolean=false;\r\n  alertDeact:boolean=false;\r\n  newPass:string='';\r\n  oldPass:string='';\r\n  user: User = new User();\r\n  userAuth;\r\n  code:any; \r\n  R:any;\r\n  G:any;\r\n  B:any;\r\n  checked:boolean=false;\r\n  actionCode:any;\r\n  actionCodeChecked:boolean=false;\r\n  mode:any;\r\n  constructor(private modeService:ModeService,private fireService:FireService, private firestore: AngularFirestore, private fireAuth: AngularFireAuth,private router: Router,private route: ActivatedRoute) {\r\n    \r\n    this.userAuth= JSON.parse(localStorage.getItem('userauth')!);\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    this.user = JSON.parse(localStorage.getItem('userdata')!)\r\n    if (this.user) {\r\n      this.settingsData.privateAcc = this.user.privateAcc;\r\n      this.settingsData.favColor = this.user.favColor;\r\n      this.settingsData.favMode = this.user.favMode;\r\n      this.settingsData.deactive = this.user.deactive;\r\n      if(this.settingsData.favMode===\"dark\") {this.modeService.OnDark();this.settingsData.favMode=\"dark\";this.checked=true;}\r\n      else if(this.settingsData.favMode===\"light\") {this.modeService.defaultMode();this.settingsData.favMode=\"light\";this.checked=false;}\r\n    }\r\n    else\r\n      this.router.navigate(['/landing'])\r\n  }\r\n  onDarkEv(e:any){\r\n    // console.log(e)\r\n    if(e){\r\n      this.modeService.OnDark();\r\n      this.settingsData.favMode=\"dark\";\r\n      this.checked=true;\r\n    }\r\n    else{\r\n      this.modeService.defaultMode();\r\n      this.settingsData.favMode=\"light\";\r\n      this.checked=false;\r\n    }\r\n  }\r\n  disableOthers(settingName:'accountPrivacy'|'themes'|'changePassword'|'notifications'|'report'|'manageAccount'){\r\n    this.openedValue = this.settings[settingName];\r\n    this.disableAll();\r\n    this.settings[settingName]=!this.openedValue;\r\n  }\r\n  disableAll(){\r\n    this.settings.accountPrivacy=false;\r\n    this.settings.themes=false;\r\n    this.settings.changePassword=false;\r\n    this.settings.notifications=false;\r\n    this.settings.report=false;\r\n    this.settings.manageAccount=false;\r\n  }\r\n  active(obj:any){\r\n    obj.style.backgroundColor='#BBBBBA'\r\n  }\r\n  deactivate(){\r\n    this.alertDeact=true;\r\n  }\r\n  confirmDeactivate() {\r\n    window.location.href = \"../landing\";\r\n  }\r\n  resetPassword(){\r\n    this.fireAuth.sendPasswordResetEmail(this.userAuth.email).then(\r\n      ()=>{\r\n        alert(\"Check Your Email\")\r\n      },\r\n      err=>{\r\n        alert(err)\r\n      }\r\n    );\r\n  }\r\n  saveThemes(){\r\n    this.user.favColor=this.settingsData.favColor;\r\n    this.user.favMode=this.settingsData.favMode;\r\n    this.fireService.updateDocument(`/Users/${this.user.id}`,{favColor:this.settingsData.favColor,favMode:this.settingsData.favMode})\r\n    localStorage.setItem('userdata', JSON.stringify(this.user))\r\n  }\r\n  hexToRgb(hex:string) {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n     if(result) {\r\n      this.R= parseInt(result[1], 16),\r\n      this.G= parseInt(result[2], 16),\r\n      this.B= parseInt(result[3], 16)\r\n    } \r\n  }\r\n  \r\n  \r\n  changePassword(){\r\n\r\n    this.fireAuth.signInWithEmailAndPassword(this.userAuth.email, this.settingsData.oldPassword).then(res => {\r\n      console.log(\"res1\",res)\r\n      \r\n      if (res.user) {\r\n        this.resetPassword();\r\n      }\r\n    }).catch(err=>{ alert(err)})\r\n  }\r\n}\r\n","<app-header></app-header>\r\n<div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n        <app-sidebar></app-sidebar>\r\n        <div class=\"col-9 col-md-8\" style=\"margin-top:1.2%\">\r\n            <div class=\"btn-group btn-group-lg\" role=\"group\" aria-label=\"bookmarksType\">\r\n                <button type=\"button\" class=\"btn btn-dark\">Later</button>\r\n                <button type=\"button\" class=\"btn btn-secondary\"><i class=\"fas fa-plus-circle\"></i></button>\r\n            </div>\r\n\r\n            <!-- <button type=\"button\" class=\"btn btn-primary\" (click)=\"openModal(template)\">Create template modal</button> -->\r\n\r\n            \r\n\r\n            <div id=\"Later\">\r\n                <ng-container *ngIf=\"bookmarkFlag\">\r\n                    <div [id]=\"bookmark.data.id\" *ngFor=\"let bookmark of bookmarksRef;let i=index\" class=\"bookmark\" >\r\n                        <button type=\"button\" class=\"close\" aria-expanded=\"false\" aria-label=\"Close\">\r\n                            <span aria-hidden=\"true\" [id]=\"bookmark.data.id\" (click)=\"deleteBookmark($event.target.id)\">&times;</span>\r\n                          </button>\r\n                    <!-- <span aria-hidden=\"true\" class=\"closeBtn\" [id]=\"bookmark.id]\" (click)=\"deleteBookmark($event.target.id)\">&times;</span> -->\r\n                    <div class=\"row\" (click)=\"open(content)\" >\r\n                        <div class=\"col-3\">\r\n                            <div *ngIf=\"bookmark.data.image.length;then postImg else userImg\"></div>    \r\n                            <ng-template #postImg ><img [src]=\"bookmark.data.image[0]\" class=\"rounded float-left bookmarkIcon\" alt=\"soul\"></ng-template>\r\n                            <ng-template #userImg >\r\n                                <img [src]=\"bookmark.data.owner.picURL\" class=\"rounded float-left bookmarkIcon\" alt=\"soul\">\r\n                            </ng-template>\r\n                        </div>\r\n                        <div class=\"col-9\">\r\n                            <strong class=\"FontConfig\">{{bookmark.data.description}}</strong><br>\r\n                            <small style=\"color:gray;\">Bookmark  Section: Later</small><br>\r\n                            <small style=\"color:gray;\">\r\n                                \r\n                                <img class=\"smallPic\" [src]=\"bookmark.data.owner.picURL\">  Saved from {{bookmark.data.owner.name}}</small>\r\n                        </div>\r\n\r\n\r\n                        <ng-template #content let-c=\"close\" let-d=\"dismiss\" style=\"border-radius: 20px;\">\r\n                            <div class=\"modal-header\">\r\n                              <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"d('Cross click')\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                              </button>\r\n                            </div>\r\n                            <div class=\"modal-body\">\r\n                                <div >\r\n                                    <div class=\"poster\">\r\n                                        \r\n                                        <img [src]=\"bookmark.data.owner.picURL\">\r\n                                        <div id=\"posterName\">{{bookmark.data.owner.name}}</div>\r\n                                        <div id=\"time\">{{bookmark.data.date.seconds * 1000 | date:'dd-MM-yyyy hh:mm'}} <i class=\"fas fa-globe-africa\"></i></div>\r\n                                    </div>\r\n\r\n                                    <span *ngIf=\"bookmark.data.description\">{{bookmark.data.description}}</span> \r\n                                    <div *ngIf=\"bookmark.data.image.length\">\r\n                                        <div id=\"carouselExampleIndicators\" class=\"carousel slide\" data-ride=\"carousel\">\r\n                                            <ol *ngFor=\"let index of bookmark.data.image.length\" class=\"carousel-indicators\">\r\n                                              <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"index\" class=\"active\"></li>\r\n                                            </ol>\r\n                                            <div class=\"carousel-inner\">\r\n                                              <div *ngFor=\"let img of bookmark.data.image\" class=\"carousel-item\">\r\n                                                <img src=\"img\" class=\"d-block w-100\" >\r\n                                              </div>\r\n                                            </div>\r\n                                            <a class=\"carousel-control-prev\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"prev\">\r\n                                              <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n                                              <span class=\"sr-only\">Previous</span>\r\n                                            </a>\r\n                                            <a class=\"carousel-control-next\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"next\">\r\n                                              <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n                                              <span class=\"sr-only\">Next</span>\r\n                                            </a>\r\n                                          </div>\r\n                                    </div>\r\n                                    <!-- <img src=\"bookmark.owner.picURL\" class=\"rounded float-left bookmarkIcon\" style=\"margin: 2% 2% 2% 0%\" alt=\"dark\"> -->\r\n                                    <span *ngIf=\"bookmark.data.audio\" class=\"soutplayer\">\r\n                                        <audio id=\"player\" src=\"../../../../assets/02 Atgah Wahed.mp3\"></audio>\r\n                                        <div>\r\n                                            <i onclick=\"document.getElementById('player').play()\" class=\"fas fa-2x fa-play-circle\" style=\"color: #d8352b\"></i>\r\n                                            <i onclick=\"document.getElementById('player').pause()\" class=\"fas fa-2x fa-pause-circle\" style=\"color: #d8352b\"></i>\r\n                                            <span id=\"audtime\"></span>\r\n\r\n                                            <input type=\"range\" class=\"slider\" id=\"myRange1\" min=\"0\">\r\n\r\n                                            <span id=\"auddur\"></span>\r\n                                            <span class=\"btn-group dropright\">\r\n                                                <i class=\"fas fa-2x fa-volume-up\" style=\"color: #d8352b\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" id=\"volicon\"></i>\r\n                                                <div class=\"dropdown-menu\">\r\n                                                    <input type=\"range\" id=\"vol\" min=\"0\" max=\"100\">\r\n                                                </div>\r\n                                            </span>\r\n                                        </div>\r\n                                    </span>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div >\r\n                                <hr style=\"margin-top: 15px;\">\r\n                                <div class=\"lastRowPost\">\r\n                                    <div id=\"like\" (click)=\"addLike(bookmark.data)\">\r\n                                        <i class=\"far fa-thumbs-up\" id=\"likeIcon\"></i>\r\n                                        <span id=\"likeCont\">\r\n                                            Like <span class=\"badge badge-pill badge-light\">{{LikesList[i].length}}</span>\r\n                                        </span>\r\n                                    </div>\r\n                                    <div id=\"comment\">\r\n                                        <i class=\"fas fa-microphone-alt\"></i>\r\n                                        <span id=\"commentCont\">\r\n                                            Voice\r\n                                        </span>\r\n                                    </div>\r\n                                    <div id=\"comment\" (click)=\"addComment(bookmark.data,i)\">\r\n                                        <i class=\"far fa-comment-alt\" id=\"commentIcon\"></i>\r\n                                        <span id=\"commentCont\">\r\n                                            Comment <span class=\"badge badge-pill badge-light\">{{commentsList[i].length}}</span>\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                \r\n                                <div id=\"writecomnt\">\r\n                                    <hr style=\"margin-top: 55px;margin-bottom: 10px\">\r\n                                    <div class=\"firstRow\">\r\n                                        <img [src]=\"user.picURL\" [routerLink]=\"'/users/profile/'+bookmark.data.owner.id\" routerLinkActive=\"active\"\r\n                                            style=\"cursor: pointer; margin-top: 7px;\">\r\n                                        <input [(ngModel)]=\"postcomfields[i]\" style=\"margin-bottom: 10px;\" type=\"text\" placeholder=\"Write a comment...\"\r\n                                            id=\"cmntInput\" />\r\n                                    </div>\r\n                \r\n                                </div>\r\n                                <div *ngFor=\"let item of commentsList[i]\" class=\"my-2 mx-3 mt-3\" style=\"width: 70%;margin-left: 3.5%;\">\r\n                \r\n                                    <img style=\"width: 6%;height: 6%;float: left;border-radius: 50%;\" [src]=\"user.id==item.writer.id?user.picURL:item.writer.picURL\"\r\n                                    [routerLink]=\"'/users/profile/'+user.id==item.writer.id?user.id:item.writer.id\" routerLinkActive=\"active\">\r\n                \r\n                                    <div class=\"pl-2\" style=\"background-color:#F0F2F5;border-radius: 10px;margin-left: 5.5%;\">\r\n                                        <div><small id=\"posterName\">{{item.writer.name}}</small>\r\n                                            <small style=\"display: block;font-size: 10px;\">\r\n                                                {{item.date | date:'dd-MM-yyyy hh:mm'}}</small>\r\n                                        </div>\r\n                                        <span style=\"font-weight: 400;\">{{item.description}}</span>\r\n                                    </div>\r\n                \r\n                                </div>\r\n                            </div>\r\n                          </ng-template>\r\n                    </div>\r\n                    <!-- <i class=\"fas fa-share-square float-right\" style=\"margin-top:-1rem;\" (click)=\"shareBookmark()\"></i> -->\r\n\r\n                    </div>\r\n                </ng-container>\r\n                \r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { BookmarkComponent } from './components/bookmark/bookmark.component';\r\nimport { ChatComponent } from './components/chat/chat.component';\r\nimport { DiscoverComponent } from './components/discover/discover.component';\r\nimport { HomeComponent } from './components/home/home.component';\r\n//import { ReportsComponent } from './components/reports/reports.component';\r\nimport { NotoficationComponent } from './components/notofication/notofication.component';\r\nimport { OtherProfileComponent } from './components/other-profile/other-profile.component';\r\nimport { ProfileComponent } from './components/profile/profile.component';\r\nimport { SearchComponent } from './components/search/search.component';\r\nimport { SettingComponent } from './components/setting/setting.component';\r\nimport { TalentsComponent } from './components/talents/talents.component';\r\n\r\n\r\nimport { UsersComponent } from './users.component';\r\n\r\nconst routes: Routes = [\r\n  { path: 'home', component: HomeComponent },\r\n\r\n  { path: 'messages', component: ChatComponent },\r\n  { path: 'bookmarks', component: BookmarkComponent },\r\n  { path: 'settings', component: SettingComponent },\r\n  { path: 'talents', component: TalentsComponent },\r\n  { path: 'discover', component: DiscoverComponent },\r\n  { path: 'profile', component: ProfileComponent },\r\n  { path: 'profile/:UID', component: OtherProfileComponent },\r\n  { path: 'notifications', component: NotoficationComponent },\r\n  { path: 'search/:Sq', component: SearchComponent },\r\n  { path: '', redirectTo: 'home', pathMatch: 'full' }\r\n\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class UsersRoutingModule { }\r\n","<app-header></app-header>\r\n<div class=\"container\">\r\n\r\n    <div class=\"row no-padding\" class=\"col-md-12\" id=\"cover\" style=\"margin-bottom: 2.5%\">\r\n        <div id=\"coverPhotoParent\">\r\n            <img [src]=\"userInfo.coverPicURL\" id=\"coverPhoto\">\r\n            <div id=\"avatar\">\r\n                <img [src]=\"userInfo.picURL\">\r\n                <h3 id=\"name\" style=\"text-align: center;margin-top: 15px\">{{userInfo.firstName+\" \"+userInfo.secondName}}</h3>\r\n            </div>\r\n            <hr style=\"margin-top: 10%;\">\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"row\" style=\"margin-top: 40px\">\r\n        <input type=\"file\" id=\"myFileInput\" />\r\n\r\n        <div class=\"row nav nav2 justify-content-end\" id=\"nav-tab\"\r\n            style=\"background-color: transparent; width: 100%;margin-bottom: 2%;height: 5.5%;margin-top: 1%;\">\r\n\r\n            <span class=\"col nav-item padding-0\" data-toggle=\"tooltip\" data-placement=\"bottom\" style=\"float: left;\">\r\n                <span class=\"dropdown edit dropleft\"\r\n                    style=\"box-shadow: 0px 0.5px 5px grey;border-radius:20px;width: 120px;padding: 3px 12px 5px 12px; background-color: #F5F7F8;\">\r\n                    <a role=\"menuitem\" tabindex=\"-1\" (click)=\"open(followersModal)\">\r\n                        <b [ngStyle]=\"{'color': user.favColor}\"> {{followers}}</b> Followers\r\n                    </a>\r\n                </span>\r\n                <span class=\"dropdown edit dropleft\"\r\n                    style=\"box-shadow: 0px 0.5px 5px grey;border-radius:20px;width: 120px;padding: 3px 15px 5px 12px;background-color: #F5F7F8;\">\r\n                    <a role=\"menuitem\" tabindex=\"-1\" (click)=\"open(followingModal)\">\r\n                        <b [ngStyle]=\"{'color': user.favColor}\"> {{following}}</b> Following\r\n                    </a>\r\n                </span>\r\n            </span>\r\n\r\n            <span class=\"nav-item\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Follow\">\r\n                <div class=\"dropdown edit dropleft\"\r\n                    style=\"box-shadow: 0px 0.5px 5px grey;border-radius:50%;width: 40px;float: right;background-color: #F5F7F8;\">\r\n                    <button class=\"btn btn-default \" type=\"button\" id=\"menu1\" data-toggle=\"dropdown\" (click)=\"follow()\"\r\n                        style=\"width: 100%\"><i class=\"fas fa-user-plus\" style=\"font-size: 16px;text-align: center\"\r\n                            *ngIf=\"!check\" [ngStyle]=\"{'color': user.favColor}\"></i>\r\n                        <i class=\"fas fa-user-check\" style=\"font-size: 16px;text-align: center\" *ngIf=\"check\" [ngStyle]=\"{'color': user.favColor}\"></i>\r\n                    </button>\r\n                </div>\r\n            </span>\r\n            <span class=\"nav-item\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Send Message\">\r\n                <div class=\"edit dropleft\"\r\n                    style=\"box-shadow: 0px 0.5px 5px grey;border-radius:50%;width: 40px;float: right;background-color: #F5F7F8;\">\r\n                    <button [routerLink]=\"[ '/users/messages' ]\" routerLinkActive=\"active\" class=\"btn btn-default \"\r\n                        type=\"button\" id=\"menu1\" data-toggle=\"dropdown\" style=\"width: 100%\"><i class=\"fas fa-envelope\"\r\n                            style=\"font-size: 16px;text-align: center\" [ngStyle]=\"{'color': user.favColor}\"></i>\r\n                    </button>\r\n                </div>\r\n            </span>\r\n\r\n\r\n            <span class=\"nav-item\">\r\n                <div class=\"dropdown edit\"\r\n                    style=\"box-shadow: 0px 0.5px 5px grey;border-radius:50%;width: 40px;float: right;background-color: #F5F7F8;\">\r\n                    <button class=\"btn btn-default \" type=\"button\" id=\"menu1\" data-toggle=\"dropdown\"\r\n                        style=\"width: 100%\"><i class=\"fas fa-ellipsis-h\" style=\"font-size: 16px;text-align: center\" [ngStyle]=\"{'color': user.favColor}\"></i>\r\n                    </button>\r\n                    <ul class=\"dropdown-menu\" style=\"width: 25%;border: none\" role=\"menu\" aria-labelledby=\"menu1\">\r\n                        <li role=\"presentation\" style=\"padding-left:7px;\">\r\n                            <a role=\"menuitem\" tabindex=\"-1\" (click)=\"open(content)\">\r\n                                <i class=\"fas fa-exclamation-triangle\" style=\"font-size: 15px\" [ngStyle]=\"{'color': user.favColor}\"></i>\r\n                                Report Profile\r\n                            </a>\r\n\r\n\r\n\r\n                        </li>\r\n                        <!-- <hr>\r\n                        <li role=\"presentation\" style=\"padding-left:5px;\"><a role=\"menuitem\" tabindex=\"-1\"> <i\r\n                                    class=\"fas fa-ban\" style=\"font-size: 15px\" [ngStyle]=\"{'color': user.favColor}\"></i> Block</a></li> -->\r\n                    </ul>\r\n                </div>\r\n            </span>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"row\" id=\"center\">\r\n        <nav id=\"sidebarMenu1\" class=\"col-sm-1 col-md-3 leftSide sidebar\"\r\n        style=\"background-color: #F5F7F8;border-radius: 5px;\r\n        box-shadow: 0px 0.5px 5px grey;height: 75vh;\">\r\n            <div class=\"position-sticky my-3 d-flex justify-content-center\">\r\n                <ul class=\"nav flex-column\">\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/home' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-home\" [ngStyle]=\"{'color': user.favColor}\"></i><span class=\"d-none d-md-inline-block\"> Home</span>\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/notifications' ]\"\r\n                                routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-bell\" [ngStyle]=\"{'color': user.favColor}\"></i><span class=\"d-none d-md-inline-block\">Notifications <b\r\n                                        class=\"badge badge-pill\">{{notificationsNo}}</b></span>\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/messages' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-envelope\" [ngStyle]=\"{'color': user.favColor}\"></i><span class=\"d-none d-md-inline-block\"> Messages</span>\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/talents' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-music\" [ngStyle]=\"{'color': user.favColor}\"></i><span class=\"d-none d-md-inline-block\"> Talents</span>\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/discover' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-hashtag\" [ngStyle]=\"{'color': user.favColor}\"></i><span class=\"d-none d-md-inline-block\"> Discover</span>\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/settings' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-cog\" [ngStyle]=\"{'color': user.favColor}\"></i><span class=\"d-none d-md-inline-block\"> Settings</span>\r\n\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/bookmarks' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-bookmark\" [ngStyle]=\"{'color': user.favColor}\"></i><span class=\"d-none d-md-inline-block\"> Bookmarks</span>\r\n                            </a>\r\n                        </li>\r\n                    </div>\r\n                </ul>\r\n\r\n            </div>\r\n        </nav>\r\n\r\n        <div class=\"col-sm-11 col-md-9 rightSide\" style=\"height: 100%;margin-bottom: 30px;\">\r\n            <!-- <div id=\"writePst\">\r\n                <div class=\"firstRow\">\r\n                    <img [src]=\"user.picURL\" style=\"width: 6%;cursor: pointer;\" [routerLink]=\"'/users/profile'\" routerLinkActive=\"active\">\r\n                    <input type=\"text\" placeholder={{postMind}} />\r\n                </div>\r\n                <hr>\r\n                <div class=\"secondRow\">\r\n                    <div class=\"live\">\r\n                        <i class=\"fas fa-video\" id=\"liveIcon\" [ngStyle]=\"{'color': user.favColor}\"></i>\r\n                        <i class=\"fas fa-microphone-alt\" [ngStyle]=\"{'color': user.favColor}\"></i>\r\n                        <i class=\"fas fa-paperclip\" [ngStyle]=\"{'color': user.favColor}\"></i>\r\n                        <input id=\"postButt\" type=\"button\" value=\"Post\" [ngStyle]=\"{'background-color': user.favColor}\">\r\n                    </div>\r\n\r\n                </div>\r\n            </div> -->\r\n\r\n            <div id=\"post1\" *ngFor=\"let post of postList;let i=index\" style=\"margin-bottom: 2.5%;margin-top: 0px;\">\r\n                <div class=\"dropdown \" style=\"float: right\">\r\n                    <button class=\"btn dropdown-toggle points\" id=\"menu1\" type=\"button\"\r\n                        data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><i\r\n                            class=\"fas fa-ellipsis-h\"  [ngStyle]=\"{'color': this.user.favColor}\"></i>\r\n                    </button>\r\n                    <ul class=\"dropdown-menu\" role=\"menu\">\r\n                        <li role=\"presentation\" style=\"padding-left:9px;\">\r\n                            <button (click)=\"bookmarkpost(post)\" style=\"color: black;background-color: transparent;border: none;cursor: pointer;\">\r\n                                <i class=\"fas fa-bookmark\"\r\n                                    style=\"font-size: 16px;color: #d8352b;margin-right: 5px;\"></i>\r\n                                Bookmark Post</button>\r\n                        </li>\r\n                        <hr>\r\n                        <li role=\"presentation\" style=\"padding-left:7px;cursor: pointer;\">\r\n                            <a role=\"menuitem\" tabindex=\"-1\" (click)=\"open(content)\" style=\"color: black\">\r\n                                <i class=\"fas fa-exclamation-triangle\"\r\n                                    style=\"font-size: 15px;color: #d8352b;margin-right: 5px;\"></i>\r\n                                Report Post</a>\r\n\r\n                            <!-- Modal -->\r\n                            <ng-template #content let-c=\"close\" let-d=\"dismiss\">\r\n                                <div class=\"modal-header text-light bg-dark\">\r\n                                    <h4 class=\"modal-title\" id=\"modal-basic-title\">Report Post !\r\n                                    </h4>\r\n                                    <button type=\"button\" class=\"close\" aria-label=\"Close\"\r\n                                        (click)=\"d('Cross click')\">\r\n                                        <span aria-hidden=\"true\" style=\"color:white;\">&times;</span>\r\n                                    </button>\r\n                                </div>\r\n                                <div class=\"modal-body\">\r\n                                    <input type=\"text\" class=\"form-control\" #title placeholder=\"Title\">\r\n                                    <br />\r\n                                    <input type=\"text\" class=\"form-control\" #desc placeholder=\"Description\">\r\n                                    <br />\r\n                                    <div class=\"custom-file\">\r\n                                        <input type=\"file\" class=\"custom-file-input\" id=\"inputGroupFile01\"\r\n                                            (change)=\"uploadReportImage($event)\">\r\n                                        <label class=\"custom-file-label\"\r\n                                            for=\"inputGroupFile01\">{{imageReStatus}}</label>\r\n                                        <div *ngIf=\"uploaded\" class=\"mt-1\" style=\"font-size: small;\">\r\n                                            <b *ngIf=\"uploaded=='Image Uploaded'\">&#10003;</b> {{ uploaded }}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"modal-footer\">\r\n                                    <button type=\"button\" class=\"btn btn-outline-dark\"\r\n                                        (click)=\"c('Save click');reportPost(title.value,desc.value,post.id)\">Report</button>\r\n                                </div>\r\n                            </ng-template>\r\n                            <!-- End Modal -->\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div class=\"poster\">\r\n                    <img [src]=\"userInfo.picURL\" style=\"cursor: pointer;\">\r\n                    <div id=\"posterName\" style=\"cursor: pointer;\">{{userInfo.firstName+\" \"+userInfo.secondName}}</div>\r\n                    <div id=\"time\">{{post.date.seconds * 1000 | date:'dd-MM-yyyy hh:mm'}} <i\r\n                            class=\"fas fa-globe-africa\"></i></div>\r\n                </div>\r\n\r\n                <span class=\"ml-2\">{{post.description}}</span>\r\n                <br />\r\n                <img [src]=\"post.image\" *ngIf=\"post.image\" style=\"width: 100%;\">\r\n                <span *ngIf=\"post.audio\">\r\n                    <div class=\"container-audio\">\r\n                        <audio controls>\r\n                            <source [src]=\"post.audio\" type=\"audio/ogg\">\r\n                            Your browser dose not Support the audio Tag\r\n                        </audio>\r\n                    </div>\r\n                </span>\r\n\r\n                <hr style=\"margin-top: 15px;\">\r\n                <div class=\"lastRowPost\">\r\n                    <div id=\"like\" (click)=\"addLike(post)\">\r\n                        <i class=\"far fa-thumbs-up\" id=\"likeIcon\"></i>\r\n                        <span id=\"likeCont\">\r\n                            Like <span class=\"badge badge-pill badge-light\">{{LikesList[i].length}}</span>\r\n                        </span>\r\n                    </div>\r\n                    <div id=\"comment\">\r\n                        <i class=\"fas fa-microphone-alt\"></i>\r\n                        <span id=\"commentCont\">\r\n                            Voice\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div id=\"comment\" (click)=\"addComment(post,i)\">\r\n                        <i class=\"far fa-comment-alt\" id=\"commentIcon\"></i>\r\n                        <span id=\"commentCont\">\r\n                            Comment <span class=\"badge badge-pill badge-light\">{{commentsList[i].length}}</span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div id=\"writecomnt\">\r\n                    <hr style=\"margin-top: 55px;margin-bottom: 10px\">\r\n                    <div class=\"firstRow\">\r\n                        <img [src]=\"picURL\" [routerLink]=\"'/users/profile'\" routerLinkActive=\"active\"\r\n                            style=\"cursor: pointer;\">\r\n                        <input [(ngModel)]=\"postcomfields[i]\" type=\"text\" placeholder=\"Write a comment...\"\r\n                            id=\"cmntInput\" />\r\n                    </div>\r\n\r\n                </div>\r\n                <div *ngFor=\"let item of commentsList[i]\" class=\"my-2 mx-3 mt-3\" style=\"width: 70%;margin-left: 3.5%;\">\r\n\r\n                    <img style=\"width: 6%;height: 6%;float: left;border-radius: 50%;\"\r\n                        [src]=\"user.id==item.writer.id?picURL:item.writer.picURL\"\r\n                        [routerLink]=\"'/users/profile/'+item.writer.id\" routerLinkActive=\"active\">\r\n\r\n                    <div class=\"pl-2\" style=\"background-color:#F0F2F5;border-radius: 10px;margin-left: 5.5%;\">\r\n                        <div><small id=\"posterName\">{{item.writer.name}}</small>\r\n                            <small style=\"display: block;font-size: 10px;\">\r\n                                {{item.date | date:'dd-MM-yyyy hh:mm'}}</small>\r\n                        </div>\r\n                        <span style=\"font-weight: 400;\">{{item.description}}</span>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- Report Modal -->\r\n<ng-template #content let-c=\"close\" let-d=\"dismiss\">\r\n    <div class=\"modal-header text-light bg-dark\">\r\n        <h4 class=\"modal-title\" id=\"modal-basic-title\">Report {{userInfo.firstName}} !</h4>\r\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"d('Cross click')\">\r\n            <span aria-hidden=\"true\" style=\"color:white;\">&times;</span>\r\n        </button>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <input type=\"text\" class=\"form-control\" #title placeholder=\"Title\" required>\r\n        <br />\r\n        <input type=\"text\" class=\"form-control\" #desc placeholder=\"Description\" required>\r\n        <br />\r\n        <div class=\"custom-file\">\r\n            <input type=\"file\" class=\"custom-file-input\" id=\"inputGroupFile01\" (change)=\"uploadReportImage($event)\">\r\n            <label class=\"custom-file-label\" for=\"inputGroupFile01\">{{imageReStatus}}</label>\r\n            <div *ngIf=\"uploaded\" class=\"mt-1\" style=\"font-size: small;\">\r\n                <b *ngIf=\"uploaded=='Image Uploaded'\">&#10003;</b> {{ uploaded }}\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-outline-dark\"\r\n            (click)=\"c('Save click');reportUser(title.value,desc.value)\">Report</button>\r\n    </div>\r\n</ng-template>\r\n<!-- End Modal -->\r\n\r\n\r\n<!-- Followers Modal -->\r\n<ng-template #followersModal let-c=\"close\" let-d=\"dismiss\">\r\n    <div class=\"modal-header text-light bg-dark\">\r\n        <h4 class=\"modal-title\" id=\"modal-basic-title\">All Followers :</h4>\r\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"d('Cross click')\">\r\n            <span aria-hidden=\"true\" style=\"color:white;\">&times;</span>\r\n        </button>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div *ngFor=\"let follower of followersList;\">\r\n            <div class=\"row\">\r\n            <img class=\" padding-0\" [src]=\"follower.picURL\"\r\n                style=\"width: 50px;float: left;border-radius: 50%;height: 50px;margin-left: 8px;cursor: pointer;\"\r\n                [routerLink]=\"'/users/profile/'+follower.userid\" routerLinkActive=\"active\">\r\n                \r\n            <span class=\" padding-0\" style=\"font-size: 20px;margin-top: 13px;margin-left: 5px;cursor: pointer;\"\r\n            [routerLink]=\"'/users/profile/'+follower.userid\" routerLinkActive=\"active\">{{follower.name}}</span>\r\n            </div>\r\n            <hr style=\"margin-top: 10px;\" *ngIf=\"followersList.length>1\"/>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<!-- End Modal -->\r\n\r\n<!-- Following Modal -->\r\n<ng-template #followingModal let-c=\"close\" let-d=\"dismiss\">\r\n    <div class=\"modal-header text-light bg-dark\">\r\n        <h4 class=\"modal-title\" id=\"modal-basic-title\">Following :</h4>\r\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"d('Cross click')\">\r\n            <span aria-hidden=\"true\"  style=\"color:white;\">&times;</span>\r\n        </button>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div *ngFor=\"let following of followingList;\" style=\"margin-bottom: 10px;\">\r\n            <div class=\"row\">\r\n            <img class=\"padding-0\" [src]=\"following.picURL\"\r\n                style=\"width: 50px;float: left;border-radius: 50%;height: 50px;margin-left: 8px;cursor: pointer;\"\r\n                [routerLink]=\"'/users/profile/'+following.userid\" routerLinkActive=\"active\">\r\n\r\n            <div class=\"padding-0\" style=\"font-size: 20px;margin-top: 13px;margin-left: 5px;cursor: pointer;\"\r\n            [routerLink]=\"'/users/profile/'+following.userid\" routerLinkActive=\"active\"> {{following.name}}</div>\r\n            </div>\r\n            <hr style=\"margin-top: 10px;\" *ngIf=\"followingList.length>1\"/>\r\n        </div>\r\n        \r\n    </div>\r\n</ng-template>\r\n<!-- End Modal -->","import { Component, OnInit } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { FireService } from 'src/app/services/fire.service';\r\n\r\n@Component({\r\n  selector: 'app-notofication',\r\n  templateUrl: './notofication.component.html',\r\n  styleUrls: ['./notofication.component.scss']\r\n})\r\nexport class NotoficationComponent implements OnInit {\r\n  notoficationArr: any[] = [];\r\n  user: any = JSON.parse(localStorage.getItem('userdata')!)\r\n\r\n  constructor(private FireService: FireService, private firestore: AngularFirestore\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    //   this.FireService.getCollection(\"Users\").subscribe((res) => {\r\n    //     console.log(res);\r\n    //     this.notoficationArr = res.map((user) => {\r\n    //       return user.notifications\r\n    //     })\r\n    //     console.log(this.notoficationArr)\r\n\r\n    //   })\r\n\r\n    // }\r\n\r\n    this.firestore.collection('Users').doc(this.user.id).collection('notifications').valueChanges().subscribe((res) => {\r\n      this.notoficationArr = res;\r\n      console.log(res)\r\n    })\r\n  }\r\n\r\n async removeN(id: string) {\r\n   await this.firestore.collection('Users').doc(this.user.id).collection('notifications').doc(id).update({ seen: true });\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n","<app-header></app-header>\r\n\r\n<div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n        <app-sidebar></app-sidebar>\r\n        <div style=\"width: 80%;\" class=\"col-xs-9 col-sm-9 col-md-7 col-lg-8 my-2 mx-auto\">\r\n            <div class=\"row mx-auto my-2\">\r\n                <div id=\"writePst\">\r\n                    <div class=\"firstRow\">\r\n                        <img [src]=\"user.picURL\">\r\n                        <input *ngIf=\"urls.length===0||urlsVideo.length===0\" type=\"text\" [(ngModel)]=\"postDesc\" [placeholder]=\"greating\" />\r\n                        <div class=\"p-2 ny-3\" *ngFor=\"let url of urls\">\r\n                            <audio controls=\"\" *ngIf=\"url\"> \r\n                                <source [src]=\"sanitize(url)\" type=\"audio/wav\">\r\n                            </audio>\r\n                        </div>\r\n                        <div class=\"container ny-3\" *ngFor=\"let url of urlsVideo\">\r\n                            <video controls=\"\" *ngIf=\"url\"> \r\n                                <source [src]=\"sanitize(url)\" type=\"video/mp4\">\r\n                            </video>\r\n                        </div>\r\n                    </div>\r\n                    <hr>\r\n                    <div class=\"secondRow\">\r\n                        <div class=\"live\">\r\n                            \r\n                            <!-- Audio recorder html -->\r\n                            <div style=\"display: inline-block;background-color: transparent;\">\r\n                               <button *ngIf=\"!isRecording\" style=\"display: inline-block;background-color: transparent;border: none;\" (click)=\"startRecording()\"><i [ngStyle]=\"{'color': user.favColor}\" class=\"fas fa-microphone-alt\"></i></button>\r\n                               <button *ngIf=\"isRecording\" style=\"display: inline-block;background-color: transparent;border: none;\" (click)=\"stopRecording()\"><i [ngStyle]=\"{'color': red}\" class=\"fas fa-microphone-alt\"></i></button>\r\n                            </div>\r\n                            <!-- startVideoRecording -->\r\n                            <div style=\"display: inline-block;background-color: transparent;\">\r\n                               <button *ngIf=\"!isRecordingVideo\" style=\"display: inline-block;background-color: transparent;border: none;\" (click)=\"startVideoRecording()\"><i [ngStyle]=\"{'color': user.favColor}\" class=\"fas fa-video\" ></i></button>\r\n                               <button *ngIf=\"isRecordingVideo\" style=\"display: inline-block;background-color: transparent;border: none;\" (click)=\"stopRecordingVideo()\"><i [ngStyle]=\"{'color': red}\" class=\"fas fa-video\"></i></button>\r\n                            </div>\r\n                            <!-- <i [ngStyle]=\"{'color': user.favColor}\" class=\"fas fa-paperclip\"></i> -->\r\n                            \r\n                            <div class=\"dropdown \" style=\"float: right\">\r\n                    <button class=\"btn dropdown-toggle float-right\" type=\"button\"\r\n                        data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><i\r\n                            class=\"fas fa-paperclip\"  [ngStyle]=\"{'color': this.user.favColor}\"></i>\r\n                    </button>\r\n                    <ul class=\"dropdown-menu\" role=\"menu\">\r\n                        <li role=\"presentation\" style=\"padding-left:9px;\">\r\n                            <a class=\"custom-file\" role=\"menuitem\" tabindex=\"-1\">\r\n                                <input type=\"file\" (change)=\"uploadFile($event,'image')\" class=\"custom-file-input\"\r\n                                    style=\"width:100%;\" />\r\n                                    <label class=\"custom-file-label\" for=\"validatedCustomFile\">\r\n                                    <i class=\"fas fa-image\" [ngStyle]=\"{'color': user.favColor}\" style=\"font-size: 15px\"></i></label>\r\n                            </a> \r\n                        </li>\r\n                        <li role=\"presentation\" style=\"padding-left:9px;\">\r\n                            <a class=\"custom-file\" role=\"menuitem\" tabindex=\"-1\">\r\n                                <input type=\"file\" (change)=\"uploadFile($event,'audio')\" class=\"custom-file-input\"\r\n                                    style=\"width:100%;\" />\r\n                                    <label class=\"custom-file-label\" for=\"validatedCustomFile\">\r\n                                    <i class=\"fas fa-microphone\" [ngStyle]=\"{'color': user.favColor}\" style=\"font-size: 15px\"></i></label>\r\n                            </a> \r\n                        </li>\r\n                        <li role=\"presentation\" style=\"padding-left:9px;\">\r\n                            <a class=\"custom-file\" role=\"menuitem\" tabindex=\"-1\">\r\n                                <input type=\"file\" (change)=\"uploadFile($event,'video')\" class=\"custom-file-input\"\r\n                                    style=\"width:100%;\" />\r\n                                    <label class=\"custom-file-label\" for=\"validatedCustomFile\">\r\n                                    <i class=\"fas fa-video\" [ngStyle]=\"{'color': user.favColor}\" style=\"font-size: 15px\"></i></label>\r\n                            </a> \r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                            <input [ngStyle]=\"{'background-color': user.favColor}\" (click)=\"addPost(postDesc,urls,urlsVideo)\" class=\"postButt col-12\" type=\"button\" value=\"Post\">\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div class=\"Post\" id=\"post1\"  *ngFor=\"let post of postList;let i=index\">\r\n                <div class=\"dropdown \" style=\"float: right\">\r\n                    <button class=\"btn dropdown-toggle points\" id=\"menu1\" type=\"button\"\r\n                        data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><i\r\n                            class=\"fas fa-ellipsis-h\"  [ngStyle]=\"{'color': this.user.favColor}\"></i>\r\n                    </button>\r\n                    <ul class=\"dropdown-menu\" role=\"menu\">\r\n                        <li role=\"presentation\" style=\"padding-left:9px;\">\r\n                            <button (click)=\"bookmarkpost(post)\" style=\"color: black;background-color: transparent;border: none;cursor: pointer;\">\r\n                                <i class=\"fas fa-bookmark\"\r\n                                [ngStyle]=\"{'color': user.favColor}\"\r\n                                    style=\"font-size: 16px;margin-right: 5px;\"></i>\r\n                                Bookmark post</button>\r\n                        </li>\r\n                        <li *ngIf=\"post.owner.id == user.id\" role=\"presentation\" style=\"padding-left:9px;\">\r\n                            <button (click)=\"deletepost(post)\" style=\"color: black;background-color: transparent;border: none;cursor: pointer;\">\r\n                                <i class=\"fas fa-recycle\"\r\n                                [ngStyle]=\"{'color': user.favColor}\"\r\n                                    style=\"font-size: 16px;margin-right: 5px;\"></i>\r\n                                Delete post</button>\r\n                        </li>\r\n\r\n                    </ul>\r\n                </div>\r\n                <div class=\"poster\">\r\n                    <img [src]=\"post.owner.picURL\" [routerLink]=\"'/users/profile/'+post.owner.id\">\r\n                    <div id=\"posterName\" [routerLink]=\"'/users/profile/'+post.owner.id\">{{post.owner.name}}</div>\r\n                    <div id=\"time\">{{post.date.seconds * 1000 | date:'dd-MM-yyyy HH-mm'}} <i class=\"fas fa-globe-africa\"></i></div>\r\n                </div>\r\n\r\n                <span style=\"padding: 2%;\" *ngIf=\"post.description\">{{post.description}}</span>\r\n                <!-- <span style=\"padding: 2%;\" *ngIf=\"post.image.length>0\"><img *ngFor=\"let item of post.image;\" [src]=\"item.\" class=\"img-fluid ${3|rounded-top,rounded-right,rounded-bottom,rounded-left,rounded-circle,|}\" alt=\"\"></span> -->\r\n                <div class=\"mx-auto col-6\">\r\n                    <img [src]=\"post.image\" *ngIf=\"post.image!=false\" style=\"height: 100%; width: 100%; object-fit: contain\" >\r\n                </div>\r\n                <span *ngIf=\"post.audio\">\r\n                    <div class=\"container-audio\">\r\n                        <audio controls  >\r\n                            <source [src]=\"sanitize(post.audio)\" type=\"audio/ogg\">\r\n                            Your browser dose not Support the audio Tag\r\n                        </audio>\r\n                    </div>\r\n                </span>\r\n\r\n                <span *ngIf=\"post.video\">\r\n                    <div class=\"col-6 ny-3 mx-auto\" >\r\n                            <video style=\"height: 100%; width: 100%; object-fit: contain\" controls> \r\n                                <source [src]=\"sanitize(post.video)\" type=\"video/mp4\">\r\n                            </video>\r\n                        </div>\r\n                </span>\r\n\r\n                <hr style=\"margin-top: 15px;\">\r\n                <div class=\"lastRowPost\">\r\n                    <div id=\"like\" (click)=\"addLike(post)\">\r\n                        <i class=\"far fa-thumbs-up\" id=\"likeIcon\"></i>\r\n                        <span id=\"likeCont\">\r\n                            Like <span class=\"badge badge-pill badge-light\">{{LikesList[i].length}}</span>\r\n                        </span>\r\n                    </div>\r\n                    <div id=\"comment\" >\r\n                        <i class=\"fas fa-microphone-alt\"></i>\r\n                        <span id=\"commentCont\">\r\n                            Voice\r\n                        </span>\r\n                    </div>\r\n                    <div id=\"comment\" (click)=\"addComment(post,i)\">\r\n                        <i class=\"far fa-comment-alt\" id=\"commentIcon\"></i>\r\n                        <span id=\"commentCont\">\r\n                             Comment <span class=\"badge badge-pill badge-light\">{{commentsList[i].length}}</span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div id=\"writecomnt\">\r\n                    <hr style=\"margin-top: 55px;margin-bottom: 10px\">\r\n                    <div class=\"firstRow\">\r\n                        <img [src]=\"user.picURL\">\r\n                        <input [(ngModel)]=\"postcomfields[i]\" type=\"text\" placeholder=\"Write a comment...\" class=\"cmntInput\" />\r\n                    </div>\r\n\r\n                </div>\r\n\r\n             <div  *ngFor=\"let item of commentsList[i]\" class=\"my-2 mx-3 mt-3\" style=\"width: 70%;margin-left: 3.5%;\">\t             \r\n                        <img style=\"width: 6%;height: 6%;float: left;border-radius: 50%;\" [src]=\"item.writer.picURL\"> \t                       \r\n                        <div class=\"pl-2\" style=\"background-color:#F0F2F5;border-radius: 10px;margin-left: 5.5%;\">\r\n                        <div><small id=\"posterName\">{{item.writer.name}}</small>\r\n                            <small style=\"display: block;font-size: 10px;\">\r\n                                {{item.date | date:'dd-MM-yyyy hh:mm'}}</small>\r\n                        </div>\r\n                        <span style=\"font-weight: 400;\">{{item.description}}</span>\r\n                    </div>                        \r\n              </div>\r\n\r\n            </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>"," \r\n                                <div  *ngFor=\"let item of userArr\"class=\"post\">\r\n                                    <div class=\"poster\">\r\n                                        <img src=\"avatar.png\">\r\n                                        <div id=\"posterName\">\"{{userArr.firstName}}+{{userArr.secondName}}\"</div>\r\n                                        <div id=\"time\">2hr . <i class=\"fas fa-globe-africa\"></i></div>\r\n                                    </div>\r\n        \r\n                                    <span> Lorem ipsum dolor sit, amet consectetur adipisicing elit. Sit quibusda\r\n                                        m non quia? Laudantium molestias nulla asperiores maiores aliquam, reprehe\r\n                                        nderit unde, repellat sint, temporibus commodi placeat sit odio possimus ex\r\n                                        plicabo nostrum?</span>\r\n        \r\n        \r\n                                    <hr style=\"margin-top: 15px;\">\r\n                                    <div class=\"lastRowPost\">\r\n                                        <div id=\"like\" >\r\n                                            <i class=\"far fa-thumbs-up\" id=\"likeIcon\"></i>\r\n                                            <span id=\"likeCont\">\r\n                                                Like\r\n                                            </span>\r\n                                        </div>\r\n                                        <div id=\"comment\">\r\n                                            <i class=\"fas fa-microphone-alt\"></i>\r\n                                            <span id=\"commentCont\">\r\n                                                Voice\r\n                                            </span>\r\n                                        </div>\r\n                                        <div id=\"comment\" >\r\n                                            <i class=\"far fa-comment-alt\" id=\"commentIcon\"></i>\r\n                                            <span id=\"commentCont\">\r\n                                                Comment\r\n                                            </span>\r\n                                        </div>\r\n                                       \r\n                                    </div>\r\n        \r\n        \r\n                                    <div id=\"writecomnt\">\r\n                                        <hr style=\"margin-top: 55px;margin-bottom: 10px\">\r\n                                        <div class=\"firstRow\">\r\n                                            <img src=\"avatar.png\">\r\n                                            <input type=\"text\" placeholder=\"Write a comment...\" id=\"cmntInput\" />\r\n                                        </div>\r\n        \r\n                                    </div>\r\n        \r\n                                </div>\r\n\r\n                                \r\n                                ","<app-header></app-header>\r\n\r\n<div id=\"sidebarMenu\" class=\"container-fluid \">\r\n    <div class=\"row\">\r\n        <app-sidebar></app-sidebar>\r\n        <div class=\"col-md-4 col-xl-3 chat \">\r\n            <div class=\"card mb-sm-3 mb-md-0 contacts_card \" [ngClass]=\"(user.favMode=='dark')?'darkCard':'bg-dark'\">\r\n                <div class=\"  card-header\">\r\n                    <div class=\"input-group\">\r\n                        <input type=\"text\" placeholder=\"Search...\" name=\"\" class=\"form-control search\">\r\n                        <div class=\"input-group-prepend\">\r\n                            <span class=\"input-group-text search_btn\"><i class=\"fas fa-search\"></i></span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"chatFlag\" class=\" cardCont card-body contacts_body\">\r\n                    <ul class=\"contacts\">\r\n                     <li *ngFor=\"let person of persons\"> \r\n                        <div class=\"d-flex bd-highlight\">\r\n                            <div class=\"img_cont\">\r\n                                <img  [src]=\"person.picURL\" class=\"rounded-circle user_img\">\r\n                                <span class=\"online_icon\"></span>\r\n                            </div>\r\n                            <div class=\"user_info\">\r\n                                <span>{{person.firstName}}</span>\r\n                                <div *ngIf=\"chats[0].messages[chats[0].messages.length - 1].sender=== user.id; else person2Name\">\r\n                                    <p>{{user.firstName}}: {{chats[0].messages[chats[0].messages.length - 1].description}}</p>\r\n                                </div>\r\n                                <ng-template #person2Name>\r\n                                    <p>{{person.firstName}}: {{chats[0].messages[chats[0].messages.length - 1].description}}</p>\r\n                                </ng-template>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n\r\n                    </ul> \r\n                </div>\r\n                <div class=\"card-footer\" [ngClass]=\"(user.favMode=='dark')?'darkCard':'bg-dark'\"></div>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-md-4 col-xl-6 chat\" >\r\n            <div class=\"card\" [ngClass]=\"(user.favMode=='dark')?'darkCard':'bg-dark'\">\r\n                \r\n                <div class=\"card-header  msg_head\" *ngIf=\"persons[0]\">\r\n                    <div class=\"d-flex bd-highlight\">\r\n                        <div class=\"img_cont\">\r\n                            <img [src]=\"persons[0].picURL\" class=\"rounded-circle user_img\">\r\n                            <span class=\"online_icon\"></span>\r\n                        </div>\r\n                        <div class=\"user_info\">\r\n                            <span>Chat with {{persons[0].firstName}}</span>\r\n                            <p>{{chats[0].messages.length}} Messages</p>\r\n                        </div>\r\n                        <!-- <div class=\"video_cam\">\r\n                            <span><i class=\"fas fa-video\"></i></span>\r\n                            <span><i class=\"fas fa-phone\"></i></span>\r\n                        </div> -->\r\n                    </div>\r\n                    <span id=\"action_menu_btn\" (click)=\"toggleActionMenue()\"><i class=\"fas fa-ellipsis-v\"></i></span>\r\n                    <div  [class.action_menu]=\"classApplied\">\r\n                        <ul>\r\n                            <li style=\"color:white;\" [routerLink]=\"'/users/profile/'+persons[0].id\"><i class=\"fas fa-user-circle\"></i> View profile</li>\r\n                            <li style=\"color:white;\"><i class=\"fas fa-ban\"></i> Block</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div *ngIf=\"msgsFlag\" class=\"card-body msg_card_body\"  [ngStyle]=\"{'background-image': value ? getUrlW2() : getUrl()}\">\r\n           \r\n                    <div *ngFor=\"let msg of chats[0].messages\" >\r\n                        <div *ngIf=\"(msg.sender === user.id); else person2\">\r\n                            <div class=\"d-flex mb-4 justify-content-end\">  \r\n                                \r\n                                    <div class=\"msg_cotainer\">\r\n                                        {{msg.description}}\r\n                                        <span class=\"msg_time\">{{msg.date.seconds * 1000 | date:'dd-MM-yyyy hh:mm'}}</span>\r\n                                    </div>\r\n                            </div>\r\n                        </div>\r\n                        <ng-template #person2>\r\n                            <!-- *ngIf=\"persons[0].length\" -->\r\n                            <div  class=\"d-flex mb-4 justify-content-start\">  \r\n                                <div  class=\"img_cont_msg\">\r\n                                    <img [src]=\"persons[0].picURL\" class=\"rounded-circle user_img_msg\">\r\n                                </div>\r\n                                    <div class=\"msg_cotainer_send\" [ngStyle]=\"{'background-color':user.favColor}\">\r\n                                        {{msg.description}}\r\n                                        <span class=\"msg_time_send\">{{msg.date.seconds * 1000 | date:'dd-MM-yyyy hh:mm'}}</span>\r\n                                    </div>\r\n                            </div>\r\n                        </ng-template>\r\n\r\n                        \r\n                    </div>\r\n                        <!-- <div *ngIf=\"(msg.sender !== 'Eman')\" class=\"img_cont_msg\">\r\n                            <img [src]=\"user.picURL\" class=\"rounded-circle user_img_msg\">\r\n                        </div>\r\n                        <div  [ngClass]=\"(msg.sender !== 'Fatma')? msg_cotainer:msg_cotainer_send\">\r\n                            \r\n                            {{msg.description}}\r\n                            <span [ngClass]=\"(msg.sender !== 'Fatma')? msg_time:msg_time_send\">{{msg.date.toString()}}</span>\r\n                        </div>\r\n                       \r\n                    </div> -->\r\n                   \r\n                    \r\n                </div>\r\n                <div class=\"card-footer\" [ngClass]=\"(user.favMode=='dark')?'darkCard':'bg-dark'\">\r\n                    <div class=\"input-group\">\r\n                        <div class=\"input-group-append\">\r\n                            <span class=\"input-group-text attach_btn\"><i class=\"fas fa-paperclip\"></i></span>\r\n                        </div>\r\n                        <textarea name=\"\" class=\"form-control type_msg\" [(ngModel)]=\"newMsg\" placeholder=\"Type your message...\"></textarea>\r\n                        <div class=\"input-group-append\" (click)=\"addMsg()\">\r\n                            <span class=\"input-group-text send_btn\"><i class=\"fas fa-location-arrow\"></i></span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { Router } from '@angular/router';\r\nimport { Post } from 'src/app/models/post.model';\r\nimport { FireService } from 'src/app/services/fire.service';\r\nimport { PostsService } from 'src/app/services/posts.service';\r\nimport { Subscription } from 'rxjs';\r\nimport * as RecordRTC from 'recordrtc';\r\nimport { DomSanitizer } from \"@angular/platform-browser\";\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\n// import { Console } from 'console';\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.scss']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  isRecordingVideo: boolean = false;\r\n  urlsVideo: any[] = [];\r\n  picURL: any;\r\n\r\n  styleObject(): Object {\r\n    return { color: this.user.favColor }\r\n  }\r\n  isRecording = false; //audio recorder item\r\n  private record: any; //audio recorder item\r\n  public urls: any[] = []; //audio recorder audios\r\n  private error: any; //audio recorder error\r\n  subscribtion: Subscription[] = [];\r\n  postList: any[] = [];\r\n  LikesList: any[] = [];\r\n  commentsList: any[] = [];\r\n  public post: Post = new Post();\r\n  postMind: string = \"\";\r\n  postDesc: string = \"\";\r\n  user: any;\r\n  postcomfields: string[] = [];\r\n  greating: string;\r\n  constructor(private fireService: FireService, private postsService: PostsService, private firestorage: AngularFireStorage, private firestore: AngularFirestore, private route: Router, private domSanitizer: DomSanitizer) {\r\n    this.user = JSON.parse(localStorage.getItem('userdata')!);\r\n    this.greating = \"What's up, \" + this.user.firstName + \" \" + this.user.secondName + \"?\";\r\n    this.subscribtion.push(this.fireService.getCollection('post').subscribe((res) => {\r\n      this.postList = res;\r\n      // console.log(res);\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getComments(this.postList[index].id)\r\n      }\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getLikes(this.postList[index].id)\r\n      }\r\n    }))\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (!localStorage.getItem('userdata')) {\r\n      this.route.navigate(['/landing'])\r\n    }\r\n    document.querySelector('.modal-backdrop')!.remove();\r\n    this.postList = []\r\n    this.subscribtion.push(this.fireService.getCollection('post').subscribe((res) => {\r\n      this.postList = res;\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getComments(this.postList[index].id)\r\n      }\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getLikes(this.postList[index].id)\r\n      }\r\n    }))\r\n\r\n    // console.log(`Likes ${this.LikesList}`)\r\n    // console.log(`Comments ${this.commentsList}`)\r\n  }\r\n\r\n  async notifyUser(usrId: string, msg: string) {\r\n    let id = this.firestore.createId();\r\n    if (this.user.id !== usrId)\r\n      await this.firestore.collection(`Users`).doc(usrId).collection('notifications').doc(id).set({\r\n        id: id,\r\n        date: new Date().toISOString(),\r\n        description: msg,\r\n        seen: false,\r\n        maker: {\r\n          id: this.user.id,\r\n          name: this.user.firstName + \" \" + this.user.secondName,\r\n          picURL: this.user.picURL\r\n        }\r\n      })\r\n  }\r\n\r\n  addPost(desc: string, audio: any = null, video: any = null, images: any[] = []) {\r\n    this.post.description = desc;\r\n    this.post.owner.id = this.user.id;\r\n    this.post.owner.name = this.user.firstName + \" \" + this.user.secondName;\r\n    this.post.owner.picURL = this.user.picURL;\r\n    this.post.id = this.firestore.createId();\r\n    this.postsService.addPost(this.post).then(() => {\r\n      console.log(this.post)\r\n    });\r\n    this.ngOnInit()\r\n    this.postDesc = \"\";\r\n    this.post = new Post();\r\n    this.urls = []\r\n    this.urlsVideo = []\r\n  }\r\n\r\n  bookmarkpost(post: any) {\r\n    this.firestore.collection(\"Users\").doc(this.user.id).collection(\"bookmarks\").add({\r\n      post: this.firestore.doc(`post/${post.id}`).ref\r\n    })\r\n    alert(`post added`)\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscribtion.forEach(element => {\r\n      element.unsubscribe();\r\n    })\r\n  }\r\n\r\n  addLike(postid: any) {\r\n    this.firestore.collection('post').doc(postid.id).collection(\"like\").add({\r\n      userid: this.user.id\r\n    })\r\n    this.notifyUser(postid.owner.id, `${this.user.firstName} liked on your post `)\r\n  }\r\n\r\n  addComment(postid: any, index: number) {\r\n    this.firestore.collection(`post`).doc(postid.id).collection('comment').add({\r\n      writer: {\r\n        id: this.user.id,\r\n        name: this.user.firstName + \" \" + this.user.secondName,\r\n        picURL: this.user.picURL\r\n      },\r\n      description: this.postcomfields[index],\r\n      date: new Date().toISOString(),\r\n    })\r\n    this.notifyUser(postid.owner.id, `${this.user.firstName} commented on your post \"${this.postcomfields[index]}\"`)\r\n    this.postcomfields[index] = \"\"\r\n  }\r\n  async getComments(postid: string) {\r\n    this.commentsList = []\r\n    this.subscribtion.push(await this.firestore.collection('post').doc(postid).collection('comment').valueChanges().subscribe((data) => {\r\n      this.commentsList.push(data);\r\n      // console.log(data)\r\n    }))\r\n  }\r\n\r\n  deletepost(post: any) {\r\n    this.firestore.collection('post').doc(post.id).delete();\r\n  }\r\n\r\n  async getLikes(postid: string) {\r\n    this.LikesList = []\r\n    this.subscribtion.push(await this.firestore.collection('post').doc(postid).collection('like').valueChanges().subscribe((data) => {\r\n      this.LikesList.push(data)\r\n      // console.log(data)\r\n    }))\r\n  }\r\n\r\n\r\n  startRecording() {\r\n    this.isRecording = true;\r\n    let mediaConstraints = {\r\n      video: false,\r\n      audio: true\r\n    };\r\n    navigator.mediaDevices\r\n      .getUserMedia(mediaConstraints)\r\n      .then(this.successCallback.bind(this), this.errorCallback.bind(this));\r\n  }\r\n\r\n\r\n  startVideoRecording() {\r\n    this.isRecordingVideo = true;\r\n    let mediaConstraints = {\r\n      video: true,\r\n      audio: true\r\n    };\r\n    navigator.mediaDevices\r\n      .getUserMedia(mediaConstraints)\r\n      .then(this.successCallbackVideo.bind(this), this.errorCallback.bind(this));\r\n  }\r\n\r\n  successCallbackVideo(stream: any) {\r\n    var options = {\r\n      mimeType: \"video/mp4\",\r\n    };\r\n\r\n    //Start Actuall Recording\r\n    var MediaStreamRecorder = RecordRTC.MediaStreamRecorder;\r\n    this.record = new MediaStreamRecorder(stream, options);\r\n    this.record.record();\r\n  }\r\n\r\n  successCallback(stream: any) {\r\n    var options = {\r\n      mimeType: \"audio/wav\",\r\n      numberOfAudioChannels: 1\r\n    };\r\n\r\n    //Start Actuall Recording\r\n    var StereoAudioRecorder = RecordRTC.StereoAudioRecorder;\r\n    this.record = new StereoAudioRecorder(stream, options);\r\n    this.record.record();\r\n  }\r\n\r\n  stopRecording() {\r\n    this.isRecording = false;\r\n    this.record.stop(this.processRecording.bind(this));\r\n  }\r\n\r\n  stopRecordingVideo() {\r\n    this.isRecordingVideo = false;\r\n    this.record.stop(this.processRecordingVideo.bind(this));\r\n  }\r\n\r\n  processRecording(blob: any) {\r\n    this.urls.push(URL.createObjectURL(blob)!);\r\n  }\r\n\r\n  processRecordingVideo(blob: any) {\r\n    this.urlsVideo.push(URL.createObjectURL(blob)!);\r\n  }\r\n\r\n  sanitize(url: string) {\r\n    // console.log(url)\r\n    return this.domSanitizer.bypassSecurityTrustUrl(url);\r\n  }\r\n\r\n  errorCallback(error: any) {\r\n    this.error = 'Can not play audio in your browser';\r\n  }\r\n\r\n  async uploadFile(event: any, type: string) {\r\n    var filePath: any;\r\n    const file = event.target.files[0];\r\n    const id = this.firestore.createId()\r\n    if (type == \"image\")\r\n      filePath = '/post/images/' + id;\r\n    else if (type == \"audio\")\r\n      filePath = '/post/audio/' + id;\r\n    else if (type == \"video\")\r\n      filePath = '/post/video/' + id;\r\n    await this.firestorage.upload(filePath, file);\r\n    const ref = this.firestorage.refFromURL(\"gs://sout-2d0f6.appspot.com\" + filePath).getDownloadURL().toPromise().then((url => {\r\n      console.log(url);\r\n      if (type == \"image\") {\r\n        this.post.image = url\r\n      } else if (type == \"audio\") {\r\n        this.post.audio = url\r\n      } else if (type == \"video\") {\r\n        this.post.video = url\r\n      }\r\n      console.log(url)\r\n    }));\r\n    alert('upload done')\r\n    // });\r\n  }\r\n}\r\n","<app-header></app-header>\r\n<div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n        <div class=\"col-3\">\r\n            <app-sidebar></app-sidebar>\r\n        </div>\r\n        <div class=\"col-9\">\r\n            <div class=\"col-10 col-md-9\">\r\n                <h1 class=\"ml-3 mb-4\" id=\"discover\">Discover</h1>\r\n\r\n                <ul class=\"nav  ml-3 nav2 nav-tabs\" id=\"nav-tab\" role=\"tablist\"\r\n                    style=\"background-color: #F5F7F8;border-bottom: 2px solid;border-bottom-color:#d8352b;border-radius: 8px;box-shadow: 0px 0.5px 5px grey; width: 100%;margin-bottom: 2%;height: 5%;font-size: 17px;\">\r\n\r\n                    <li class=\"nav-item col padding-0\" (click)=\"getAllPosts();\">\r\n                        <a class=\"nav-link active\" data-toggle=\"tab\" aria-selected=\"true\" role=\"tab\"\r\n                            style=\"border-radius: 4px ;color: #d8352b;width: 100%;\">All</a>\r\n                    </li>\r\n\r\n                    <li class=\"nav-item col padding-0\" *ngFor=\"let talent of talentList\"\r\n                        (click)=\"getPostsByTalent(talent.id)\">\r\n                        <a class=\"nav-link\" data-toggle=\"tab\" aria-selected=\"false\" role=\"tab\"\r\n                            style=\"border-radius: 4px ;color: #d8352b;width: 100%;\">{{talent.name}}</a>\r\n                    </li>\r\n\r\n\r\n                </ul>\r\n\r\n                <!-- post -->\r\n\r\n                <div id=\"post1\" *ngFor=\"let post of postList ;let i = index;\" class=\"ml-3\">\r\n                    <!-- <div *ngFor=\"let user1 of users;\"> -->\r\n\r\n                    <div class=\"dropdown \" style=\"float: right\">\r\n                        <button class=\"btn dropdown-toggle points\" id=\"menu1\" type=\"button\" data-toggle=\"dropdown\"\r\n                            aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fas fa-ellipsis-h\"\r\n                                style=\"color: #d8352b;font-size: 16px\"></i>\r\n                        </button>\r\n                        <ul class=\"dropdown-menu\" role=\"menu\">\r\n                            <li role=\"presentation\" style=\"padding-left:9px;\">\r\n                                <button (click)=\"bookmarkpost(post)\" style=\"color: black;background-color: transparent;border: none;cursor: pointer;\">\r\n                                    <i class=\"fas fa-bookmark\"\r\n                                        style=\"font-size: 16px;color: #d8352b;margin-right: 5px;\"></i>\r\n                                    Bookmark Post</button>\r\n                            </li>\r\n                            <hr>\r\n                            <li role=\"presentation\" style=\"padding-left:7px;cursor: pointer;\">\r\n                                <a role=\"menuitem\" tabindex=\"-1\" (click)=\"open(content)\" style=\"color: black\">\r\n                                    <i class=\"fas fa-exclamation-triangle\"\r\n                                        style=\"font-size: 15px;color: #d8352b;margin-right: 5px;\"></i>\r\n                                    Report Post</a>\r\n\r\n                                <!-- Modal -->\r\n                                <ng-template #content let-c=\"close\" let-d=\"dismiss\">\r\n                                    <div class=\"modal-header text-light bg-dark\">\r\n                                        <h4 class=\"modal-title\" id=\"modal-basic-title\">Report Post !\r\n                                        </h4>\r\n                                        <button type=\"button\" class=\"close\" aria-label=\"Close\"\r\n                                            (click)=\"d('Cross click')\">\r\n                                            <span aria-hidden=\"true\" style=\"color:white;\">&times;</span>\r\n                                        </button>\r\n                                    </div>\r\n                                    <div class=\"modal-body\">\r\n                                        <input type=\"text\" class=\"form-control\" #title placeholder=\"Title\">\r\n                                        <br />\r\n                                        <input type=\"text\" class=\"form-control\" #desc placeholder=\"Description\">\r\n                                        <br />\r\n                                        <div class=\"custom-file\">\r\n                                            <input type=\"file\" class=\"custom-file-input\" id=\"inputGroupFile01\"\r\n                                                (change)=\"uploadReportImage($event)\">\r\n                                            <label class=\"custom-file-label\"\r\n                                                for=\"inputGroupFile01\">{{imageReStatus}}</label>\r\n                                            <div *ngIf=\"uploaded\" class=\"mt-1\" style=\"font-size: small;\">\r\n                                                <b *ngIf=\"uploaded=='Image Uploaded'\">&#10003;</b> {{ uploaded }}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"modal-footer\">\r\n                                        <button type=\"button\" class=\"btn btn-outline-dark\"\r\n                                            (click)=\"c('Save click');reportPost(title.value,desc.value,post.id)\">Report</button>\r\n                                    </div>\r\n                                </ng-template>\r\n                                <!-- End Modal -->\r\n                            </li>\r\n                            <!-- <hr>\r\n                            <li role=\"presentation\" style=\"padding-left:7px;cursor: pointer;\">\r\n                                <a style=\"color: black\">\r\n                                    <i class=\"fas fa-ban\" style=\"font-size: 15px;color: #d8352b;margin-right: 5px;\"></i>\r\n                                    Block</a>\r\n                            </li>\r\n                            <hr>\r\n                            <li role=\"presentation\" style=\"padding-left:7px;cursor: pointer;\">\r\n                                <a style=\"color: black\">\r\n                                    <i class=\"fas fa-volume-mute\"\r\n                                        style=\"font-size: 16px;color: #d8352b;margin-right: 5px;\"></i>\r\n                                    Mute</a>\r\n                            </li> -->\r\n                        </ul>\r\n                    </div>\r\n                    <div class=\"poster\">\r\n                        <img [src]=\"post.owner.picURL\" [routerLink]=\"'/users/profile/'+post.owner.id\"\r\n                            routerLinkActive=\"active\">\r\n                        <!-- <div id=\"posterName\" >{{getUserById(post.owner).firstName}}</div> -->\r\n                        <div id=\"posterName\" [routerLink]=\"'/users/profile/'+post.owner.id\" routerLinkActive=\"active\">\r\n                            {{post.owner.name}}\r\n                        </div>\r\n                        <div id=\"time\" cl>{{post.date.seconds * 1000 | date:'dd-MM-yyyy hh:mm'}} <i\r\n                                class=\"fas fa-globe-africa\"></i></div>\r\n                    </div>\r\n                    <span class=\"ml-2\">{{post.description}}</span>\r\n                    <br />\r\n                    <img [src]=\"post.image\" *ngIf=\"post.image\" style=\"width: 100%;\">\r\n                    <span *ngIf=\"post.audio\">\r\n                        <div class=\"container-audio\">\r\n                            <audio controls>\r\n                                <source [src]=\"post.audio\" type=\"audio/ogg\">\r\n                                Your browser dose not Support the audio Tag\r\n                            </audio>\r\n                        </div>\r\n                    </span>\r\n\r\n                    <hr style=\"margin-top: 15px;\">\r\n                    <div class=\"lastRowPost\">\r\n\r\n                        <div id=\"like\" (click)=\"addLike(post)\">\r\n\r\n                            <i class=\"far fa-thumbs-up\" id=\"likeIcon\"></i>\r\n                            <span id=\"likeCont\">\r\n                                Like <span class=\"badge badge-pill badge-light\">{{LikesList[i].length}}</span>\r\n                            </span>\r\n                        </div>\r\n                        <div id=\"comment\">\r\n                            <i class=\"fas fa-microphone-alt\"></i>\r\n                            <span id=\"commentCont\">\r\n                                Voice\r\n                            </span>\r\n                        </div>\r\n\r\n                        <div id=\"comment\" (click)=\"addComment(post,i)\">\r\n\r\n                            <i class=\"far fa-comment-alt\" id=\"commentIcon\"></i>\r\n                            <span id=\"commentCont\">\r\n                                Comment <span class=\"badge badge-pill badge-light\">{{commentsList[i].length}}</span>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <div id=\"writecomnt\">\r\n                        <hr style=\"margin-top: 55px;margin-bottom: 10px\">\r\n                        <div class=\"firstRow\">\r\n                            <img [src]=\"picURL\" [routerLink]=\"'/users/profile'\" routerLinkActive=\"active\"\r\n                                style=\"cursor: pointer;\">\r\n                            <input [(ngModel)]=\"postcomfields[i]\" type=\"text\" placeholder=\"Write a comment...\"\r\n                                id=\"cmntInput\" />\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div *ngFor=\"let item of commentsList[i]\" class=\"my-2 mx-3 mt-3\"\r\n                        style=\"width: 70%;margin-left: 3.5%;\">\r\n\r\n                        <img style=\"width: 6%;height: 6%;float: left;border-radius: 50%;\"\r\n                            [src]=\"user.id==item.writer.id?picURL:item.writer.picURL\" [routerLink]=\"'/users/profile/'+item.writer.id\" routerLinkActive=\"active\">\r\n\r\n                        <div class=\"pl-2\" style=\"background-color:#F0F2F5;border-radius: 10px;margin-left: 5.5%;\">\r\n                            <div><small id=\"posterName\" style=\"font-size:15px;\">{{item.writer.name}}</small>\r\n                                <small style=\"display: block;font-size: 10px;\">\r\n                                    {{item.date | date:'dd-MM-yyyy hh:mm'}}</small>\r\n                            </div>\r\n                            <span style=\"font-weight: 400;\">{{item.description}}</span>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- </div> -->\r\n                </div>\r\n                <br />\r\n\r\n                <!-- post -->\r\n\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Post } from 'src/app/models/post.model';\r\nimport { Talent } from 'src/app/models/talent.model';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { PostsService } from 'src/app/services/posts.service';\r\nimport { TalentService } from 'src/app/services/talent.service';\r\nimport { FireService } from 'src/app/services/fire.service';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { NgbModalConfig, NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { Report } from 'src/app/models/report.model';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { ModeService } from 'src/app/services/mode.service';\r\nimport { ISettingsData } from '../../viewModels/isettings-data';\r\n\r\n@Component({\r\n  selector: 'app-discover',\r\n  templateUrl: './discover.component.html',\r\n  styleUrls: ['./discover.component.scss']\r\n})\r\nexport class DiscoverComponent implements OnInit {\r\n  public user: User = new User();\r\n  talentList: Talent[] = [];\r\n  postList: Post[] = [];\r\n  userInfo: User = new User();\r\n  ownerId: string = \"\";\r\n  userList: User[] = [];\r\n  report: Report | any = new Report();\r\n  picURL: any;\r\n  coverPicURL: string = \"\";\r\n  id: string = \"\";\r\n  toggle: boolean = false;\r\n  postcomfields: string[] = [];\r\n  LikesList: any[] = [];\r\n  commentsList: any[] = [];\r\n  subscribtion: Subscription[] = [];\r\n  reportImageURL: string = \"\";\r\n  uploadPercent: Observable<number> | any;\r\n  downloadURL: Observable<string> | any;\r\n  uploaded: string = \"\";\r\n  imageReStatus: string = \"Choose Image\";\r\n  settingsData: ISettingsData = { privateAcc: false, favColor: '', favMode: '', oldPassword: '', deactive: false };\r\n\r\n  constructor(private talentService: TalentService, private route: Router, private postsService: PostsService\r\n    , private FireService: FireService\r\n    , config: NgbModalConfig, private modalService: NgbModal\r\n    , private firestore: AngularFirestore, private storage: AngularFireStorage, private modeService: ModeService) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.user = JSON.parse(localStorage.getItem('userdata')!)\r\n    if (this.user) {\r\n      this.picURL = this.user.picURL;\r\n      this.coverPicURL = this.user.coverPicURL;\r\n\r\n      this.settingsData.favMode = this.user.favMode;\r\n      if (this.settingsData.favMode === \"dark\") { this.modeService.OnDark(); this.settingsData.favMode = \"dark\"; }\r\n      else if (this.settingsData.favMode === \"light\") { this.modeService.defaultMode(); this.settingsData.favMode = \"light\"; }\r\n\r\n      this.getAllTalents();\r\n      this.getAllPosts();\r\n    }\r\n    else\r\n      this.route.navigate(['/landing'])\r\n  }\r\n\r\n  // OnDark() {\r\n  //   this.modeService.OnDarkFont( document.querySelectorAll(\"#discover\"));\r\n  //   this.settingsData.favMode = \"dark\";\r\n  // }\r\n  // defaultMode() {\r\n  //   this.settingsData.favMode = \"light\";\r\n  //   this.modeService.defaultModeFont( document.querySelectorAll(\"#discover\"));\r\n\r\n  // }\r\n  getAllTalents() {\r\n\r\n    this.talentService.getAllTalents().subscribe(res => {\r\n      this.talentList = res\r\n\r\n      console.log(this.talentList)\r\n    });\r\n\r\n  }\r\n\r\n\r\n  getPostsByTalent(id: string) {\r\n    this.postList = []\r\n    this.LikesList= []\r\n    this.commentsList=[]\r\n    this.postsService.getPostsOfTalent(id).subscribe(res => {\r\n      this.postList = res\r\n\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getComments(this.postList[index].id)\r\n      }\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getLikes(this.postList[index].id)\r\n      }\r\n\r\n      this.postList.forEach(p => {\r\n        this.getUserById(p.owner.id)\r\n      });\r\n      console.log(this.postList)\r\n    });\r\n\r\n  }\r\n\r\n  getAllPosts() {\r\n    this.postList = []\r\n    this.LikesList= []\r\n    this.commentsList=[]\r\n    this.FireService.getCollection(\"post/\").subscribe(res => {\r\n      this.postList = res\r\n\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getComments(this.postList[index].id)\r\n      }\r\n      for (let index = 0; index < this.postList.length; index++) {\r\n        this.getLikes(this.postList[index].id)\r\n      }\r\n\r\n      this.postList.forEach(p => {\r\n        this.getUserById(p.owner.id)\r\n      });\r\n\r\n    });\r\n    console.log(this.userList)\r\n  }\r\n\r\n  getUserById(id: string) {\r\n    this.userList = []\r\n    this.FireService.getDocument(\"Users/\" + id).subscribe(res => {\r\n      this.userList.push(res)\r\n    });\r\n  }\r\n\r\n  addLike(post: any) {\r\n    this.firestore.collection('post').doc(post.id).collection(\"like\").add({\r\n      userid: this.user.id\r\n    })\r\n    this.notifyUser(post.owner.id, `${this.user.firstName} liked on your post `)\r\n  }\r\n\r\n  addComment(post: any, index: number) {\r\n    this.firestore.collection(`post`).doc(post.id).collection('comment').add({\r\n      writer: {\r\n        id: this.user.id,\r\n        name: this.user.firstName + \" \" + this.user.secondName,\r\n        picURL: this.user.picURL\r\n      },\r\n      description: this.postcomfields[index],\r\n      date: new Date().toISOString(),\r\n    })\r\n    this.notifyUser(post.owner.id, `${this.user.firstName} commented on your post \"${this.postcomfields[index]}\"`)\r\n  }\r\n\r\n  async getComments(postid: string) {\r\n    this.subscribtion.push(await this.firestore.collection('post').doc(postid).collection('comment').valueChanges().subscribe((data) => {\r\n      this.commentsList.push(data);\r\n      console.log(data)\r\n    }))\r\n  }\r\n\r\n  async getLikes(postid: string) {\r\n    this.subscribtion.push(await this.firestore.collection('post').doc(postid).collection('like').valueChanges().subscribe((data) => {\r\n      this.LikesList.push(data)\r\n      console.log(data)\r\n    }))\r\n  }\r\n\r\n  async notifyUser(usrId: string, msg: string) {\r\n    let id = this.firestore.createId();\r\n    await this.firestore.collection(`Users`).doc(usrId).collection('notifications').doc(id).set({\r\n      id: id,\r\n      date: new Date().toISOString(),\r\n      description: msg,\r\n      maker: {\r\n        id: this.user.id,\r\n        name: this.user.firstName + \" \" + this.user.secondName,\r\n        picURL: this.user.picURL\r\n      }\r\n    })\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscribtion.forEach(element => {\r\n      element.unsubscribe();\r\n    })\r\n  }\r\n  \r\n  //************** For Report ********************\r\n  \r\n  uploadReportImage(event: any) {\r\n    var filePath: any;\r\n    const file = event.target.files[0];\r\n    var imageId = this.firestore.createId();\r\n\r\n    filePath = '/Reports/images/' + imageId;\r\n\r\n    const task = this.storage.upload(filePath, file);\r\n    const ref = this.storage.refFromURL(\"gs://sout-2d0f6.appspot.com\" + filePath);\r\n\r\n    this.imageReStatus = \"\"\r\n    this.uploaded = `Uploading..`\r\n\r\n    task.snapshotChanges().pipe(\r\n      finalize(() => {\r\n        this.uploaded = `Image Uploaded`;\r\n        this.imageReStatus = file.name\r\n\r\n        const downloadURL = ref.getDownloadURL();\r\n        downloadURL.subscribe(url => {\r\n          this.reportImageURL = url\r\n          console.log(this.reportImageURL)\r\n        })\r\n\r\n      })\r\n    )\r\n      .subscribe()\r\n\r\n  }\r\n\r\n  reportPost(title: string, des: string, postId: string) {\r\n\r\n    this.report.title = title;\r\n    this.report.description = des;\r\n    this.report.userId = this.user.id;\r\n    this.report.reportedId = postId;\r\n    this.report.type = \"post\";\r\n    this.report.id = this.firestore.createId();\r\n    this.report.image = this.reportImageURL;\r\n    this.FireService.setDocument(\"/Reports/\" + this.report.id, { ...this.report });\r\n  }\r\n\r\n  open(content: any) {\r\n    this.modalService.open(content);\r\n  }\r\n\r\n  bookmarkpost(post: any) {\r\n    this.firestore.collection(\"Users\").doc(this.user.id).collection(\"bookmarks\").add({\r\n      post: this.firestore.collection(\"post\").doc(post.id).ref,\r\n    })\r\n    alert(`post added`)\r\n  }\r\n\r\n}\r\n","<nav class=\"navbar navbar-dark bg-dark  justify-content-between px-5 sticky-top sticky-offset\">\r\n    <a [routerLink]=\"['/users/home']\"> <img src=\"../../../../assets/sout.jpeg\" class=\"mx-auto mx-sm-auto mx-lg-0 mx-xs-auto mx-xl-0\" style=\"width: 100px\"></a>\r\n    <form class=\"form-inline col-xs-12 col-sm-12 col-md-12 col-lg-3 col-xl-4\">\r\n        <div class=\"input-group col-xs-12 col-sm-12\">\r\n            <div class=\"input-group-prepend\">\r\n                <button type=\"button\" class=\"btn btn-light\" (click)=\"search(searchValue.value)\" id=\"basic-addon1\"><i class=\"fas fa-search\"></i></button>\r\n            </div>\r\n            <input type=\"text\" #searchValue class=\"form-control col-xl-12 col-lg-12 col-md-11 col-sm-11\" placeholder=\"Search\" aria-label=\"Search\" aria-describedby=\"basic-addon1\">\r\n            &nbsp;&nbsp;&nbsp;\r\n            <span><button title=\"Logout\" class=\"btn btn-outline-light\" [ngStyle]=\"{'background-color': usr.favColor}\" (click)=\"logout()\"><i  class=\"fas fa-door-open fa-1x\"></i></button></span>\r\n        </div>\r\n    </form>\r\n    \r\n</nav>","import { Component, OnInit } from '@angular/core';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { UserChatsService } from 'src/app/services/user-chats.service';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { FireService } from 'src/app/services/fire.service';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { Msg } from 'src/app/models/msg';\r\nimport { IChat } from 'src/app/models/ichat';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\n\r\nimport {formatDate } from '@angular/common';\r\nimport { map, timestamp } from 'rxjs/operators';\r\nimport { ModeService } from 'src/app/services/mode.service';\r\n@Component({\r\n  selector: 'app-chat',\r\n  templateUrl: './chat.component.html',\r\n  styleUrls: ['./chat.component.scss']\r\n})\r\nexport class ChatComponent implements OnInit {\r\n  classApplied:boolean = true;\r\n  user: User = new User();\r\n  user2: User = new User();\r\n  chats:any\r\n  chatFlag:boolean = false;\r\n  msgsFlag:boolean = false;\r\n  person2Data:[]=[]\r\n  persons:{}[]=[]\r\n  userChats:IChat[]=[]\r\n  start :string='';\r\n  newMsg:string='';\r\n  ordermsgs:string[]=[];\r\n  personName:string='';\r\n  personPic:string='';\r\n  msg:{}={sender:'',description:'',date:new Date(),}\r\n  private subscritionList:Subscription[]=[];\r\n  chatsUrl!: Observable<string | null>;\r\n  chatsUrlW!: Observable<string | null>;\r\n  chatsUrlW2!: Observable<string | null>;\r\n  value:boolean;\r\n  image:string='https://firebasestorage.googleapis.com/v0/b/sout-2d0f6.appspot.com/o/chats%2FchstBG2.jpg?alt=media&token=23f956ad-7b3e-4fae-b105-d538f865d930';\r\n  otherImage:string='https://firebasestorage.googleapis.com/v0/b/sout-2d0f6.appspot.com/o/chats%2FchatBGW2.jpg?alt=media&token=8566f008-6fd2-4ce6-831e-2f8b77ac19ca';\r\n  constructor(private modeService:ModeService, private storage: AngularFireStorage, private chatService: UserChatsService, private firestore:AngularFirestore) { \r\n    this.user = JSON.parse(localStorage.getItem('userdata')!);\r\n    const ref = this.storage.ref('chats/chstBG2.jpg');\r\n    const ref2 = this.storage.ref('chats/chatBGW.jpg');\r\n    const ref3 = this.storage.ref('chats/chatBGW2.jpg');\r\n     this.chatsUrl = ref.getDownloadURL();\r\n     this.chatsUrlW = ref2.getDownloadURL();\r\n     this.chatsUrlW2 = ref3.getDownloadURL();\r\n     this.chatsUrl.subscribe(res=>console.log(\"img\",res));\r\n     this.chatsUrlW.subscribe(res=>console.log(\"img2\",res));\r\n     this.chatsUrlW2.subscribe(res=>console.log(\"img3\",res));\r\n     this.value= (this.user.favMode=='dark');\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if(this.user.favMode===\"dark\") {\r\n      this.modeService.OnDark();\r\n      //this.modeService.columns(document.querySelectorAll('.light'),'light');\r\n    }\r\n      else if(this.user.favMode===\"light\") {this.modeService.defaultMode();}\r\n\r\n    this.subscritionList.push(this.chatService.getUserChats(this.user.id).subscribe(chats => {this.chats = chats.filter((v:any,i:any,a:any)=>a.findIndex((t:any)=>(t.ID === v.ID))===i);\r\n      this.chats.forEach((chatInfo:any)=>{\r\n        if(chatInfo.sender !== this.user.id) this.subscritionList.push(this.firestore.collection(`Users`).doc(chatInfo.sender)\r\n        .get().subscribe((res:any)=>{this.persons.push(res.data())}))\r\n        else if(chatInfo.receiver !== this.user.id) this.subscritionList.push(this.firestore.collection(`Users`).doc(chatInfo.receiver)\r\n        .get().subscribe((res:any)=>{this.persons.push(res.data())}))\r\n        // if(chatInfo.messages){\r\n          \r\n        //   this.start=new Date(chatInfo.startDate.toDate()).toLocaleDateString(\"en-us\");\r\n        //   chatInfo.messages.forEach((ms:any)=>{\r\n        //     if( new Date(ms.date.toDate()).toLocaleDateString(\"en-us\") < this.start)\r\n        //   })\r\n\r\n        // }\r\n      })//t.id === v.id)\r\n      this.persons=this.persons.filter((v:any,i:any,a:any)=>a.findIndex((t:any)=>(t.id === v.id))===i)\r\n      console.log(\"persons\",this.persons);\r\n      \r\n      if(this.chats) {\r\n        this.chatFlag=true; \r\n        if(this.chats[0].messages){\r\n          \r\n         \r\n           console.log(this.chats[0].messages=this.sortData(this.chats[0].messages));\r\n          //console.log(this.chats[0].messages.sort((a:any,b:any)=> new Date(a.date.toDate()).toLocaleDateString(\"en-us\")< new Date(b.date.toDate()).toLocaleDateString(\"en-us\")))\r\n        // console.log(\"chatssort\",this.chats);\r\n          this.msgsFlag=true;}}\r\n    }))\r\n      // setTimeout(()=>{ console.log(\"this.chats\",this.chats)},1000)\r\n  }\r\n  getUrl()\r\n  {\r\n    // console.log(\"checlURL\",`url(${this.chatsUrl})`)\r\n      return \"url('https://firebasestorage.googleapis.com/v0/b/sout-2d0f6.appspot.com/o/chats%2FchstBG2.jpg?alt=media&token=23f956ad-7b3e-4fae-b105-d538f865d930')\";\r\n  }\r\n  getUrlW()\r\n  {\r\n    // console.log(\"checlURL\",`url(${this.chatsUrl})`)\r\n      return \"url('https://firebasestorage.googleapis.com/v0/b/sout-2d0f6.appspot.com/o/chats%2FchatBGW.jpg?alt=media&token=cfdcaf21-5808-4ca1-be18-4a220bbfef8a')\";\r\n  }\r\n  getUrlW2()\r\n  {\r\n    // console.log(\"checlURL\",`url(${this.chatsUrl})`)\r\n      return \"url('https://firebasestorage.googleapis.com/v0/b/sout-2d0f6.appspot.com/o/chats%2FchatBGW2.jpg?alt=media&token=8566f008-6fd2-4ce6-831e-2f8b77ac19ca')\";\r\n  }\r\n  sortData(arr:[]) {\r\n    var dd;\r\n    return arr.sort((a:any, b:any) => {\r\n      return <any>new Date(b.date.toDate()) - <any>new Date(a.date.toDate());\r\n    });\r\n  }\r\n  addMsg(){\r\n    if(this.newMsg){\r\n      let id = this.firestore.createId();\r\n      this.msg={sender:this.user.id,description:this.newMsg,date:new Date()}\r\n      this.firestore.collection('/chat').doc(this.chats[0].ID).collection('1').doc(id).set({ ...this.msg })\r\n    }\r\n    \r\n  }\r\n  ngAfterViewInit() {\r\n    \r\n  }\r\n  ngOnDestroy(){\r\n    for(let sub of this.subscritionList){\r\n      sub?.unsubscribe();\r\n    }\r\n  }\r\n  ngOnChanges(){\r\n\r\n  }\r\n  toggleActionMenue(){\r\n    this.classApplied = !this.classApplied;\r\n    // this.myChats()\r\n  }\r\n  \r\n\r\n}\r\n","<nav id=\"sidebarMenu\" class=\"col-xl-12 col-lg-12 col-sm-3 col-md-6 col-3 leftSide dark\" [ngStyle]=\"{'margin-left': '0.5%'}\">\r\n    <div class=\"position-sticky my-3 d-flex justify-content-center d-md-block\">\r\n        <ul class=\"nav flex-column   pt-3\">\r\n            <div>\r\n                <li class=\"nav-item\">\r\n                    <a class=\"nav-link \" [routerLink]=\"[ '/users/profile' ]\" routerLinkActive=\"active\">\r\n                        <img [src]=\"user.picURL\" style=\"width: 50px;border-radius: 50%\"><span class=\"d-none d-md-inline-block font\" style=\"margin-left: 18px;font-weight: 500\">{{user.firstName}} {{user.secondName}}</span>\r\n                    </a>\r\n                </li>\r\n                <hr>\r\n                <li class=\"nav-item\"> <!--*ngIf=\"!user.notifications.length===0\"-->\r\n                    <a class=\"nav-link \" [routerLink]=\"[ '/users/notifications' ]\" routerLinkActive=\"active\">\r\n\r\n                        <i class=\"fas fa-bell\"  [ngStyle]=\"{'color': user.favColor}\" ></i><span class=\"d-none d-md-inline-block font\">\r\n                                        Notifications<span [ngStyle]=\"{'color': user.favColor}\"  class=\"badge badge-pill\">{{notificationsNo}}</span></span>\r\n                    </a>\r\n                </li>\r\n                <hr>\r\n            </div>\r\n            <div>\r\n                <li class=\"nav-item\">\r\n                    <a class=\"nav-link \" [routerLink]=\"[ '/users/messages' ]\" routerLinkActive=\"active\">\r\n                        <i class=\"fas fa-envelope\" [ngStyle]=\"{'color': user.favColor}\" ></i><span class=\"d-none d-md-inline-block font\">\r\n                                        Messages <span [ngStyle]=\"{'color': user.favColor}\" class=\"badge badge-pill\"></span></span>\r\n                    </a>\r\n                </li>\r\n                <hr>\r\n            </div>\r\n            <div>\r\n                <li class=\"nav-item\">\r\n                    <a class=\"nav-link \" [routerLink]=\"[ '/users/talents' ]\" routerLinkActive=\"active\">\r\n                        <i class=\"fas fa-music\" [ngStyle]=\"{'color': user.favColor}\"></i><span class=\"d-none d-md-inline-block font\"> Talents</span>\r\n                    </a>\r\n                </li>\r\n                <hr>\r\n            </div>\r\n            <div>\r\n                <li class=\"nav-item\">\r\n                    <a class=\"nav-link \" [routerLink]=\"[ '/users/discover' ]\" routerLinkActive=\"active\">\r\n                        <i class=\"fas fa-hashtag\" [ngStyle]=\"{'color': user.favColor}\"></i><span class=\"d-none d-md-inline-block font\">\r\n                                        Discover</span>\r\n                    </a>\r\n                </li>\r\n                <hr>\r\n            </div>\r\n            <div>\r\n                <li class=\"nav-item\">\r\n                    <a class=\"nav-link \" [routerLink]=\"[ '/users/settings' ]\" routerLinkActive=\"active\">\r\n                        <i class=\"fas fa-cog\" [ngStyle]=\"{'color': user.favColor}\"></i><span class=\"d-none d-md-inline-block font\"> Settings</span>\r\n                    </a>\r\n                </li>\r\n                <hr>\r\n            </div>\r\n            <div>\r\n                <li class=\"nav-item\">\r\n                <a class=\"nav-link \" [routerLink]=\"[ '/users/bookmarks' ]\" routerLinkActive=\"active\">\r\n                    <i class=\"fas fa-bookmark\" [ngStyle]=\"{'color': user.favColor}\"></i><span class=\"d-none d-md-inline-block font\"> Bookmarks</span>\r\n                </a>\r\n            </li>\r\n            <hr>\r\n            </div>\r\n            <div>\r\n                <li class=\"\" >\r\n                   \r\n                                          <h3 style=\"font-size: 10pt;\" class=\"font\">Your Interests <small>Click to remove</small></h3>\r\n                                       <div *ngFor=\"let item of usertalents\">\r\n                                            <span type=\"button\"  (click)=\"removeTalent(item.ID)\" [ngStyle]=\"{'background-color': user.favColor}\" class=\"badge badge-pill text-light \" >{{item.name}}</span>\r\n                                       </div>\r\n                                       <hr>\r\n                                       <h3 style=\"font-size: 10pt;\" class=\"font\">Add Interests <small>Click to add</small></h3>\r\n                                       <div *ngFor=\"let item of talentsList\">\r\n                                            <span type=\"button\" (click)=\"addtalents(item)\" [ngStyle]=\"{'background-color': user.favColor}\" class=\"badge badge-pill text-light\" >{{item.name}}</span>\r\n                                       </div>\r\n                                          \r\n                                       \r\n                </li>\r\n                <hr>\r\n            </div>\r\n            \r\n        </ul>\r\n\r\n    </div>\r\n</nav>","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ModeService {\r\n\r\n  constructor() { }\r\n  //READ ME\r\n  //call Body() first to change the body color according to mode\r\n  //Then for each container or div or anything U wanna make its BG changes with mode: add (dark) class to them\r\n  //Then for each fonts U wanna make them changes with mode: add (font) class to them\r\n  //Then call OnDark() or defaultMode() according to user mode\r\n  \r\n  Body(mode:string){\r\n    if (mode===\"dark\"){\r\n      document.body.style.backgroundColor = \"#212121\";\r\n    }\r\n    else{\r\n      document.body.style.backgroundColor = \"#F0F2F5\";\r\n    }\r\n  }\r\n  OnDark(){\r\n    //  document.body.style.backgroundColor = \"#212121\";\r\n    this.Body(\"dark\");\r\n    this.columns(document.querySelectorAll(\".dark\"),'dark');\r\n    this.fonts(document.querySelectorAll(\".font\"),'dark');\r\n  }\r\n  defaultMode(){\r\n    this.Body(\"light\");\r\n    this.columns(document.querySelectorAll(\".dark\"),'light');\r\n    this.fonts(document.querySelectorAll(\".font\"),'light');\r\n  }\r\n  columns(columns:any, mode:string) {\r\n    if (mode===\"dark\") {\r\n        for (var i = 0; i < columns.length; i++) {\r\n            columns[i].style.backgroundColor = \"#2E2E2E\";\r\n        }\r\n    } else {\r\n        for (var i = 0; i < columns.length; i++) {\r\n            columns[i].style.backgroundColor = \"#F0F2F5\";\r\n        }\r\n    }\r\n  }\r\n\r\n  fonts(Items:any, mode:string) {\r\n    \r\n    if (mode===\"dark\") {\r\n        for (var i = 0; i < Items.length; i++) {\r\n          Items[i].style.color = \"#F0F2F5\";\r\n        }\r\n    } else {\r\n        for (var i = 0; i < Items.length; i++) {\r\n          Items[i].style.color = \"#444444\";\r\n        }\r\n    }\r\n  }\r\n}\r\n","<app-header></app-header>\r\n<div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n        <app-sidebar></app-sidebar>\r\n        <nav id=\"sidebarMenu\" class=\"col-2 col-md-3 middleSetting dark font\" [ngStyle]=\"{'margin':'1.2%'}\">\r\n            <div class=\"position-sticky my-3 d-flex justify-content-center d-md-block \">\r\n                <ul class=\"nav flex-column\">\r\n                    <h1 [ngStyle]=\"{'margin-left': '3%'}\">Settings</h1>\r\n                    <div class=\"dropdown-divider\"></div>\r\n                    <div>\r\n                        <li class=\"nav-item dark\" [ngClass]=\"settings.accountPrivacy ? 'active' : 'inactive'\">\r\n                            <a class=\"nav-link \" (click)= \"disableOthers('accountPrivacy')\">\r\n                                <i class=\"fas fa-user-lock \" [ngStyle]=\"{'color': settingsData.favColor}\"></i><span class=\"d-md-inline-block font\" > Account Privacy</span>\r\n                                <svg viewBox=\"0 0 24 24\" height=\"20\" width=\"20\" [ngStyle]=\"{'float':'right', 'margin-top':'5px'}\" fill=gray><g><path d=\"M17.207 11.293l-7.5-7.5c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L15.086 12l-6.793 6.793c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293l7.5-7.5c.39-.39.39-1.023 0-1.414z\"></path></g></svg>\r\n                            </a>\r\n                        </li>\r\n                        <div class=\"dropdown-divider\"></div>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item dark\" id=\"theme\" [ngClass]=\"settings.themes ? 'active' : 'inactive'\">\r\n                            <a class=\"nav-link\" (click)= \"disableOthers('themes')\">\r\n                                <i class=\"fas fa-palette\" [ngStyle]=\"{'color': settingsData.favColor}\"></i><span class=\"d-flex d-md-inline-block font\"> Theme</span>\r\n                                <svg viewBox=\"0 0 24 24\" height=\"20\" width=\"20\" [ngStyle]=\"{'float':'right', 'margin-top':'5px'}\" fill=gray><g><path d=\"M17.207 11.293l-7.5-7.5c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L15.086 12l-6.793 6.793c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293l7.5-7.5c.39-.39.39-1.023 0-1.414z\"></path></g></svg>\r\n                            </a>\r\n                        </li>\r\n                        <div class=\"dropdown-divider\"></div>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item dark\" id=\"changePassword\" [ngClass]=\"settings.changePassword ? 'active' : 'inactive'\">\r\n                            <a class=\"nav-link side\" (click)= \"disableOthers('changePassword')\">\r\n                                <i class=\"fas fa-key\" [ngStyle]=\"{'color': settingsData.favColor}\"></i><span class=\"d-none d-md-inline-block font\"> Change Password</span>\r\n                                <svg viewBox=\"0 0 24 24\" height=\"20\" width=\"20\"  [ngStyle]=\"{'float':'right', 'margin-top':'5px'}\" fill=gray><g><path d=\"M17.207 11.293l-7.5-7.5c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L15.086 12l-6.793 6.793c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293l7.5-7.5c.39-.39.39-1.023 0-1.414z\"></path></g></svg>\r\n                            </a>\r\n                        </li>\r\n                        <div class=\"dropdown-divider\"></div>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item dark\" id=\"notifications\" [ngClass]=\"settings.notifications ? 'active' : 'inactive'\">\r\n                            <a class=\"nav-link side\" (click)= \"disableOthers('notifications')\">\r\n                                <i class=\"fas fa-bell\" [ngStyle]=\"{'color': settingsData.favColor}\"></i><span class=\"d-none d-md-inline-block font\"> Notifications</span>\r\n                                <svg viewBox=\"0 0 24 24\" height=\"20\" width=\"20\" [ngStyle]=\"{'float':'right', 'margin-top':'5px'}\" fill=gray><g><path d=\"M17.207 11.293l-7.5-7.5c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L15.086 12l-6.793 6.793c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293l7.5-7.5c.39-.39.39-1.023 0-1.414z\"></path></g></svg>\r\n                            </a>\r\n                        </li>\r\n                        <div class=\"dropdown-divider\"></div>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item dark\" id=\"manageAccount\" [ngClass]=\"settings.manageAccount ? 'active' : 'inactive'\">\r\n                            <a class=\"nav-link side\" (click)= \"disableOthers('manageAccount')\">\r\n                                <i class=\"fas fa-shield-alt\" [ngStyle]=\"{'color': settingsData.favColor}\"></i><span class=\"d-none d-md-inline-block font\"> Manage Account</span>\r\n                                <svg viewBox=\"0 0 24 24\" height=\"20\" width=\"20\" [ngStyle]=\"{'float':'right', 'margin-top':'5px'}\" fill=gray><g><path d=\"M17.207 11.293l-7.5-7.5c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L15.086 12l-6.793 6.793c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293l7.5-7.5c.39-.39.39-1.023 0-1.414z\"></path></g></svg>\r\n                            </a>\r\n                        </li>\r\n                    </div>\r\n                </ul>\r\n            </div>\r\n        </nav>\r\n        <div id=\"sidebarMenu\" class=\"col-8 col-md-5 col-sm-8 dark font\" [ngStyle]=\"{'margin': '1.2%'}\">\r\n            <div  *ngIf=\"settings.themes\" id=\"themeSetting\">\r\n                <h3 [ngStyle]=\"{'margin-top': '3%', 'text-align':'center'}\">Themes</h3>\r\n                <div class=\"dropdown-divider\"></div>\r\n                <div>\r\n                    <div [ngStyle]=\"{'margin-top':'2rem', 'margin-left':'1rem'}\">\r\n                        <p class=\"h2 font\"> Icons Color <button [ngStyle]=\"{'background-color': color}\" (click)=\"color='#ee4c22'\" class=\"btn btn-secondary reset\">Reset</button></p>\r\n                    </div>\r\n                    <div class=\"theme theme-0\" [ngStyle]=\"{'margin-left': '1rem'}\" (click)=\"color='#ee4c22'\">\r\n                    </div>\r\n                    <div class=\"theme theme-1\" (click)=\"settingsData.favColor='#ee1144'\">\r\n                    </div>\r\n                    <div  class=\"theme theme-2\" (click)=\"settingsData.favColor='#4A4A50'\">\r\n                    </div>\r\n                    <div class=\"theme theme-3\" (click)=\"settingsData.favColor='#bd4381'\">\r\n                    </div>\r\n                    <div class=\"theme theme-4\" (click)=\"settingsData.favColor='#A0306F'\">\r\n                    </div>\r\n                    <div class=\"theme theme-5\" (click)=\"settingsData.favColor='#642F42'\">\r\n                    </div>\r\n                    <div class=\"theme theme-6\" (click)=\"settingsData.favColor='#9b6d98'\">\r\n                    </div>\r\n                    <div class=\"theme theme-7\" (click)=\"settingsData.favColor='#553655'\">\r\n                    </div>\r\n                    <div class=\"theme theme-8\" (click)=\"settingsData.favColor='#4080D8'\">\r\n                    </div>\r\n                    <div class=\"defaultColor\" [ngStyle]=\"{'margin-top':'5px'}\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"dropdown-divider\"></div>\r\n\r\n                <div>\r\n                    <div [ngStyle]=\"{'margin-top':'2rem','margin-bottom':'2rem', 'margin-left': '1rem'}\">\r\n                        <p class=\"h2 font\"> Enable Dark Mode </p>\r\n                        <ui-switch (change)=\"onDarkEv($event)\" color='grey' [checked]=\"checked\"></ui-switch>\r\n                        \r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <button class=\"btn btn-secondary btn-lg btn-block\" type=\"button\" (click)=\"saveThemes()\">Save</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"settings.changePassword\" id=\"changePassSetting\" [ngStyle]=\"{'padding-left':'1rem'}\">\r\n                <h3 [ngStyle]=\"{'margin-top': '3%', 'text-align':'center'}\">Password</h3>\r\n\r\n                <div class=\"dropdown-divider\"></div>\r\n\r\n                <form #frm=\"ngForm\" name=\"sett\" (ngSubmit)=\"changePassword()\">\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"newPass\" class=\"h6 darkFont\" >Old Password</label>\r\n                        <input type=\"password\" [(ngModel)]=\"settingsData.oldPassword\" required class=\"form-control\" placeholder=\"Old Password\" name=\"oldPass\">\r\n                        <!-- <div [hidden]=\"passConfirm.valid || passConfirm.untouched\" id=\"helpId\" class=\"alert alert-danger\">Not Match</div> -->\r\n\r\n                    </div>\r\n                    \r\n                    <button type=\"submit\" placement=\"bottom\" class=\"btn btn-outline-secondary\" ngbPopover=\"For Security Check Your Email\" triggers=\"mouseenter:mouseleave\" popoverTitle=\"Email Security\">Send Code</button>\r\n                </form>\r\n            </div>\r\n            <div  *ngIf=\"settings.manageAccount\" id=\"deactivateAccSetting\" [ngStyle]=\"{'padding-left':'1rem'}\">\r\n                <h3 [ngStyle]=\"{'margin-top': '3%', 'text-align':'center'}\">Deactivation</h3>\r\n\r\n                <div class=\"dropdown-divider\"></div>\r\n                <div class=\"form-check\">\r\n                    <input class=\"form-check-input\" type=\"checkbox\" value=\"\" (click)=\"deactivate()\">\r\n                    <label class=\"form-check-label h6 darkFont\" for=\"deAct \">\r\n                      Deactivate your account\r\n                    </label>\r\n                </div>\r\n                <div class=\"alert alert-warning alert-dismissible\"  *ngIf=\"alertDeact\" role=\"alert\">\r\n                    <button type=\"button\" onclick=\"unactivate()\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n                      <span aria-hidden=\"true\">&times;</span>\r\n                    </button> <strong>Wornning!</strong> After 30-day deactivation, your account'll be deleted.\r\n                    <button type=\"button\" class=\"btn btn-light btn-sm\" (click)=\"confirmDeactivate()\">Confirm</button>\r\n                </div>\r\n            </div>\r\n            <div  *ngIf=\"settings.accountPrivacy\" id=\"accPrivacySetting\" [ngStyle]=\" {'padding-left':'1rem'}\">\r\n                <h3 [ngStyle]=\"{'margin-top': '3%', 'text-align':'center'}\">Privacy</h3>\r\n\r\n                <div class=\"dropdown-divider\"></div>\r\n                <div class=\"form-check\">\r\n                    <input class=\"form-check-input\" type=\"checkbox\" value=\"\" (click)=\"privacy(this.checked)\" >\r\n                    <label class=\"form-check-label h6 darkFont\" for=\"deAct \">\r\n                      Public\r\n                    </label>\r\n                </div>\r\n                <div class=\"alert alert-warning alert-dismissible fade\" role=\"alert\">\r\n                    <button type=\"button\"  class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n                      <span aria-hidden=\"true\">&times;</span>\r\n                    </button> <strong>Wornning!</strong> Anyone can see your posts.\r\n                    <button type=\"button\" class=\"btn btn-light btn-sm\" (click)=\"confirmPublic()\">Confirm</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { NgbModal, NgbModalConfig } from '@ng-bootstrap/ng-bootstrap';\r\nimport { PostsService } from 'src/app/services/posts.service';\r\n\r\n@Component({\r\n  selector: 'app-bookmark',\r\n  templateUrl: './bookmark.component.html',\r\n  styleUrls: ['./bookmark.component.scss']\r\n})\r\n\r\nexport class BookmarkComponent implements OnInit {\r\n  bookmarks: any[] = [];\r\n  bookmarkObj={\r\n    id:'',\r\n    data:{}\r\n  }\r\n  bookmarksRef: any[] = [];\r\n  book:any\r\n  LikesList: any[] = [];\r\n  commentsList: any[] = [];\r\n  postcomfields: string[] = [];\r\n  bookmarkFlag:boolean = false;\r\n  user: any = JSON.parse(localStorage.getItem('userdata')!)\r\n  constructor(config: NgbModalConfig, private modalService: NgbModal,private postsService: PostsService, private firestore: AngularFirestore) {\r\n    config.backdrop = 'static';\r\n    config.keyboard = false;\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    this.firestore.collection('Users').doc(this.user.id).collection('bookmarks').get().subscribe((res)=>{this.bookmarks=res.docs});\r\n    \r\n    setTimeout(()=>{\r\n      this.bookmarks.forEach((mark)=>{\r\n        mark.data().post.get().then((snapshot:any) => {\r\n          this.bookmarkObj={id:mark.id,data:snapshot.data()};\r\n           this.getLikes(snapshot.data().id); \r\n           this.getComments(snapshot.data().id);  \r\n           this.bookmarksRef.push(this.bookmarkObj)})\r\n      })},1000)\r\n      setTimeout(()=>{console.log(this.bookmarksRef);this.bookmarkFlag=true;},2000)\r\n  }\r\n  deleteBookmark(bookmarkID:string){\r\n    const ID = this.bookmarksRef.map(function(e) { return e.id; }).indexOf(bookmarkID);\r\n    this.firestore.collection('Users').doc(this.user.id).collection('bookmarks').doc(this.bookmarks[ID].id).delete();\r\n    const element = document.getElementById(bookmarkID);\r\n    element?.parentNode?.removeChild(element);\r\n  }\r\n  open(content:any) {\r\n    console.log(content)\r\n    // document.getElementById(content)?.focus()\r\n    this.modalService.open( content);\r\n  }\r\n  shareBookmark(){\r\n    // return this.firestore.collection(\"/post\", ref => ref.where('postID', '==', id)).get().pipe(map(res => {\r\n    //   docs = res.docs\r\n    //   docs.forEach(el => {\r\n    //     this.dataPost = el.data()\r\n    //     this.allPosts.push(this.dataPost)\r\n    //   })\r\n    //   console.log(this.allPosts)\r\n    //   return this.allPosts;\r\n\r\n    // }))\r\n    // this.postsService.addPost()\r\n  }\r\n  //from profile\r\n  addLike(post: any) {\r\n    this.firestore.collection('post').doc(post.id).collection(\"like\").add({\r\n      userid: this.user.id\r\n    })\r\n    this.notifyUser(post.owner.id, `${this.user.firstName} liked on your post `)\r\n  }\r\n  async notifyUser(usrId: string, msg: string) {\r\n    await this.firestore.collection(`Users`).doc(usrId).collection('notifications').add({\r\n      date: new Date().toISOString(),\r\n      description: msg,\r\n      maker: {\r\n        id: this.user.id,\r\n        name: this.user.firstName + \" \" + this.user.secondName,\r\n        picURL: this.user.picURL\r\n      }\r\n    })\r\n  }\r\n  addComment(post: any, index: number) {\r\n    this.firestore.collection(`post`).doc(post.id).collection('comment').add({\r\n      writer: {\r\n        id: this.user.id,\r\n        name: this.user.firstName + \" \" + this.user.secondName,\r\n        picURL: this.user.picURL\r\n      },\r\n      description: this.postcomfields[index],\r\n      date: new Date().toISOString(),\r\n    })\r\n    this.notifyUser(post.owner.id, `${this.user.firstName} commented on your post \"${this.postcomfields[index]}\"`)\r\n  }\r\n\r\n  async getComments(postid: string) {\r\n    await this.firestore.collection('post').doc(postid).collection('comment').valueChanges().subscribe((data) => {\r\n      this.commentsList.push(data);\r\n     // console.log(data)\r\n    })\r\n  }\r\n  async getLikes(postid: string) {\r\n    await this.firestore.collection('post').doc(postid).collection('like').valueChanges().subscribe((data) => {\r\n      this.LikesList.push(data)\r\n      //console.log(data)\r\n    })\r\n  }\r\n  \r\n\r\n}\r\n","<app-header></app-header>\r\n<div class=\"container\">\r\n\r\n    <div class=\"row no-padding\" class=\"col-md-12\" id=\"cover\" style=\"margin-bottom: 2.5%\">\r\n        <div id=\"coverPhotoParent\">\r\n            <img [src]=\"coverPicURL\" id=\"coverPhoto\">\r\n            <div id=\"avatar\">\r\n                <img [src]=\"picURL\">\r\n                <h3 id=\"name\" style=\"text-align: center;margin-top: 15px\">{{userName}}</h3>\r\n            </div>\r\n            <hr style=\"margin-top: 10%;\">\r\n        </div>\r\n\r\n\r\n    </div>\r\n    <div class=\"row\" style=\"margin-top: 40px\">\r\n        <input type=\"file\" id=\"myFileInput\" />\r\n        <div class=\"row nav  nav2\" id=\"nav-tab\"\r\n            style=\"background-color: transparent; width: 100%;margin-bottom: 2%;height: 5.5%;margin-top: 1%\">\r\n\r\n            <span class=\"col nav-item padding-0\" data-toggle=\"tooltip\" data-placement=\"bottom\" style=\"float: left;\">\r\n                <span class=\"dropdown edit dropleft bb\"\r\n                    style=\"box-shadow: 0px 0.5px 5px grey;border-radius:20px;width: 120px;padding: 3px 12px 5px 12px;background-color: #F5F7F8;\">\r\n                    <a role=\"menuitem\" tabindex=\"-1\" (click)=\"open(followersModal)\">\r\n                        <b [ngStyle]=\"{'color': user.favColor}\"> {{followers}}</b> Followers\r\n                    </a>\r\n                </span>\r\n                <span class=\"dropdown edit dropleft bb\"\r\n                    style=\"box-shadow: 0px 0.5px 5px grey;border-radius:20px;width: 120px;padding: 3px 15px 5px 12px;background-color: #F5F7F8;\">\r\n                    <a role=\"menuitem\" tabindex=\"-1\" (click)=\"open(followingModal)\">\r\n                        <b [ngStyle]=\"{'color': user.favColor}\"> {{following}}</b> Following\r\n                    </a>\r\n                </span>\r\n            </span>\r\n\r\n            <span class=\"nav-item col\">\r\n                <div class=\"dropdown edit\"\r\n                    style=\"box-shadow: 0px 0.5px 5px grey;border-radius: 5px;width: 42.5%;float: right\">\r\n                    <button class=\"btn btn-default dropdown-toggle\" type=\"button\" id=\"menu1\" data-toggle=\"dropdown\"\r\n                        style=\"width: 100%;background-color: #F5F7F8;\"><i class=\"fas fa-edit\"\r\n                            style=\"color: #D93746;font-size: 20px \" [ngStyle]=\"{'color': user.favColor}\"></i> <span\r\n                            style=\"margin-right: 2%\">Edit</span>\r\n                    </button>\r\n                    <ul class=\"dropdown-menu\" style=\"width: 100%;border: none\" role=\"menu\" aria-labelledby=\"menu1\">\r\n                        <li role=\"presentation\" style=\"padding-left:7px;\">\r\n                            <a class=\"custom-file\" role=\"menuitem\" tabindex=\"-1\">\r\n                                <input type=\"file\" (change)=\"uploadFile($event,'profile')\" class=\"custom-file-input\"\r\n                                    style=\"width:100%;\" />\r\n                                <label class=\"custom-file-label\" for=\"validatedCustomFile\">\r\n                                    <i class=\"fas fa-camera\" style=\"font-size: 15px\"\r\n                                        [ngStyle]=\"{'color': user.favColor}\"></i> Edit Profile Pic</label>\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                        <li role=\"presentation\" style=\"padding-left:5px;\">\r\n                            <a class=\"custom-file\" role=\"menuitem\" tabindex=\"-1\">\r\n                                <input type=\"file\" (change)=\"uploadFile($event,'cover')\" class=\"custom-file-input\"\r\n                                    style=\"width:100%;\" />\r\n                                <label class=\"custom-file-label\" for=\"validatedCustomFile\">\r\n                                    <i class=\"fas fa-image\" style=\"font-size: 15px\"\r\n                                        [ngStyle]=\"{'color': user.favColor}\"></i> Edit Cover</label>\r\n                            </a>\r\n                        </li>\r\n                        <!-- <hr>\r\n                        <li role=\"presentation\" style=\"padding-left:7px;\">\r\n                            <a role=\"menuitem\" tabindex=\"-1\">\r\n                                <div class=\"input-group mb-3\">\r\n                                    <input type=\"text\" #name value=\"\" class=\"form-control\" placeholder=\"Edit Your Name\">\r\n                                    <div class=\"input-group-append\">\r\n                                      <button class=\"btn btn-outline-secondary input-group-text\" (click)=\"changeName(name.value);name.value=''\" type=\"button\">Save</button>\r\n                                    </div>\r\n                                  </div>\r\n                            </a>\r\n                        </li> -->\r\n                    </ul>\r\n                </div>\r\n            </span>\r\n\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"row\" id=\"center\">\r\n        <!--            <div class=\"col-sm-1 col-md-3 leftSide\" style=\"\">-->\r\n        <nav id=\"sidebarMenu1\" class=\"col-sm-1 col-md-3\" style=\"background-color: #F5F7F8;border-radius: 5px;\r\n        box-shadow: 0px 0.5px 5px grey;height: 75vh;\">\r\n            <div class=\"position-sticky my-3 d-flex justify-content-center\">\r\n                <ul class=\"nav flex-column\">\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/home' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-home\" [ngStyle]=\"{'color': user.favColor}\"></i><span\r\n                                    class=\"d-none d-md-inline-block\"> Home</span>\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/notifications' ]\"\r\n                                routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-bell\" [ngStyle]=\"{'color': user.favColor}\"></i><span\r\n                                    class=\"d-none d-md-inline-block\">Notifications <b\r\n                                        class=\"badge badge-pill\">{{notificationsNo}}</b>\r\n                                </span>\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/messages' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-envelope\" [ngStyle]=\"{'color': user.favColor}\"></i><span\r\n                                    class=\"d-none d-md-inline-block\"> Messages</span>\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/talents' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-music\" [ngStyle]=\"{'color': user.favColor}\"></i><span\r\n                                    class=\"d-none d-md-inline-block\"> Talents</span>\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/discover' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-hashtag\" [ngStyle]=\"{'color': user.favColor}\"></i><span\r\n                                    class=\"d-none d-md-inline-block\"> Discover</span>\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/settings' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-cog\" [ngStyle]=\"{'color': user.favColor}\"></i><span\r\n                                    class=\"d-none d-md-inline-block\"> Settings</span>\r\n\r\n                            </a>\r\n                        </li>\r\n                        <hr>\r\n                    </div>\r\n                    <div>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link side\" [routerLink]=\"[ '/users/bookmarks' ]\" routerLinkActive=\"active\">\r\n                                <i class=\"fas fa-bookmark\" [ngStyle]=\"{'color': user.favColor}\"></i><span\r\n                                    class=\"d-none d-md-inline-block\"> Bookmarks</span>\r\n                            </a>\r\n                        </li>\r\n                    </div>\r\n                </ul>\r\n\r\n            </div>\r\n        </nav>\r\n\r\n        <div class=\"col-sm-11 col-md-9 rightSide\" style=\"height: 100%;margin-bottom: 30px;\">\r\n            <div id=\"writePst\">\r\n                <div class=\"firstRow\">\r\n                    <img [src]=\"picURL\" style=\"width: 6%\" [routerLink]=\"'/users/profile/'+post.owner.id\"\r\n                        routerLinkActive=\"active\" style=\"cursor: pointer;\">\r\n                    <input *ngIf=\"urls.length===0||urlsVideo.length===0\" type=\"text\" placeholder={{postMind}}\r\n                        [(ngModel)]=\"postDesc\" style=\"cursor:auto;\" />\r\n                    <div class=\"p-2 ny-3\" *ngFor=\"let url of urls\">\r\n                        <audio controls=\"\" *ngIf=\"url\">\r\n                            <source [src]=\"sanitize(url)\" type=\"audio/wav\">\r\n                        </audio>\r\n                    </div>\r\n                    <div class=\"container ny-3\" *ngFor=\"let url of urlsVideo\">\r\n                        <video controls=\"\" *ngIf=\"url\">\r\n                            <source [src]=\"sanitize(url)\" type=\"video/mp4\">\r\n                        </video>\r\n                    </div>\r\n                </div>\r\n                <hr>\r\n                <div class=\"secondRow\">\r\n                    <div class=\"live\">\r\n                        <!-- Audio recorder html -->\r\n                        <div style=\"display: inline-block;background-color: transparent;\">\r\n                            <button *ngIf=\"!isRecording\"\r\n                                style=\"display: inline-block;background-color: transparent;border: none;\"\r\n                                (click)=\"startRecording()\"><i class=\"fas fa-microphone-alt\" style=\"cursor: pointer;\"\r\n                                    [ngStyle]=\"{'color': user.favColor}\"></i></button>\r\n                            <button *ngIf=\"isRecording\"\r\n                                style=\"display: inline-block;background-color: transparent;border: none;\"\r\n                                (click)=\"stopRecording()\"><i class=\"fas fa-microphone-alt\" style=\"cursor: pointer;\"\r\n                                    [ngStyle]=\"{'color': user.favColor}\"></i></button>\r\n                        </div>\r\n                        <!-- startVideoRecording -->\r\n                        <div style=\"display: inline-block;background-color: transparent;margin-left: 10px;\">\r\n                            <button *ngIf=\"!isRecordingVideo\"\r\n                                style=\"display: inline-block;background-color: transparent;border: none;\"\r\n                                (click)=\"startVideoRecording()\"><i class=\"fas fa-video\" id=\"liveIcon\"\r\n                                    style=\"cursor: pointer;\" [ngStyle]=\"{'color': user.favColor}\"></i></button>\r\n                            <button *ngIf=\"isRecordingVideo\"\r\n                                style=\"display: inline-block;background-color: transparent;border: none;\"\r\n                                (click)=\"stopRecordingVideo()\"><i class=\"fas fa-video\" id=\"liveIcon\"\r\n                                    style=\"cursor: pointer;\" [ngStyle]=\"{'color': user.favColor}\"></i></button>\r\n                        </div>\r\n                        <!-- <i class=\"fas fa-video\" id=\"liveIcon\" style=\"cursor: pointer;margin-top: 6px;\"\r\n                            [ngStyle]=\"{'color': user.favColor}\"></i>\r\n                        <i class=\"fas fa-microphone-alt\" style=\"cursor: pointer;margin-top: 6px;margin-left: 23px;\"\r\n                            [ngStyle]=\"{'color': user.favColor}\"></i> -->\r\n                        <!-- <i class=\"fas fa-paperclip\" style=\"cursor: pointer;\" [ngStyle]=\"{'color': user.favColor}\"></i> -->\r\n                        <div class=\"dropdown\" style=\"float:right;\">\r\n                            <button class=\"btn dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\"\r\n                                aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fas fa-paperclip\"\r\n                                    [ngStyle]=\"{'color': this.user.favColor}\"></i>\r\n                            </button>\r\n                            <ul class=\"dropdown-menu\" role=\"menu\">\r\n                                <li role=\"presentation\" style=\"padding-left:9px;padding-right: 9px;\">\r\n                                    <a class=\"custom-file\" role=\"menuitem\" tabindex=\"-1\">\r\n                                        <input type=\"file\" (change)=\"uploadFile2($event,'image')\"\r\n                                            class=\"custom-file-input\" style=\"width:100%;\" />\r\n                                        <label class=\"custom-file-label\" for=\"validatedCustomFile\">\r\n                                            <i class=\"fas fa-image\" style=\"font-size: 25px\"></i></label>\r\n                                    </a>\r\n                                </li>\r\n                                <hr>\r\n                                <li role=\"presentation\" style=\"padding-left:9px;padding-right: 9px;\">\r\n                                    <a class=\"custom-file\" role=\"menuitem\" tabindex=\"-1\">\r\n                                        <input type=\"file\" (change)=\"uploadFile2($event,'audio')\"\r\n                                            class=\"custom-file-input\" style=\"width:100%;\" />\r\n                                        <label class=\"custom-file-label\" for=\"validatedCustomFile\">\r\n                                            <i class=\"fas fa-microphone\" style=\"font-size: 25px\"></i></label>\r\n                                    </a>\r\n                                </li>\r\n                                <hr>\r\n                                <li role=\"presentation\" style=\"padding-left:9px;padding-right: 9px;\">\r\n                                    <a class=\"custom-file\" role=\"menuitem\" tabindex=\"-1\">\r\n                                        <input type=\"file\" (change)=\"uploadFile2($event,'video')\"\r\n                                            class=\"custom-file-input\" style=\"width:100%;\" />\r\n                                        <label class=\"custom-file-label\" for=\"validatedCustomFile\">\r\n                                            <i class=\"fas fa-video\" style=\"font-size: 25px\"></i></label>\r\n                                    </a>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <button class=\"btn\" id=\"postButt\" (click)=\"addPost(postDesc,urls,urlsVideo);postDesc=''\"\r\n                            [ngStyle]=\"{'background-color': user.favColor}\">Post</button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <div id=\"post1\" *ngFor=\"let post of postList;let i=index\">\r\n                <div class=\"dropdown \" style=\"float: right\">\r\n                    <button class=\"btn dropdown-toggle points\" id=\"menu1\" type=\"button\" data-toggle=\"dropdown\"\r\n                        aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fas fa-ellipsis-h\"\r\n                            style=\"color: #d8352b;font-size: 16px\" [ngStyle]=\"{'color': user.favColor}\"></i>\r\n                    </button>\r\n                    <ul class=\"dropdown-menu\" role=\"menu\">\r\n                        <li role=\"presentation\" style=\"padding-left:9px;\">\r\n                            <button (click)=\"deletePost(post.id)\"\r\n                                style=\"color: black;background-color: transparent;border: none;cursor: pointer;\">\r\n                                <i class=\"fas fa-trash\" style=\"font-size: 16px;color: #d8352b;margin-right: 5px;\"></i>\r\n                                Delete Post</button>\r\n                        </li>\r\n                        <hr>\r\n                        <li role=\"presentation\" style=\"padding-left:9px;\">\r\n                            <button (click)=\"bookmarkpost(post)\"\r\n                                style=\"color: black;background-color: transparent;border: none;cursor: pointer;\">\r\n                                <i class=\"fas fa-bookmark\"\r\n                                    style=\"font-size: 16px;color: #d8352b;margin-right: 5px;\"></i>\r\n                                Bookmark Post</button>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div class=\"poster\">\r\n                    <img [src]=\"picURL\" [routerLink]=\"'/users/profile/'+post.owner.id\" routerLinkActive=\"active\"\r\n                        style=\"cursor: pointer;\">\r\n                    <div id=\"posterName\" [routerLink]=\"'/users/profile/'+post.owner.id\" routerLinkActive=\"active\"\r\n                        style=\"cursor: pointer;\">{{userName}}</div>\r\n                    <div id=\"time\">{{post.date.seconds * 1000 | date:'dd-MM-yyyy hh:mm'}} <i\r\n                            class=\"fas fa-globe-africa\"></i></div>\r\n                </div>\r\n\r\n                <span class=\"ml-2\">{{post.description}}</span>\r\n                <br />\r\n                <img [src]=\"post.image\" *ngIf=\"post.image\" style=\"width: 100%;\">\r\n                <span *ngIf=\"post.audio\">\r\n                    <div class=\"container-audio\">\r\n                        <audio controls>\r\n                            <source [src]=\"post.audio\" type=\"audio/ogg\">\r\n                            Your browser dose not Support the audio Tag\r\n                        </audio>\r\n                    </div>\r\n                </span>\r\n\r\n                <hr style=\"margin-top: 5px;\">\r\n                <div class=\"lastRowPost\">\r\n                    <div id=\"like\" (click)=\"addLike(post)\">\r\n                        <i class=\"far fa-thumbs-up\" id=\"likeIcon\"></i>\r\n                        <span id=\"likeCont\">\r\n                            Like <span class=\"badge badge-pill badge-light\">{{LikesList[i].length}}</span>\r\n                        </span>\r\n                    </div>\r\n                    <div id=\"comment\">\r\n                        <i class=\"fas fa-microphone-alt\"></i>\r\n                        <span id=\"commentCont\">\r\n                            Voice\r\n                        </span>\r\n                    </div>\r\n                    <div id=\"comment\" (click)=\"addComment(post,i)\">\r\n                        <i class=\"far fa-comment-alt\" id=\"commentIcon\"></i>\r\n                        <span id=\"commentCont\">\r\n                            Comment <span class=\"badge badge-pill badge-light\">{{commentsList[i].length}}</span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div id=\"writecomnt\">\r\n                    <hr style=\"margin-top: 55px;margin-bottom: 10px\">\r\n                    <div class=\"firstRow\">\r\n                        <img [src]=\"picURL\" [routerLink]=\"'/users/profile/'+post.owner.id\" routerLinkActive=\"active\"\r\n                            style=\"cursor: pointer;\">\r\n                        <input [(ngModel)]=\"postcomfields[i]\" type=\"text\" placeholder=\"Write a comment...\"\r\n                            id=\"cmntInput\" />\r\n                    </div>\r\n\r\n                </div>\r\n                <div *ngFor=\"let item of commentsList[i]\" class=\"my-2 mx-3 mt-3\" style=\"width: 70%;margin-left: 3.5%;\">\r\n\r\n                    <img style=\"width: 6%;height: 6%;float: left;border-radius: 50%;\"\r\n                        [src]=\"user.id==item.writer.id?picURL:item.writer.picURL\"\r\n                        [routerLink]=\"'/users/profile/'+user.id==item.writer.id?user.id:item.writer.id\"\r\n                        routerLinkActive=\"active\">\r\n\r\n                    <div class=\"pl-2\" style=\"background-color:#F0F2F5;border-radius: 10px;margin-left: 5.5%;\">\r\n                        <div><small id=\"posterName\">{{item.writer.name}}</small>\r\n                            <small style=\"display: block;font-size: 10px;\">\r\n                                {{item.date | date:'dd-MM-yyyy hh:mm'}}</small>\r\n                        </div>\r\n                        <span style=\"font-weight: 400;\">{{item.description}}</span>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<!-- Followers Modal -->\r\n<ng-template #followersModal let-c=\"close\" let-d=\"dismiss\">\r\n    <div class=\"modal-header text-light bg-dark\">\r\n        <h4 class=\"modal-title\" id=\"modal-basic-title\">All Followers :</h4>\r\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"d('Cross click')\">\r\n            <span aria-hidden=\"true\" style=\"color:white;\">&times;</span>\r\n        </button>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div *ngFor=\"let follower of followersList;\">\r\n            <div class=\"row\">\r\n                <img class=\" padding-0\" [src]=\"follower.picURL\"\r\n                    style=\"width: 50px;float: left;border-radius: 50%;height: 50px;margin-left: 8px;cursor: pointer;\"\r\n                    [routerLink]=\"'/users/profile/'+follower.userid\" routerLinkActive=\"active\">\r\n\r\n                <span class=\" padding-0\" style=\"font-size: 20px;margin-top: 13px;margin-left: 5px;cursor: pointer;\"\r\n                    [routerLink]=\"'/users/profile/'+follower.userid\" routerLinkActive=\"active\">{{follower.name}}</span>\r\n            </div>\r\n            <hr style=\"margin-top: 10px;\" *ngIf=\"followersList.length>1\" />\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<!-- End Modal -->\r\n\r\n<!-- Following Modal -->\r\n<ng-template #followingModal let-c=\"close\" let-d=\"dismiss\">\r\n    <div class=\"modal-header text-light bg-dark\">\r\n        <h4 class=\"modal-title\" id=\"modal-basic-title\">Following :</h4>\r\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"d('Cross click')\">\r\n            <span aria-hidden=\"true\" style=\"color:white;\">&times;</span>\r\n        </button>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div *ngFor=\"let following of followingList;let y=index\" style=\"margin-bottom: 10px;\">\r\n            <div class=\"row\">\r\n                <img class=\"padding-0\" [src]=\"following.picURL\"\r\n                    style=\"width: 50px;float: left;border-radius: 50%;height: 50px;margin-left: 8px;cursor: pointer;\"\r\n                    [routerLink]=\"'/users/profile/'+following.userid\" routerLinkActive=\"active\">\r\n\r\n                <div class=\"padding-0\" style=\"font-size: 20px;margin-top: 13px;margin-left: 5px;cursor: pointer;\"\r\n                    [routerLink]=\"'/users/profile/'+following.userid\" routerLinkActive=\"active\"> {{following.name}}\r\n                </div>\r\n            </div>\r\n            <hr style=\"margin-top: 10px;\" *ngIf=\"followingList.length>1\" />\r\n        </div>\r\n\r\n    </div>\r\n</ng-template>\r\n<!-- End Modal -->","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { ModeService } from './mode.service';\r\nimport {IChat} from '../models/ichat'\r\n\r\nimport { map, filter, tap } from 'rxjs/operators';\r\nimport { Observable, Subscription } from 'rxjs';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserChatsService {\r\n\r\n  // chats:any\r\n  chats:IChat[]=[];\r\n  chat:{}[]=[];\r\n  private subscritionList:Subscription[]=[];\r\n  //chatTemp:IChat[]=[];//{id:'',sender:'',receiver:'',startDate:new Date(),messages:[]};\r\n  constructor(private modeService:ModeService, private firestore: AngularFirestore) { \r\n    this.chat=[]\r\n  }\r\n\r\n  getChats(userID:string): Observable<any>{  \r\n    return this.firestore.collection<IChat>('chat', ref => \r\n    ref.orderBy('startDate','asc'))\r\n  .snapshotChanges()\r\n  .pipe(map(chats => {\r\n    chats.forEach(chat =>{\r\n    if (chat) {\r\n      const data = chat.payload.doc.data();\r\n      const ID = chat.payload.doc.id;\r\n      if(data.receiver === userID ||  data.sender === userID){\r\n        this.chat.push({ID, ...data})\r\n      }\r\n      \r\n    }})\r\n    // console.log(\"ChatGet\",this.chat)\r\n      return [...this.chat];\r\n    }));\r\n\r\n  }\r\n   getUserChats(userID:string): Observable<any>{\r\n    // console.log(\"hgjhl;hlfghjk\")\r\n      return this.getChats(userID).pipe(map((chats,index) =>{\r\n         console.log(\"hhchats\",chats, \"index\",index)\r\n        chats.forEach((chat:any, index:number)=>{\r\n           // console.log(\"chatElem\",chat,\"index\",index)\r\n            this.subscritionList.push(this.firestore.collection(`chat/${chat.ID}/1`,ref => \r\n            ref.orderBy('date','asc')).valueChanges().subscribe(\r\n              (msgs:any)=> chats[index].messages = msgs\r\n              ))\r\n         })\r\n         \r\n         //console.log(\"After\",chats)\r\n         return [...chats]\r\n      }))\r\n       //console.log(\"before\",chats)\r\n       \r\n  }\r\n  ngOnDestroy(){\r\n    for(let sub of this.subscritionList){\r\n      sub?.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { Post } from '../models/post.model';\r\nimport { User } from '../models/user.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PostsService {\r\n  postsRef: AngularFirestoreCollection<Post>;\r\n  public allPosts: Post[] = []\r\n  public talentsPosts: Array<unknown> = []\r\n  private dbPath = '/post';\r\n  public dataPost: any;\r\n  public dataTalentPost: any;\r\n  users: User[] = [];\r\n  public dataUsers: any;\r\n\r\n  constructor(private firestore: AngularFirestore) {\r\n    this.postsRef = firestore.collection(this.dbPath);\r\n  }\r\n\r\n  getAllUserPosts(id:string): Observable<any> {\r\n    this.allPosts = [];\r\n    var docs;\r\n\r\n    return this.firestore.collection(\"/post\", ref => ref.where('owner.id', '==', id)).get().pipe(map(res => {\r\n      docs = res.docs\r\n      docs.forEach(el => {\r\n        this.dataPost = el.data()\r\n        this.allPosts.push(this.dataPost)\r\n      })\r\n      console.log(this.allPosts)\r\n      return this.allPosts;\r\n\r\n    }))\r\n  }\r\n\r\n  addPost(post: Post): any {\r\n    console.log(post)\r\n    return this.postsRef.doc(post.id).set({ ...post });\r\n  }\r\n\r\n  deletePost(id: string) {\r\n    return this.postsRef.doc(id).delete();\r\n  }\r\n\r\n  getAllPosts(): Observable<any> {\r\n    this.allPosts = [];\r\n    var docs;\r\n\r\n    return this.firestore.collection(\"/post\").get().pipe(map(res => {\r\n      docs = res.docs\r\n      docs.forEach(el => {\r\n        this.dataPost = el.data()\r\n        this.allPosts.push(this.dataPost)\r\n      })\r\n      console.log(this.allPosts)\r\n      return this.allPosts;\r\n\r\n    }))\r\n  }\r\n\r\n  getPostsOfTalent(talent: string): Observable<any> {\r\n    this.talentsPosts = [];\r\n    var docs;\r\n\r\n    return this.firestore.collection(\"/post\", ref => ref.where('talent', '==', talent)).get().pipe(map(res => {\r\n      docs = res.docs\r\n      console.log(res.docs)\r\n      docs.forEach(el => {\r\n        this.dataTalentPost = el.data()\r\n        this.talentsPosts.push(this.dataTalentPost)\r\n      })\r\n      // console.log(this.talentsPosts)\r\n      return this.talentsPosts;\r\n\r\n    }))\r\n  }\r\n\r\n  getUserById(id: string): Observable<any> {\r\n\r\n    this.users = [];\r\n    var docs;\r\n\r\n    return this.firestore.collection(\"/Users\", ref => ref.where('id', '==', id)).get().pipe(map(res => {\r\n      docs = res.docs\r\n      console.log(res.docs)\r\n      docs.forEach(el => {\r\n        this.dataUsers = el.data()\r\n        this.users.push(this.dataUsers)\r\n      })\r\n      // console.log(this.talentsPosts)\r\n      return this.users;\r\n\r\n    }))\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SearchServiceService {\r\n\r\n  InputVal: string = \"\";\r\n\r\n  constructor() { }\r\n\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { FireService } from 'src/app/services/fire.service';\r\nimport { SearchServiceService } from 'src/app/services/search-service.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-search',\r\n  templateUrl: './search.component.html',\r\n  styleUrls: ['./search.component.scss']\r\n})\r\nexport class SearchComponent implements OnInit {\r\n  userArr: any[] = [];\r\n\r\n  inputValFromService: string | null = \"\";\r\n\r\n  constructor(private fireService: FireService, private serchService: SearchServiceService, private actrout: ActivatedRoute) {\r\n\r\n    this.inputValFromService = this.serchService.InputVal;\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.actrout.paramMap.subscribe((param) => {\r\n      this.inputValFromService = param.get(\"Sq\")\r\n\r\n    })\r\n    this.fireService.getCollection(\"Users\").subscribe((res) => {\r\n      console.log(res);\r\n      this.userArr = res.filter((user) => {\r\n        return (user.firstName == this.inputValFromService) || (user.secondName == this.inputValFromService)\r\n      })\r\n      console.log(this.userArr)\r\n\r\n\r\n\r\n    })\r\n\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\n","<app-header></app-header>\r\n\r\n<div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n        <app-sidebar></app-sidebar>\r\n        <div class=\"col-7 col-sm-7 col-md-8 col-lg-8 my-2 mx-auto\">\r\n\r\n            <!-- <div *ngIf=\"talentsList!==[]\" class=\"nav nav-tabs bg-dark \" role=\"tablist\" id=\"nav-tab\" style=\"position: sticky;top:12%;\">\r\n                <a *ngFor=\"let item of talentsList\" class=\"nav-item nav-link col\" data-toggle=\"tab\" aria-selected=\"false\" (click)=\"selectcat(item.id)\" role=\"tab\" href=\"#jokes\" [ngStyle]=\"{'color': user.favColor}\"id=\"jokes-tab\">{{item.name}}</a>\r\n            </div> -->\r\n\r\n            <ul *ngIf=\"talentsList!==[]\" class=\"nav  ml-3 nav2 nav-tabs\" id=\"nav-tab\" role=\"tablist\"\r\n                    style=\"background-color: #F5F7F8;border-bottom: 2px solid;border-bottom-color:#d8352b;border-radius: 8px;box-shadow: 0px 0.5px 5px grey; width: 100%;margin-bottom: 2%;height: 5%;font-size: 17px;\">\r\n\r\n\r\n                    <li class=\"nav-item col padding-0\" *ngFor=\"let talent of talentsList\"\r\n                        (click)=\"selectcat(talent.id)\">\r\n                        <a class=\"nav-link\" data-toggle=\"tab\" aria-selected=\"false\" role=\"tab\"\r\n                            style=\"border-radius: 4px ;color: #d8352b;width: 100%;\">{{talent.name}}</a>\r\n                    </li>\r\n\r\n\r\n                </ul>\r\n\r\n            <div class=\" mx-auto my-1\">\r\n                <div class=\"my-5\" id=\"writePst\">\r\n                    <div class=\"firstRow\">\r\n                        <img [src]=\"user.picURL\">\r\n                        <input *ngIf=\"urls.length===0||urlsVideo.length===0\" type=\"text\" [(ngModel)]=\"postDesc\" [placeholder]=\"greating\" />\r\n                        <div class=\"p-2 ny-3\" *ngFor=\"let url of urls\">\r\n                            <audio controls=\"\" *ngIf=\"url\"> \r\n                                <source [src]=\"sanitize(url)\" type=\"audio/wav\">\r\n                            </audio>\r\n                        </div>\r\n                        <div class=\"container ny-3\" *ngFor=\"let url of urlsVideo\">\r\n                            <video controls=\"\" *ngIf=\"url\"> \r\n                                <source [src]=\"sanitize(url)\" type=\"video/mp4\">\r\n                            </video>\r\n                        </div>\r\n                    </div>\r\n                    <hr>\r\n                    <div class=\"secondRow\">\r\n                        <div class=\"live\">\r\n                            \r\n                            <!-- Audio recorder html -->\r\n                            <div style=\"display: inline-block;background-color: transparent;\">\r\n                               <button *ngIf=\"!isRecording\" style=\"display: inline-block;background-color: transparent;border: none;\" (click)=\"startRecording()\"><i [ngStyle]=\"{'color': user.favColor}\" class=\"fas fa-microphone-alt\"></i></button>\r\n                               <button *ngIf=\"isRecording\" style=\"display: inline-block;background-color: transparent;border: none;\" (click)=\"stopRecording()\"><i [ngStyle]=\"{'color': red}\" class=\"fas fa-microphone-alt\"></i></button>\r\n                            </div>\r\n                            <!-- startVideoRecording -->\r\n                            <div style=\"display: inline-block;background-color: transparent;\">\r\n                               <button *ngIf=\"!isRecordingVideo\" style=\"display: inline-block;background-color: transparent;border: none;\" (click)=\"startVideoRecording()\"><i [ngStyle]=\"{'color': user.favColor}\" class=\"fas fa-video\" ></i></button>\r\n                               <button *ngIf=\"isRecordingVideo\" style=\"display: inline-block;background-color: transparent;border: none;\" (click)=\"stopRecordingVideo()\"><i [ngStyle]=\"{'color': red}\" class=\"fas fa-video\"></i></button>\r\n                            </div>\r\n                            <i [ngStyle]=\"{'color': user.favColor}\" class=\"fas fa-paperclip\"></i>\r\n                            <input [ngStyle]=\"{'background-color': user.favColor}\" (click)=\"addPost(postDesc,urls,urlsVideo)\" class=\"postButt col-12\" type=\"button\" value=\"Post\">\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div class=\"Post\" id=\"post1\"  *ngFor=\"let post of postList;let i=index\">\r\n                <div class=\"dropdown \" style=\"float: right\">\r\n                    <button class=\"btn dropdown-toggle points\" id=\"menu1\" type=\"button\"\r\n                        data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><i\r\n                            class=\"fas fa-ellipsis-h\"  [ngStyle]=\"{'color': this.user.favColor}\"></i>\r\n                    </button>\r\n                    <ul class=\"dropdown-menu\" role=\"menu\">\r\n                        <li role=\"presentation\" style=\"padding-left:9px;\">\r\n                            <button (click)=\"bookmarkpost(post)\" style=\"color: black;background-color: transparent;border: none;cursor: pointer;\">\r\n                                <i class=\"fas fa-bookmark\"\r\n                                    style=\"font-size: 16px;color: #d8352b;margin-right: 5px;\"></i>\r\n                                Bookmark this post</button>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div class=\"poster\">\r\n                    <img [src]=\"post.owner.picURL\" [routerLink]=\"'/users/profile/'+post.owner.id\">\r\n                    <div id=\"posterName\" [routerLink]=\"'/users/profile/'+post.owner.id\">{{post.owner.name}}</div>\r\n                    <div id=\"time\">{{post.date.seconds * 1000 | date:'dd-MM-yyyy HH-mm'}} <i class=\"fas fa-globe-africa\"></i></div>\r\n                </div>\r\n\r\n                <span style=\"padding: 2%;\" *ngIf=\"post.description\">{{post.description}}</span>\r\n                <!-- <span style=\"padding: 2%;\" *ngIf=\"post.image.length>0\"><img *ngFor=\"let item of post.image;\" [src]=\"item.\" class=\"img-fluid ${3|rounded-top,rounded-right,rounded-bottom,rounded-left,rounded-circle,|}\" alt=\"\"></span> -->\r\n                <img [src]=\"post.image[0]\" *ngIf=\"post.image[0]\" style=\"width: 100%;\">\r\n                <span *ngFor=\"let item of post.audio\">\r\n                    <div class=\"container-audio\">\r\n                        <audio controls loop autoplay>\r\n                            <source [src]=\"sanitize(item)\" type=\"audio/ogg\">\r\n                            Your browser dose not Support the audio Tag\r\n                        </audio>\r\n                    </div>\r\n                </span>\r\n\r\n                <hr style=\"margin-top: 15px;\">\r\n                <div class=\"lastRowPost\">\r\n                    <div id=\"like\" (click)=\"addLike(post)\">\r\n                        <i class=\"far fa-thumbs-up\" id=\"likeIcon\"></i>\r\n                        <span id=\"likeCont\">\r\n                            Like <span class=\"badge badge-pill badge-light\">{{LikesList[i].length}}</span>\r\n                        </span>\r\n                    </div>\r\n                    <div id=\"comment\" >\r\n                        <i class=\"fas fa-microphone-alt\"></i>\r\n                        <span id=\"commentCont\">\r\n                            Voice\r\n                        </span>\r\n                    </div>\r\n                    <div id=\"comment\" (click)=\"addComment(post,i)\">\r\n                        <i class=\"far fa-comment-alt\" id=\"commentIcon\"></i>\r\n                        <span id=\"commentCont\">\r\n                             Comment <span class=\"badge badge-pill badge-light\">{{commentsList[i].length}}</span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div id=\"writecomnt\">\r\n                    <hr style=\"margin-top: 55px;margin-bottom: 10px\">\r\n                    <div class=\"firstRow\">\r\n                        <img [src]=\"user.picURL\">\r\n                        <input [(ngModel)]=\"postcomfields[i]\" type=\"text\" placeholder=\"Write a comment...\" class=\"cmntInput\" />\r\n                    </div>\r\n\r\n                </div>\r\n\r\n             <div  *ngFor=\"let item of commentsList[i]\" class=\"my-2 mx-3 mt-3\" style=\"width: 70%;margin-left: 3.5%;\">\t             \r\n                        <img style=\"width: 6%;height: 6%;float: left;border-radius: 50%;\" [src]=\"item.writer.picURL\"> \t                       \r\n                        <div class=\"pl-2\" style=\"background-color:#F0F2F5;border-radius: 10px;margin-left: 5.5%;\">\r\n                        <div><small id=\"posterName\">{{item.writer.name}}</small>\r\n                            <small style=\"display: block;font-size: 10px;\">\r\n                                {{item.date | date:'dd-MM-yyyy hh:mm'}}</small>\r\n                        </div>\r\n                        <span style=\"font-weight: 400;\">{{item.description}}</span>\r\n                    </div>                        \r\n              </div>\r\n\r\n            </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>","export class Post {\r\n    constructor(\r\n        public id: string = \"\",\r\n        public owner = {\r\n            id: \"\",\r\n            name: \"\",\r\n            picURL: \"\"\r\n        },\r\n        public audio: string = \"\",\r\n        public video: string = \"\",\r\n        public date: Date = new Date(),\r\n        public description: string = \"\",\r\n        public image: string[] = [],\r\n        public talent: string = \"\",\r\n        public likes: any[] = [],\r\n        public comments: any[] = []\r\n    ) { }\r\n\r\n}\r\n","'use strict';\r\n\r\n// Last time updated: 2020-05-17 5:04:38 PM UTC\r\n\r\n// ________________\r\n// RecordRTC v5.6.1\r\n\r\n// Open-Sourced: https://github.com/muaz-khan/RecordRTC\r\n\r\n// --------------------------------------------------\r\n// Muaz Khan     - www.MuazKhan.com\r\n// MIT License   - www.WebRTC-Experiment.com/licence\r\n// --------------------------------------------------\r\n\r\n// ____________\r\n// RecordRTC.js\r\n\r\n/**\r\n * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. \r\n * @summary Record audio, video or screen inside the browser.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTC\r\n * @class\r\n * @example\r\n * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {\r\n *     type: 'video', // audio or video or gif or canvas\r\n *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc\r\n * });\r\n * recorder.startRecording();\r\n * @see For further information:\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\r\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}\r\n */\r\n\r\nfunction RecordRTC(mediaStream, config) {\r\n    if (!mediaStream) {\r\n        throw 'First parameter is required.';\r\n    }\r\n\r\n    config = config || {\r\n        type: 'video'\r\n    };\r\n\r\n    config = new RecordRTCConfiguration(mediaStream, config);\r\n\r\n    // a reference to user's recordRTC object\r\n    var self = this;\r\n\r\n    function startRecording(config2) {\r\n        if (!config.disableLogs) {\r\n            console.log('RecordRTC version: ', self.version);\r\n        }\r\n\r\n        if (!!config2) {\r\n            // allow users to set options using startRecording method\r\n            // config2 is similar to main \"config\" object (second parameter over RecordRTC constructor)\r\n            config = new RecordRTCConfiguration(mediaStream, config2);\r\n        }\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('started recording ' + config.type + ' stream.');\r\n        }\r\n\r\n        if (mediaRecorder) {\r\n            mediaRecorder.clearRecordedData();\r\n            mediaRecorder.record();\r\n\r\n            setState('recording');\r\n\r\n            if (self.recordingDuration) {\r\n                handleRecordingDuration();\r\n            }\r\n            return self;\r\n        }\r\n\r\n        initRecorder(function() {\r\n            if (self.recordingDuration) {\r\n                handleRecordingDuration();\r\n            }\r\n        });\r\n\r\n        return self;\r\n    }\r\n\r\n    function initRecorder(initCallback) {\r\n        if (initCallback) {\r\n            config.initCallback = function() {\r\n                initCallback();\r\n                initCallback = config.initCallback = null; // recorder.initRecorder should be call-backed once.\r\n            };\r\n        }\r\n\r\n        var Recorder = new GetRecorderType(mediaStream, config);\r\n\r\n        mediaRecorder = new Recorder(mediaStream, config);\r\n        mediaRecorder.record();\r\n\r\n        setState('recording');\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Initialized recorderType:', mediaRecorder.constructor.name, 'for output-type:', config.type);\r\n        }\r\n    }\r\n\r\n    function stopRecording(callback) {\r\n        callback = callback || function() {};\r\n\r\n        if (!mediaRecorder) {\r\n            warningLog();\r\n            return;\r\n        }\r\n\r\n        if (self.state === 'paused') {\r\n            self.resumeRecording();\r\n\r\n            setTimeout(function() {\r\n                stopRecording(callback);\r\n            }, 1);\r\n            return;\r\n        }\r\n\r\n        if (self.state !== 'recording' && !config.disableLogs) {\r\n            console.warn('Recording state should be: \"recording\", however current state is: ', self.state);\r\n        }\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Stopped recording ' + config.type + ' stream.');\r\n        }\r\n\r\n        if (config.type !== 'gif') {\r\n            mediaRecorder.stop(_callback);\r\n        } else {\r\n            mediaRecorder.stop();\r\n            _callback();\r\n        }\r\n\r\n        setState('stopped');\r\n\r\n        function _callback(__blob) {\r\n            if (!mediaRecorder) {\r\n                if (typeof callback.call === 'function') {\r\n                    callback.call(self, '');\r\n                } else {\r\n                    callback('');\r\n                }\r\n                return;\r\n            }\r\n\r\n            Object.keys(mediaRecorder).forEach(function(key) {\r\n                if (typeof mediaRecorder[key] === 'function') {\r\n                    return;\r\n                }\r\n\r\n                self[key] = mediaRecorder[key];\r\n            });\r\n\r\n            var blob = mediaRecorder.blob;\r\n\r\n            if (!blob) {\r\n                if (__blob) {\r\n                    mediaRecorder.blob = blob = __blob;\r\n                } else {\r\n                    throw 'Recording failed.';\r\n                }\r\n            }\r\n\r\n            if (blob && !config.disableLogs) {\r\n                console.log(blob.type, '->', bytesToSize(blob.size));\r\n            }\r\n\r\n            if (callback) {\r\n                var url;\r\n\r\n                try {\r\n                    url = URL.createObjectURL(blob);\r\n                } catch (e) {}\r\n\r\n                if (typeof callback.call === 'function') {\r\n                    callback.call(self, url);\r\n                } else {\r\n                    callback(url);\r\n                }\r\n            }\r\n\r\n            if (!config.autoWriteToDisk) {\r\n                return;\r\n            }\r\n\r\n            getDataURL(function(dataURL) {\r\n                var parameter = {};\r\n                parameter[config.type + 'Blob'] = dataURL;\r\n                DiskStorage.Store(parameter);\r\n            });\r\n        }\r\n    }\r\n\r\n    function pauseRecording() {\r\n        if (!mediaRecorder) {\r\n            warningLog();\r\n            return;\r\n        }\r\n\r\n        if (self.state !== 'recording') {\r\n            if (!config.disableLogs) {\r\n                console.warn('Unable to pause the recording. Recording state: ', self.state);\r\n            }\r\n            return;\r\n        }\r\n\r\n        setState('paused');\r\n\r\n        mediaRecorder.pause();\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Paused recording.');\r\n        }\r\n    }\r\n\r\n    function resumeRecording() {\r\n        if (!mediaRecorder) {\r\n            warningLog();\r\n            return;\r\n        }\r\n\r\n        if (self.state !== 'paused') {\r\n            if (!config.disableLogs) {\r\n                console.warn('Unable to resume the recording. Recording state: ', self.state);\r\n            }\r\n            return;\r\n        }\r\n\r\n        setState('recording');\r\n\r\n        // not all libs have this method yet\r\n        mediaRecorder.resume();\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Resumed recording.');\r\n        }\r\n    }\r\n\r\n    function readFile(_blob) {\r\n        postMessage(new FileReaderSync().readAsDataURL(_blob));\r\n    }\r\n\r\n    function getDataURL(callback, _mediaRecorder) {\r\n        if (!callback) {\r\n            throw 'Pass a callback function over getDataURL.';\r\n        }\r\n\r\n        var blob = _mediaRecorder ? _mediaRecorder.blob : (mediaRecorder || {}).blob;\r\n\r\n        if (!blob) {\r\n            if (!config.disableLogs) {\r\n                console.warn('Blob encoder did not finish its job yet.');\r\n            }\r\n\r\n            setTimeout(function() {\r\n                getDataURL(callback, _mediaRecorder);\r\n            }, 1000);\r\n            return;\r\n        }\r\n\r\n        if (typeof Worker !== 'undefined' && !navigator.mozGetUserMedia) {\r\n            var webWorker = processInWebWorker(readFile);\r\n\r\n            webWorker.onmessage = function(event) {\r\n                callback(event.data);\r\n            };\r\n\r\n            webWorker.postMessage(blob);\r\n        } else {\r\n            var reader = new FileReader();\r\n            reader.readAsDataURL(blob);\r\n            reader.onload = function(event) {\r\n                callback(event.target.result);\r\n            };\r\n        }\r\n\r\n        function processInWebWorker(_function) {\r\n            try {\r\n                var blob = URL.createObjectURL(new Blob([_function.toString(),\r\n                    'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n                ], {\r\n                    type: 'application/javascript'\r\n                }));\r\n\r\n                var worker = new Worker(blob);\r\n                URL.revokeObjectURL(blob);\r\n                return worker;\r\n            } catch (e) {}\r\n        }\r\n    }\r\n\r\n    function handleRecordingDuration(counter) {\r\n        counter = counter || 0;\r\n\r\n        if (self.state === 'paused') {\r\n            setTimeout(function() {\r\n                handleRecordingDuration(counter);\r\n            }, 1000);\r\n            return;\r\n        }\r\n\r\n        if (self.state === 'stopped') {\r\n            return;\r\n        }\r\n\r\n        if (counter >= self.recordingDuration) {\r\n            stopRecording(self.onRecordingStopped);\r\n            return;\r\n        }\r\n\r\n        counter += 1000; // 1-second\r\n\r\n        setTimeout(function() {\r\n            handleRecordingDuration(counter);\r\n        }, 1000);\r\n    }\r\n\r\n    function setState(state) {\r\n        if (!self) {\r\n            return;\r\n        }\r\n\r\n        self.state = state;\r\n\r\n        if (typeof self.onStateChanged.call === 'function') {\r\n            self.onStateChanged.call(self, state);\r\n        } else {\r\n            self.onStateChanged(state);\r\n        }\r\n    }\r\n\r\n    var WARNING = 'It seems that recorder is destroyed or \"startRecording\" is not invoked for ' + config.type + ' recorder.';\r\n\r\n    function warningLog() {\r\n        if (config.disableLogs === true) {\r\n            return;\r\n        }\r\n\r\n        console.warn(WARNING);\r\n    }\r\n\r\n    var mediaRecorder;\r\n\r\n    var returnObject = {\r\n        /**\r\n         * This method starts the recording.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * var recorder = RecordRTC(mediaStream, {\r\n         *     type: 'video'\r\n         * });\r\n         * recorder.startRecording();\r\n         */\r\n        startRecording: startRecording,\r\n\r\n        /**\r\n         * This method stops the recording. It is strongly recommended to get \"blob\" or \"URI\" inside the callback to make sure all recorders finished their job.\r\n         * @param {function} callback - Callback to get the recorded blob.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     // use either \"this\" or \"recorder\" object; both are identical\r\n         *     video.src = this.toURL();\r\n         *     var blob = this.getBlob();\r\n         * });\r\n         */\r\n        stopRecording: stopRecording,\r\n\r\n        /**\r\n         * This method pauses the recording. You can resume recording using \"resumeRecording\" method.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo Firefox is unable to pause the recording. Fix it.\r\n         * @example\r\n         * recorder.pauseRecording();  // pause the recording\r\n         * recorder.resumeRecording(); // resume again\r\n         */\r\n        pauseRecording: pauseRecording,\r\n\r\n        /**\r\n         * This method resumes the recording.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.pauseRecording();  // first of all, pause the recording\r\n         * recorder.resumeRecording(); // now resume it\r\n         */\r\n        resumeRecording: resumeRecording,\r\n\r\n        /**\r\n         * This method initializes the recording.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo This method should be deprecated.\r\n         * @example\r\n         * recorder.initRecorder();\r\n         */\r\n        initRecorder: initRecorder,\r\n\r\n        /**\r\n         * Ask RecordRTC to auto-stop the recording after 5 minutes.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * var fiveMinutes = 5 * 1000 * 60;\r\n         * recorder.setRecordingDuration(fiveMinutes, function() {\r\n         *    var blob = this.getBlob();\r\n         *    video.src = this.toURL();\r\n         * });\r\n         * \r\n         * // or otherwise\r\n         * recorder.setRecordingDuration(fiveMinutes).onRecordingStopped(function() {\r\n         *    var blob = this.getBlob();\r\n         *    video.src = this.toURL();\r\n         * });\r\n         */\r\n        setRecordingDuration: function(recordingDuration, callback) {\r\n            if (typeof recordingDuration === 'undefined') {\r\n                throw 'recordingDuration is required.';\r\n            }\r\n\r\n            if (typeof recordingDuration !== 'number') {\r\n                throw 'recordingDuration must be a number.';\r\n            }\r\n\r\n            self.recordingDuration = recordingDuration;\r\n            self.onRecordingStopped = callback || function() {};\r\n\r\n            return {\r\n                onRecordingStopped: function(callback) {\r\n                    self.onRecordingStopped = callback;\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         * This method can be used to clear/reset all the recorded data.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo Figure out the difference between \"reset\" and \"clearRecordedData\" methods.\r\n         * @example\r\n         * recorder.clearRecordedData();\r\n         */\r\n        clearRecordedData: function() {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            mediaRecorder.clearRecordedData();\r\n\r\n            if (!config.disableLogs) {\r\n                console.log('Cleared old recorded data.');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get the recorded blob. Use this method inside the \"stopRecording\" callback.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     var blob = this.getBlob();\r\n         *\r\n         *     var file = new File([blob], 'filename.webm', {\r\n         *         type: 'video/webm'\r\n         *     });\r\n         *\r\n         *     var formData = new FormData();\r\n         *     formData.append('file', file); // upload \"File\" object rather than a \"Blob\"\r\n         *     uploadToServer(formData);\r\n         * });\r\n         * @returns {Blob} Returns recorded data as \"Blob\" object.\r\n         */\r\n        getBlob: function() {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            return mediaRecorder.blob;\r\n        },\r\n\r\n        /**\r\n         * Get data-URI instead of Blob.\r\n         * @param {function} callback - Callback to get the Data-URI.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     recorder.getDataURL(function(dataURI) {\r\n         *         video.src = dataURI;\r\n         *     });\r\n         * });\r\n         */\r\n        getDataURL: getDataURL,\r\n\r\n        /**\r\n         * Get virtual/temporary URL. Usage of this URL is limited to current tab.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     video.src = this.toURL();\r\n         * });\r\n         * @returns {String} Returns a virtual/temporary URL for the recorded \"Blob\".\r\n         */\r\n        toURL: function() {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            return URL.createObjectURL(mediaRecorder.blob);\r\n        },\r\n\r\n        /**\r\n         * Get internal recording object (i.e. internal module) e.g. MutliStreamRecorder, MediaStreamRecorder, StereoAudioRecorder or WhammyRecorder etc.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * var internalRecorder = recorder.getInternalRecorder();\r\n         * if(internalRecorder instanceof MultiStreamRecorder) {\r\n         *     internalRecorder.addStreams([newAudioStream]);\r\n         *     internalRecorder.resetVideoStreams([screenStream]);\r\n         * }\r\n         * @returns {Object} Returns internal recording object.\r\n         */\r\n        getInternalRecorder: function() {\r\n            return mediaRecorder;\r\n        },\r\n\r\n        /**\r\n         * Invoke save-as dialog to save the recorded blob into your disk.\r\n         * @param {string} fileName - Set your own file name.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     this.save('file-name');\r\n         *\r\n         *     // or manually:\r\n         *     invokeSaveAsDialog(this.getBlob(), 'filename.webm');\r\n         * });\r\n         */\r\n        save: function(fileName) {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            invokeSaveAsDialog(mediaRecorder.blob, fileName);\r\n        },\r\n\r\n        /**\r\n         * This method gets a blob from indexed-DB storage.\r\n         * @param {function} callback - Callback to get the recorded blob.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.getFromDisk(function(dataURL) {\r\n         *     video.src = dataURL;\r\n         * });\r\n         */\r\n        getFromDisk: function(callback) {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            RecordRTC.getFromDisk(config.type, callback);\r\n        },\r\n\r\n        /**\r\n         * This method appends an array of webp images to the recorded video-blob. It takes an \"array\" object.\r\n         * @type {Array.<Array>}\r\n         * @param {Array} arrayOfWebPImages - Array of webp images.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo This method should be deprecated.\r\n         * @example\r\n         * var arrayOfWebPImages = [];\r\n         * arrayOfWebPImages.push({\r\n         *     duration: index,\r\n         *     image: 'data:image/webp;base64,...'\r\n         * });\r\n         * recorder.setAdvertisementArray(arrayOfWebPImages);\r\n         */\r\n        setAdvertisementArray: function(arrayOfWebPImages) {\r\n            config.advertisement = [];\r\n\r\n            var length = arrayOfWebPImages.length;\r\n            for (var i = 0; i < length; i++) {\r\n                config.advertisement.push({\r\n                    duration: i,\r\n                    image: arrayOfWebPImages[i]\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * It is equivalent to <code class=\"str\">\"recorder.getBlob()\"</code> method. Usage of \"getBlob\" is recommended, though.\r\n         * @property {Blob} blob - Recorded Blob can be accessed using this property.\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     var blob = this.blob;\r\n         *\r\n         *     // below one is recommended\r\n         *     var blob = this.getBlob();\r\n         * });\r\n         */\r\n        blob: null,\r\n\r\n        /**\r\n         * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\r\n         * @property {number} bufferSize - Buffer-size used to encode the WAV container\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     alert('Recorder used this buffer-size: ' + this.bufferSize);\r\n         * });\r\n         */\r\n        bufferSize: 0,\r\n\r\n        /**\r\n         * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\r\n         * @property {number} sampleRate - Sample-rates used to encode the WAV container\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     alert('Recorder used these sample-rates: ' + this.sampleRate);\r\n         * });\r\n         */\r\n        sampleRate: 0,\r\n\r\n        /**\r\n         * {recorderType:StereoAudioRecorder} returns ArrayBuffer object.\r\n         * @property {ArrayBuffer} buffer - Audio ArrayBuffer, supported only in Chrome.\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     var arrayBuffer = this.buffer;\r\n         *     alert(arrayBuffer.byteLength);\r\n         * });\r\n         */\r\n        buffer: null,\r\n\r\n        /**\r\n         * This method resets the recorder. So that you can reuse single recorder instance many times.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.reset();\r\n         * recorder.startRecording();\r\n         */\r\n        reset: function() {\r\n            if (self.state === 'recording' && !config.disableLogs) {\r\n                console.warn('Stop an active recorder.');\r\n            }\r\n\r\n            if (mediaRecorder && typeof mediaRecorder.clearRecordedData === 'function') {\r\n                mediaRecorder.clearRecordedData();\r\n            }\r\n            mediaRecorder = null;\r\n            setState('inactive');\r\n            self.blob = null;\r\n        },\r\n\r\n        /**\r\n         * This method is called whenever recorder's state changes. Use this as an \"event\".\r\n         * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.onStateChanged = function(state) {\r\n         *     console.log('Recorder state: ', state);\r\n         * };\r\n         */\r\n        onStateChanged: function(state) {\r\n            if (!config.disableLogs) {\r\n                console.log('Recorder state changed:', state);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * A recorder can have inactive, recording, paused or stopped states.\r\n         * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\r\n         * @memberof RecordRTC\r\n         * @static\r\n         * @readonly\r\n         * @example\r\n         * // this looper function will keep you updated about the recorder's states.\r\n         * (function looper() {\r\n         *     document.querySelector('h1').innerHTML = 'Recorder\\'s state is: ' + recorder.state;\r\n         *     if(recorder.state === 'stopped') return; // ignore+stop\r\n         *     setTimeout(looper, 1000); // update after every 3-seconds\r\n         * })();\r\n         * recorder.startRecording();\r\n         */\r\n        state: 'inactive',\r\n\r\n        /**\r\n         * Get recorder's readonly state.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @example\r\n         * var state = recorder.getState();\r\n         * @returns {String} Returns recording state.\r\n         */\r\n        getState: function() {\r\n            return self.state;\r\n        },\r\n\r\n        /**\r\n         * Destroy RecordRTC instance. Clear all recorders and objects.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @example\r\n         * recorder.destroy();\r\n         */\r\n        destroy: function() {\r\n            var disableLogsCache = config.disableLogs;\r\n\r\n            config = {\r\n                disableLogs: true\r\n            };\r\n            self.reset();\r\n            setState('destroyed');\r\n            returnObject = self = null;\r\n\r\n            if (Storage.AudioContextConstructor) {\r\n                Storage.AudioContextConstructor.close();\r\n                Storage.AudioContextConstructor = null;\r\n            }\r\n\r\n            config.disableLogs = disableLogsCache;\r\n\r\n            if (!config.disableLogs) {\r\n                console.log('RecordRTC is destroyed.');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * RecordRTC version number\r\n         * @property {String} version - Release version number.\r\n         * @memberof RecordRTC\r\n         * @static\r\n         * @readonly\r\n         * @example\r\n         * alert(recorder.version);\r\n         */\r\n        version: '5.6.1'\r\n    };\r\n\r\n    if (!this) {\r\n        self = returnObject;\r\n        return returnObject;\r\n    }\r\n\r\n    // if someone wants to use RecordRTC with the \"new\" keyword.\r\n    for (var prop in returnObject) {\r\n        this[prop] = returnObject[prop];\r\n    }\r\n\r\n    self = this;\r\n\r\n    return returnObject;\r\n}\r\n\r\nRecordRTC.version = '5.6.1';\r\n\r\nif (typeof module !== 'undefined' /* && !!module.exports*/ ) {\r\n    module.exports = RecordRTC;\r\n}\r\n\r\nif (typeof define === 'function' && define.amd) {\r\n    define('RecordRTC', [], function() {\r\n        return RecordRTC;\r\n    });\r\n}\n\r\nRecordRTC.getFromDisk = function(type, callback) {\r\n    if (!callback) {\r\n        throw 'callback is mandatory.';\r\n    }\r\n\r\n    console.log('Getting recorded ' + (type === 'all' ? 'blobs' : type + ' blob ') + ' from disk!');\r\n    DiskStorage.Fetch(function(dataURL, _type) {\r\n        if (type !== 'all' && _type === type + 'Blob' && callback) {\r\n            callback(dataURL);\r\n        }\r\n\r\n        if (type === 'all' && callback) {\r\n            callback(dataURL, _type.replace('Blob', ''));\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * This method can be used to store recorded blobs into IndexedDB storage.\r\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\r\n * @method\r\n * @memberof RecordRTC\r\n * @example\r\n * RecordRTC.writeToDisk({\r\n *     audio: audioBlob,\r\n *     video: videoBlob,\r\n *     gif  : gifBlob\r\n * });\r\n */\r\nRecordRTC.writeToDisk = function(options) {\r\n    console.log('Writing recorded blob(s) to disk!');\r\n    options = options || {};\r\n    if (options.audio && options.video && options.gif) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            options.video.getDataURL(function(videoDataURL) {\r\n                options.gif.getDataURL(function(gifDataURL) {\r\n                    DiskStorage.Store({\r\n                        audioBlob: audioDataURL,\r\n                        videoBlob: videoDataURL,\r\n                        gifBlob: gifDataURL\r\n                    });\r\n                });\r\n            });\r\n        });\r\n    } else if (options.audio && options.video) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            options.video.getDataURL(function(videoDataURL) {\r\n                DiskStorage.Store({\r\n                    audioBlob: audioDataURL,\r\n                    videoBlob: videoDataURL\r\n                });\r\n            });\r\n        });\r\n    } else if (options.audio && options.gif) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            options.gif.getDataURL(function(gifDataURL) {\r\n                DiskStorage.Store({\r\n                    audioBlob: audioDataURL,\r\n                    gifBlob: gifDataURL\r\n                });\r\n            });\r\n        });\r\n    } else if (options.video && options.gif) {\r\n        options.video.getDataURL(function(videoDataURL) {\r\n            options.gif.getDataURL(function(gifDataURL) {\r\n                DiskStorage.Store({\r\n                    videoBlob: videoDataURL,\r\n                    gifBlob: gifDataURL\r\n                });\r\n            });\r\n        });\r\n    } else if (options.audio) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            DiskStorage.Store({\r\n                audioBlob: audioDataURL\r\n            });\r\n        });\r\n    } else if (options.video) {\r\n        options.video.getDataURL(function(videoDataURL) {\r\n            DiskStorage.Store({\r\n                videoBlob: videoDataURL\r\n            });\r\n        });\r\n    } else if (options.gif) {\r\n        options.gif.getDataURL(function(gifDataURL) {\r\n            DiskStorage.Store({\r\n                gifBlob: gifDataURL\r\n            });\r\n        });\r\n    }\r\n};\n\r\n// __________________________\r\n// RecordRTC-Configuration.js\r\n\r\n/**\r\n * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.\r\n * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid \"config\" object.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTCConfiguration\r\n * @class\r\n * @example\r\n * var options = RecordRTCConfiguration(mediaStream, options);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}\r\n */\r\n\r\nfunction RecordRTCConfiguration(mediaStream, config) {\r\n    if (!config.recorderType && !config.type) {\r\n        if (!!config.audio && !!config.video) {\r\n            config.type = 'video';\r\n        } else if (!!config.audio && !config.video) {\r\n            config.type = 'audio';\r\n        }\r\n    }\r\n\r\n    if (config.recorderType && !config.type) {\r\n        if (config.recorderType === WhammyRecorder || config.recorderType === CanvasRecorder || (typeof WebAssemblyRecorder !== 'undefined' && config.recorderType === WebAssemblyRecorder)) {\r\n            config.type = 'video';\r\n        } else if (config.recorderType === GifRecorder) {\r\n            config.type = 'gif';\r\n        } else if (config.recorderType === StereoAudioRecorder) {\r\n            config.type = 'audio';\r\n        } else if (config.recorderType === MediaStreamRecorder) {\r\n            if (getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\r\n                config.type = 'video';\r\n            } else if (!getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\r\n                config.type = 'video';\r\n            } else if (getTracks(mediaStream, 'audio').length && !getTracks(mediaStream, 'video').length) {\r\n                config.type = 'audio';\r\n            } else {\r\n                // config.type = 'UnKnown';\r\n            }\r\n        }\r\n    }\r\n\r\n    if (typeof MediaStreamRecorder !== 'undefined' && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\r\n        if (!config.mimeType) {\r\n            config.mimeType = 'video/webm';\r\n        }\r\n\r\n        if (!config.type) {\r\n            config.type = config.mimeType.split('/')[0];\r\n        }\r\n\r\n        if (!config.bitsPerSecond) {\r\n            // config.bitsPerSecond = 128000;\r\n        }\r\n    }\r\n\r\n    // consider default type=audio\r\n    if (!config.type) {\r\n        if (config.mimeType) {\r\n            config.type = config.mimeType.split('/')[0];\r\n        }\r\n        if (!config.type) {\r\n            config.type = 'audio';\r\n        }\r\n    }\r\n\r\n    return config;\r\n}\n\r\n// __________________\r\n// GetRecorderType.js\r\n\r\n/**\r\n * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.\r\n * @summary It returns best recorder-type available for your browser.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef GetRecorderType\r\n * @class\r\n * @example\r\n * var RecorderType = GetRecorderType(options);\r\n * var recorder = new RecorderType(options);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\r\n */\r\n\r\nfunction GetRecorderType(mediaStream, config) {\r\n    var recorder;\r\n\r\n    // StereoAudioRecorder can work with all three: Edge, Firefox and Chrome\r\n    // todo: detect if it is Edge, then auto use: StereoAudioRecorder\r\n    if (isChrome || isEdge || isOpera) {\r\n        // Media Stream Recording API has not been implemented in chrome yet;\r\n        // That's why using WebAudio API to record stereo audio in WAV format\r\n        recorder = StereoAudioRecorder;\r\n    }\r\n\r\n    if (typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype && !isChrome) {\r\n        recorder = MediaStreamRecorder;\r\n    }\r\n\r\n    // video recorder (in WebM format)\r\n    if (config.type === 'video' && (isChrome || isOpera)) {\r\n        recorder = WhammyRecorder;\r\n\r\n        if (typeof WebAssemblyRecorder !== 'undefined' && typeof ReadableStream !== 'undefined') {\r\n            recorder = WebAssemblyRecorder;\r\n        }\r\n    }\r\n\r\n    // video recorder (in Gif format)\r\n    if (config.type === 'gif') {\r\n        recorder = GifRecorder;\r\n    }\r\n\r\n    // html2canvas recording!\r\n    if (config.type === 'canvas') {\r\n        recorder = CanvasRecorder;\r\n    }\r\n\r\n    if (isMediaRecorderCompatible() && recorder !== CanvasRecorder && recorder !== GifRecorder && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\r\n        if (getTracks(mediaStream, 'video').length || getTracks(mediaStream, 'audio').length) {\r\n            // audio-only recording\r\n            if (config.type === 'audio') {\r\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('audio/webm')) {\r\n                    recorder = MediaStreamRecorder;\r\n                }\r\n                // else recorder = StereoAudioRecorder;\r\n            } else {\r\n                // video or screen tracks\r\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('video/webm')) {\r\n                    recorder = MediaStreamRecorder;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (mediaStream instanceof Array && mediaStream.length) {\r\n        recorder = MultiStreamRecorder;\r\n    }\r\n\r\n    if (config.recorderType) {\r\n        recorder = config.recorderType;\r\n    }\r\n\r\n    if (!config.disableLogs && !!recorder && !!recorder.name) {\r\n        console.log('Using recorderType:', recorder.name || recorder.constructor.name);\r\n    }\r\n\r\n    if (!recorder && isSafari) {\r\n        recorder = MediaStreamRecorder;\r\n    }\r\n\r\n    return recorder;\r\n}\n\r\n// _____________\r\n// MRecordRTC.js\r\n\r\n/**\r\n * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.\r\n * @summary MRecordRTC stands for \"Multiple-RecordRTC\".\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef MRecordRTC\r\n * @class\r\n * @example\r\n * var recorder = new MRecordRTC();\r\n * recorder.addStream(MediaStream);\r\n * recorder.mediaType = {\r\n *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder\r\n *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\r\n *     gif: true    // or GifRecorder\r\n * };\r\n * // mimeType is optional and should be set only in advance cases.\r\n * recorder.mimeType = {\r\n *     audio: 'audio/wav',\r\n *     video: 'video/webm',\r\n *     gif:   'image/gif'\r\n * };\r\n * recorder.startRecording();\r\n * @see For further information:\r\n * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @requires {@link RecordRTC}\r\n */\r\n\r\nfunction MRecordRTC(mediaStream) {\r\n\r\n    /**\r\n     * This method attaches MediaStream object to {@link MRecordRTC}.\r\n     * @param {MediaStream} mediaStream - A MediaStream object, either fetched using getUserMedia API, or generated using captureStreamUntilEnded or WebAudio API.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.addStream(MediaStream);\r\n     */\r\n    this.addStream = function(_mediaStream) {\r\n        if (_mediaStream) {\r\n            mediaStream = _mediaStream;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This property can be used to set the recording type e.g. audio, or video, or gif, or canvas.\r\n     * @property {object} mediaType - {audio: true, video: true, gif: true}\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * var recorder = new MRecordRTC();\r\n     * recorder.mediaType = {\r\n     *     audio: true, // TRUE or StereoAudioRecorder or MediaStreamRecorder\r\n     *     video: true, // TRUE or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\r\n     *     gif  : true  // TRUE or GifRecorder\r\n     * };\r\n     */\r\n    this.mediaType = {\r\n        audio: true,\r\n        video: true\r\n    };\r\n\r\n    /**\r\n     * This method starts recording.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.startRecording();\r\n     */\r\n    this.startRecording = function() {\r\n        var mediaType = this.mediaType;\r\n        var recorderType;\r\n        var mimeType = this.mimeType || {\r\n            audio: null,\r\n            video: null,\r\n            gif: null\r\n        };\r\n\r\n        if (typeof mediaType.audio !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'audio').length) {\r\n            mediaType.audio = false;\r\n        }\r\n\r\n        if (typeof mediaType.video !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\r\n            mediaType.video = false;\r\n        }\r\n\r\n        if (typeof mediaType.gif !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\r\n            mediaType.gif = false;\r\n        }\r\n\r\n        if (!mediaType.audio && !mediaType.video && !mediaType.gif) {\r\n            throw 'MediaStream must have either audio or video tracks.';\r\n        }\r\n\r\n        if (!!mediaType.audio) {\r\n            recorderType = null;\r\n            if (typeof mediaType.audio === 'function') {\r\n                recorderType = mediaType.audio;\r\n            }\r\n\r\n            this.audioRecorder = new RecordRTC(mediaStream, {\r\n                type: 'audio',\r\n                bufferSize: this.bufferSize,\r\n                sampleRate: this.sampleRate,\r\n                numberOfAudioChannels: this.numberOfAudioChannels || 2,\r\n                disableLogs: this.disableLogs,\r\n                recorderType: recorderType,\r\n                mimeType: mimeType.audio,\r\n                timeSlice: this.timeSlice,\r\n                onTimeStamp: this.onTimeStamp\r\n            });\r\n\r\n            if (!mediaType.video) {\r\n                this.audioRecorder.startRecording();\r\n            }\r\n        }\r\n\r\n        if (!!mediaType.video) {\r\n            recorderType = null;\r\n            if (typeof mediaType.video === 'function') {\r\n                recorderType = mediaType.video;\r\n            }\r\n\r\n            var newStream = mediaStream;\r\n\r\n            if (isMediaRecorderCompatible() && !!mediaType.audio && typeof mediaType.audio === 'function') {\r\n                var videoTrack = getTracks(mediaStream, 'video')[0];\r\n\r\n                if (isFirefox) {\r\n                    newStream = new MediaStream();\r\n                    newStream.addTrack(videoTrack);\r\n\r\n                    if (recorderType && recorderType === WhammyRecorder) {\r\n                        // Firefox does NOT supports webp-encoding yet\r\n                        // But Firefox do supports WebAssemblyRecorder\r\n                        recorderType = MediaStreamRecorder;\r\n                    }\r\n                } else {\r\n                    newStream = new MediaStream();\r\n                    newStream.addTrack(videoTrack);\r\n                }\r\n            }\r\n\r\n            this.videoRecorder = new RecordRTC(newStream, {\r\n                type: 'video',\r\n                video: this.video,\r\n                canvas: this.canvas,\r\n                frameInterval: this.frameInterval || 10,\r\n                disableLogs: this.disableLogs,\r\n                recorderType: recorderType,\r\n                mimeType: mimeType.video,\r\n                timeSlice: this.timeSlice,\r\n                onTimeStamp: this.onTimeStamp,\r\n                workerPath: this.workerPath,\r\n                webAssemblyPath: this.webAssemblyPath,\r\n                frameRate: this.frameRate, // used by WebAssemblyRecorder; values: usually 30; accepts any.\r\n                bitrate: this.bitrate // used by WebAssemblyRecorder; values: 0 to 1000+\r\n            });\r\n\r\n            if (!mediaType.audio) {\r\n                this.videoRecorder.startRecording();\r\n            }\r\n        }\r\n\r\n        if (!!mediaType.audio && !!mediaType.video) {\r\n            var self = this;\r\n\r\n            var isSingleRecorder = isMediaRecorderCompatible() === true;\r\n\r\n            if (mediaType.audio instanceof StereoAudioRecorder && !!mediaType.video) {\r\n                isSingleRecorder = false;\r\n            } else if (mediaType.audio !== true && mediaType.video !== true && mediaType.audio !== mediaType.video) {\r\n                isSingleRecorder = false;\r\n            }\r\n\r\n            if (isSingleRecorder === true) {\r\n                self.audioRecorder = null;\r\n                self.videoRecorder.startRecording();\r\n            } else {\r\n                self.videoRecorder.initRecorder(function() {\r\n                    self.audioRecorder.initRecorder(function() {\r\n                        // Both recorders are ready to record things accurately\r\n                        self.videoRecorder.startRecording();\r\n                        self.audioRecorder.startRecording();\r\n                    });\r\n                });\r\n            }\r\n        }\r\n\r\n        if (!!mediaType.gif) {\r\n            recorderType = null;\r\n            if (typeof mediaType.gif === 'function') {\r\n                recorderType = mediaType.gif;\r\n            }\r\n            this.gifRecorder = new RecordRTC(mediaStream, {\r\n                type: 'gif',\r\n                frameRate: this.frameRate || 200,\r\n                quality: this.quality || 10,\r\n                disableLogs: this.disableLogs,\r\n                recorderType: recorderType,\r\n                mimeType: mimeType.gif\r\n            });\r\n            this.gifRecorder.startRecording();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method stops recording.\r\n     * @param {function} callback - Callback function is invoked when all encoders finished their jobs.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.stopRecording(function(recording){\r\n     *     var audioBlob = recording.audio;\r\n     *     var videoBlob = recording.video;\r\n     *     var gifBlob   = recording.gif;\r\n     * });\r\n     */\r\n    this.stopRecording = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.stopRecording(function(blobURL) {\r\n                callback(blobURL, 'audio');\r\n            });\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.stopRecording(function(blobURL) {\r\n                callback(blobURL, 'video');\r\n            });\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.stopRecording(function(blobURL) {\r\n                callback(blobURL, 'gif');\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method pauses recording.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.pauseRecording();\r\n     */\r\n    this.pauseRecording = function() {\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.pauseRecording();\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.pauseRecording();\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.pauseRecording();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes recording.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.resumeRecording();\r\n     */\r\n    this.resumeRecording = function() {\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.resumeRecording();\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.resumeRecording();\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.resumeRecording();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method can be used to manually get all recorded blobs.\r\n     * @param {function} callback - All recorded blobs are passed back to the \"callback\" function.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.getBlob(function(recording){\r\n     *     var audioBlob = recording.audio;\r\n     *     var videoBlob = recording.video;\r\n     *     var gifBlob   = recording.gif;\r\n     * });\r\n     * // or\r\n     * var audioBlob = recorder.getBlob().audio;\r\n     * var videoBlob = recorder.getBlob().video;\r\n     */\r\n    this.getBlob = function(callback) {\r\n        var output = {};\r\n\r\n        if (this.audioRecorder) {\r\n            output.audio = this.audioRecorder.getBlob();\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            output.video = this.videoRecorder.getBlob();\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            output.gif = this.gifRecorder.getBlob();\r\n        }\r\n\r\n        if (callback) {\r\n            callback(output);\r\n        }\r\n\r\n        return output;\r\n    };\r\n\r\n    /**\r\n     * Destroy all recorder instances.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.destroy();\r\n     */\r\n    this.destroy = function() {\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.destroy();\r\n            this.audioRecorder = null;\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.destroy();\r\n            this.videoRecorder = null;\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.destroy();\r\n            this.gifRecorder = null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method can be used to manually get all recorded blobs' DataURLs.\r\n     * @param {function} callback - All recorded blobs' DataURLs are passed back to the \"callback\" function.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.getDataURL(function(recording){\r\n     *     var audioDataURL = recording.audio;\r\n     *     var videoDataURL = recording.video;\r\n     *     var gifDataURL   = recording.gif;\r\n     * });\r\n     */\r\n    this.getDataURL = function(callback) {\r\n        this.getBlob(function(blob) {\r\n            if (blob.audio && blob.video) {\r\n                getDataURL(blob.audio, function(_audioDataURL) {\r\n                    getDataURL(blob.video, function(_videoDataURL) {\r\n                        callback({\r\n                            audio: _audioDataURL,\r\n                            video: _videoDataURL\r\n                        });\r\n                    });\r\n                });\r\n            } else if (blob.audio) {\r\n                getDataURL(blob.audio, function(_audioDataURL) {\r\n                    callback({\r\n                        audio: _audioDataURL\r\n                    });\r\n                });\r\n            } else if (blob.video) {\r\n                getDataURL(blob.video, function(_videoDataURL) {\r\n                    callback({\r\n                        video: _videoDataURL\r\n                    });\r\n                });\r\n            }\r\n        });\r\n\r\n        function getDataURL(blob, callback00) {\r\n            if (typeof Worker !== 'undefined') {\r\n                var webWorker = processInWebWorker(function readFile(_blob) {\r\n                    postMessage(new FileReaderSync().readAsDataURL(_blob));\r\n                });\r\n\r\n                webWorker.onmessage = function(event) {\r\n                    callback00(event.data);\r\n                };\r\n\r\n                webWorker.postMessage(blob);\r\n            } else {\r\n                var reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onload = function(event) {\r\n                    callback00(event.target.result);\r\n                };\r\n            }\r\n        }\r\n\r\n        function processInWebWorker(_function) {\r\n            var blob = URL.createObjectURL(new Blob([_function.toString(),\r\n                'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n            ], {\r\n                type: 'application/javascript'\r\n            }));\r\n\r\n            var worker = new Worker(blob);\r\n            var url;\r\n            if (typeof URL !== 'undefined') {\r\n                url = URL;\r\n            } else if (typeof webkitURL !== 'undefined') {\r\n                url = webkitURL;\r\n            } else {\r\n                throw 'Neither URL nor webkitURL detected.';\r\n            }\r\n            url.revokeObjectURL(blob);\r\n            return worker;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method can be used to ask {@link MRecordRTC} to write all recorded blobs into IndexedDB storage.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.writeToDisk();\r\n     */\r\n    this.writeToDisk = function() {\r\n        RecordRTC.writeToDisk({\r\n            audio: this.audioRecorder,\r\n            video: this.videoRecorder,\r\n            gif: this.gifRecorder\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method can be used to invoke a save-as dialog for all recorded blobs.\r\n     * @param {object} args - {audio: 'audio-name', video: 'video-name', gif: 'gif-name'}\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.save({\r\n     *     audio: 'audio-file-name',\r\n     *     video: 'video-file-name',\r\n     *     gif  : 'gif-file-name'\r\n     * });\r\n     */\r\n    this.save = function(args) {\r\n        args = args || {\r\n            audio: true,\r\n            video: true,\r\n            gif: true\r\n        };\r\n\r\n        if (!!args.audio && this.audioRecorder) {\r\n            this.audioRecorder.save(typeof args.audio === 'string' ? args.audio : '');\r\n        }\r\n\r\n        if (!!args.video && this.videoRecorder) {\r\n            this.videoRecorder.save(typeof args.video === 'string' ? args.video : '');\r\n        }\r\n        if (!!args.gif && this.gifRecorder) {\r\n            this.gifRecorder.save(typeof args.gif === 'string' ? args.gif : '');\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * This method can be used to get all recorded blobs from IndexedDB storage.\r\n * @param {string} type - 'all' or 'audio' or 'video' or 'gif'\r\n * @param {function} callback - Callback function to get all stored blobs.\r\n * @method\r\n * @memberof MRecordRTC\r\n * @example\r\n * MRecordRTC.getFromDisk('all', function(dataURL, type){\r\n *     if(type === 'audio') { }\r\n *     if(type === 'video') { }\r\n *     if(type === 'gif')   { }\r\n * });\r\n */\r\nMRecordRTC.getFromDisk = RecordRTC.getFromDisk;\r\n\r\n/**\r\n * This method can be used to store recorded blobs into IndexedDB storage.\r\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\r\n * @method\r\n * @memberof MRecordRTC\r\n * @example\r\n * MRecordRTC.writeToDisk({\r\n *     audio: audioBlob,\r\n *     video: videoBlob,\r\n *     gif  : gifBlob\r\n * });\r\n */\r\nMRecordRTC.writeToDisk = RecordRTC.writeToDisk;\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.MRecordRTC = MRecordRTC;\r\n}\n\r\nvar browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\r\n\r\n(function(that) {\r\n    if (!that) {\r\n        return;\r\n    }\r\n\r\n    if (typeof window !== 'undefined') {\r\n        return;\r\n    }\r\n\r\n    if (typeof global === 'undefined') {\r\n        return;\r\n    }\r\n\r\n    global.navigator = {\r\n        userAgent: browserFakeUserAgent,\r\n        getUserMedia: function() {}\r\n    };\r\n\r\n    if (!global.console) {\r\n        global.console = {};\r\n    }\r\n\r\n    if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\r\n        global.console.error = global.console.log = global.console.log || function() {\r\n            console.log(arguments);\r\n        };\r\n    }\r\n\r\n    if (typeof document === 'undefined') {\r\n        /*global document:true */\r\n        that.document = {\r\n            documentElement: {\r\n                appendChild: function() {\r\n                    return '';\r\n                }\r\n            }\r\n        };\r\n\r\n        document.createElement = document.captureStream = document.mozCaptureStream = function() {\r\n            var obj = {\r\n                getContext: function() {\r\n                    return obj;\r\n                },\r\n                play: function() {},\r\n                pause: function() {},\r\n                drawImage: function() {},\r\n                toDataURL: function() {\r\n                    return '';\r\n                },\r\n                style: {}\r\n            };\r\n            return obj;\r\n        };\r\n\r\n        that.HTMLVideoElement = function() {};\r\n    }\r\n\r\n    if (typeof location === 'undefined') {\r\n        /*global location:true */\r\n        that.location = {\r\n            protocol: 'file:',\r\n            href: '',\r\n            hash: ''\r\n        };\r\n    }\r\n\r\n    if (typeof screen === 'undefined') {\r\n        /*global screen:true */\r\n        that.screen = {\r\n            width: 0,\r\n            height: 0\r\n        };\r\n    }\r\n\r\n    if (typeof URL === 'undefined') {\r\n        /*global screen:true */\r\n        that.URL = {\r\n            createObjectURL: function() {\r\n                return '';\r\n            },\r\n            revokeObjectURL: function() {\r\n                return '';\r\n            }\r\n        };\r\n    }\r\n\r\n    /*global window:true */\r\n    that.window = global;\r\n})(typeof global !== 'undefined' ? global : null);\n\r\n// _____________________________\r\n// Cross-Browser-Declarations.js\r\n\r\n// animation-frame used in WebM recording\r\n\r\n/*jshint -W079 */\r\nvar requestAnimationFrame = window.requestAnimationFrame;\r\nif (typeof requestAnimationFrame === 'undefined') {\r\n    if (typeof webkitRequestAnimationFrame !== 'undefined') {\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = webkitRequestAnimationFrame;\r\n    } else if (typeof mozRequestAnimationFrame !== 'undefined') {\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = mozRequestAnimationFrame;\r\n    } else if (typeof msRequestAnimationFrame !== 'undefined') {\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = msRequestAnimationFrame;\r\n    } else if (typeof requestAnimationFrame === 'undefined') {\r\n        // via: https://gist.github.com/paulirish/1579671\r\n        var lastTime = 0;\r\n\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = function(callback, element) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = setTimeout(function() {\r\n                callback(currTime + timeToCall);\r\n            }, timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n    }\r\n}\r\n\r\n/*jshint -W079 */\r\nvar cancelAnimationFrame = window.cancelAnimationFrame;\r\nif (typeof cancelAnimationFrame === 'undefined') {\r\n    if (typeof webkitCancelAnimationFrame !== 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = webkitCancelAnimationFrame;\r\n    } else if (typeof mozCancelAnimationFrame !== 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = mozCancelAnimationFrame;\r\n    } else if (typeof msCancelAnimationFrame !== 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = msCancelAnimationFrame;\r\n    } else if (typeof cancelAnimationFrame === 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = function(id) {\r\n            clearTimeout(id);\r\n        };\r\n    }\r\n}\r\n\r\n// WebAudio API representer\r\nvar AudioContext = window.AudioContext;\r\n\r\nif (typeof AudioContext === 'undefined') {\r\n    if (typeof webkitAudioContext !== 'undefined') {\r\n        /*global AudioContext:true */\r\n        AudioContext = webkitAudioContext;\r\n    }\r\n\r\n    if (typeof mozAudioContext !== 'undefined') {\r\n        /*global AudioContext:true */\r\n        AudioContext = mozAudioContext;\r\n    }\r\n}\r\n\r\n/*jshint -W079 */\r\nvar URL = window.URL;\r\n\r\nif (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\r\n    /*global URL:true */\r\n    URL = webkitURL;\r\n}\r\n\r\nif (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') { // maybe window.navigator?\r\n    if (typeof navigator.webkitGetUserMedia !== 'undefined') {\r\n        navigator.getUserMedia = navigator.webkitGetUserMedia;\r\n    }\r\n\r\n    if (typeof navigator.mozGetUserMedia !== 'undefined') {\r\n        navigator.getUserMedia = navigator.mozGetUserMedia;\r\n    }\r\n}\r\n\r\nvar isEdge = navigator.userAgent.indexOf('Edge') !== -1 && (!!navigator.msSaveBlob || !!navigator.msSaveOrOpenBlob);\r\nvar isOpera = !!window.opera || navigator.userAgent.indexOf('OPR/') !== -1;\r\nvar isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1 && ('netscape' in window) && / rv:/.test(navigator.userAgent);\r\nvar isChrome = (!isOpera && !isEdge && !!navigator.webkitGetUserMedia) || isElectron() || navigator.userAgent.toLowerCase().indexOf('chrome/') !== -1;\r\n\r\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n\r\nif (isSafari && !isChrome && navigator.userAgent.indexOf('CriOS') !== -1) {\r\n    isSafari = false;\r\n    isChrome = true;\r\n}\r\n\r\nvar MediaStream = window.MediaStream;\r\n\r\nif (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\r\n    MediaStream = webkitMediaStream;\r\n}\r\n\r\n/*global MediaStream:true */\r\nif (typeof MediaStream !== 'undefined') {\r\n    // override \"stop\" method for all browsers\r\n    if (typeof MediaStream.prototype.stop === 'undefined') {\r\n        MediaStream.prototype.stop = function() {\r\n            this.getTracks().forEach(function(track) {\r\n                track.stop();\r\n            });\r\n        };\r\n    }\r\n}\r\n\r\n// below function via: http://goo.gl/B3ae8c\r\n/**\r\n * Return human-readable file size.\r\n * @param {number} bytes - Pass bytes and get formatted string.\r\n * @returns {string} - formatted string\r\n * @example\r\n * bytesToSize(1024*1024*5) === '5 GB'\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\nfunction bytesToSize(bytes) {\r\n    var k = 1000;\r\n    var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n    if (bytes === 0) {\r\n        return '0 Bytes';\r\n    }\r\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\r\n    return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\r\n}\r\n\r\n/**\r\n * @param {Blob} file - File or Blob object. This parameter is required.\r\n * @param {string} fileName - Optional file name e.g. \"Recorded-Video.webm\"\r\n * @example\r\n * invokeSaveAsDialog(blob or file, [optional] fileName);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\nfunction invokeSaveAsDialog(file, fileName) {\r\n    if (!file) {\r\n        throw 'Blob object is required.';\r\n    }\r\n\r\n    if (!file.type) {\r\n        try {\r\n            file.type = 'video/webm';\r\n        } catch (e) {}\r\n    }\r\n\r\n    var fileExtension = (file.type || 'video/webm').split('/')[1];\r\n\r\n    if (fileName && fileName.indexOf('.') !== -1) {\r\n        var splitted = fileName.split('.');\r\n        fileName = splitted[0];\r\n        fileExtension = splitted[1];\r\n    }\r\n\r\n    var fileFullName = (fileName || (Math.round(Math.random() * 9999999999) + 888888888)) + '.' + fileExtension;\r\n\r\n    if (typeof navigator.msSaveOrOpenBlob !== 'undefined') {\r\n        return navigator.msSaveOrOpenBlob(file, fileFullName);\r\n    } else if (typeof navigator.msSaveBlob !== 'undefined') {\r\n        return navigator.msSaveBlob(file, fileFullName);\r\n    }\r\n\r\n    var hyperlink = document.createElement('a');\r\n    hyperlink.href = URL.createObjectURL(file);\r\n    hyperlink.download = fileFullName;\r\n\r\n    hyperlink.style = 'display:none;opacity:0;color:transparent;';\r\n    (document.body || document.documentElement).appendChild(hyperlink);\r\n\r\n    if (typeof hyperlink.click === 'function') {\r\n        hyperlink.click();\r\n    } else {\r\n        hyperlink.target = '_blank';\r\n        hyperlink.dispatchEvent(new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        }));\r\n    }\r\n\r\n    URL.revokeObjectURL(hyperlink.href);\r\n}\r\n\r\n/**\r\n * from: https://github.com/cheton/is-electron/blob/master/index.js\r\n **/\r\nfunction isElectron() {\r\n    // Renderer process\r\n    if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\r\n        return true;\r\n    }\r\n\r\n    // Main process\r\n    if (typeof process !== 'undefined' && typeof process.versions === 'object' && !!process.versions.electron) {\r\n        return true;\r\n    }\r\n\r\n    // Detect the user agent when the `nodeIntegration` option is set to true\r\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction getTracks(stream, kind) {\r\n    if (!stream || !stream.getTracks) {\r\n        return [];\r\n    }\r\n\r\n    return stream.getTracks().filter(function(t) {\r\n        return t.kind === (kind || 'audio');\r\n    });\r\n}\r\n\r\nfunction setSrcObject(stream, element) {\r\n    if ('srcObject' in element) {\r\n        element.srcObject = stream;\r\n    } else if ('mozSrcObject' in element) {\r\n        element.mozSrcObject = stream;\r\n    } else {\r\n        element.srcObject = stream;\r\n    }\r\n}\r\n\r\n/**\r\n * @param {Blob} file - File or Blob object.\r\n * @param {function} callback - Callback function.\r\n * @example\r\n * getSeekableBlob(blob or file, callback);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\nfunction getSeekableBlob(inputBlob, callback) {\r\n    // EBML.js copyrights goes to: https://github.com/legokichi/ts-ebml\r\n    if (typeof EBML === 'undefined') {\r\n        throw new Error('Please link: https://www.webrtc-experiment.com/EBML.js');\r\n    }\r\n\r\n    var reader = new EBML.Reader();\r\n    var decoder = new EBML.Decoder();\r\n    var tools = EBML.tools;\r\n\r\n    var fileReader = new FileReader();\r\n    fileReader.onload = function(e) {\r\n        var ebmlElms = decoder.decode(this.result);\r\n        ebmlElms.forEach(function(element) {\r\n            reader.read(element);\r\n        });\r\n        reader.stop();\r\n        var refinedMetadataBuf = tools.makeMetadataSeekable(reader.metadatas, reader.duration, reader.cues);\r\n        var body = this.result.slice(reader.metadataSize);\r\n        var newBlob = new Blob([refinedMetadataBuf, body], {\r\n            type: 'video/webm'\r\n        });\r\n\r\n        callback(newBlob);\r\n    };\r\n    fileReader.readAsArrayBuffer(inputBlob);\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.invokeSaveAsDialog = invokeSaveAsDialog;\r\n    RecordRTC.getTracks = getTracks;\r\n    RecordRTC.getSeekableBlob = getSeekableBlob;\r\n    RecordRTC.bytesToSize = bytesToSize;\r\n    RecordRTC.isElectron = isElectron;\r\n}\n\r\n// __________ (used to handle stuff like http://goo.gl/xmE5eg) issue #129\r\n// Storage.js\r\n\r\n/**\r\n * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. \"new AudioContext\".\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @example\r\n * Storage.AudioContext === webkitAudioContext\r\n * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\n\r\nvar Storage = {};\r\n\r\nif (typeof AudioContext !== 'undefined') {\r\n    Storage.AudioContext = AudioContext;\r\n} else if (typeof webkitAudioContext !== 'undefined') {\r\n    Storage.AudioContext = webkitAudioContext;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.Storage = Storage;\r\n}\n\r\nfunction isMediaRecorderCompatible() {\r\n    if (isFirefox || isSafari || isEdge) {\r\n        return true;\r\n    }\r\n\r\n    var nVer = navigator.appVersion;\r\n    var nAgt = navigator.userAgent;\r\n    var fullVersion = '' + parseFloat(navigator.appVersion);\r\n    var majorVersion = parseInt(navigator.appVersion, 10);\r\n    var nameOffset, verOffset, ix;\r\n\r\n    if (isChrome || isOpera) {\r\n        verOffset = nAgt.indexOf('Chrome');\r\n        fullVersion = nAgt.substring(verOffset + 7);\r\n    }\r\n\r\n    // trim the fullVersion string at semicolon/space if present\r\n    if ((ix = fullVersion.indexOf(';')) !== -1) {\r\n        fullVersion = fullVersion.substring(0, ix);\r\n    }\r\n\r\n    if ((ix = fullVersion.indexOf(' ')) !== -1) {\r\n        fullVersion = fullVersion.substring(0, ix);\r\n    }\r\n\r\n    majorVersion = parseInt('' + fullVersion, 10);\r\n\r\n    if (isNaN(majorVersion)) {\r\n        fullVersion = '' + parseFloat(navigator.appVersion);\r\n        majorVersion = parseInt(navigator.appVersion, 10);\r\n    }\r\n\r\n    return majorVersion >= 49;\r\n}\n\r\n// ______________________\r\n// MediaStreamRecorder.js\r\n\r\n/**\r\n * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.\r\n * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://github.com/muaz-khan|Muaz Khan}\r\n * @typedef MediaStreamRecorder\r\n * @class\r\n * @example\r\n * var config = {\r\n *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis\r\n *     audioBitsPerSecond : 256 * 8 * 1024,\r\n *     videoBitsPerSecond : 256 * 8 * 1024,\r\n *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two\r\n *     checkForInactiveTracks: true,\r\n *     timeSlice: 1000, // concatenate intervals based blobs\r\n *     ondataavailable: function() {} // get intervals based blobs\r\n * }\r\n * var recorder = new MediaStreamRecorder(mediaStream, config);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n *\r\n *     // or\r\n *     var blob = recorder.blob;\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {disableLogs:true, initCallback: function, mimeType: \"video/webm\", timeSlice: 1000}\r\n * @throws Will throw an error if first argument \"MediaStream\" is missing. Also throws error if \"MediaRecorder API\" are not supported by the browser.\r\n */\r\n\r\nfunction MediaStreamRecorder(mediaStream, config) {\r\n    var self = this;\r\n\r\n    if (typeof mediaStream === 'undefined') {\r\n        throw 'First argument \"MediaStream\" is required.';\r\n    }\r\n\r\n    if (typeof MediaRecorder === 'undefined') {\r\n        throw 'Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.';\r\n    }\r\n\r\n    config = config || {\r\n        // bitsPerSecond: 256 * 8 * 1024,\r\n        mimeType: 'video/webm'\r\n    };\r\n\r\n    if (config.type === 'audio') {\r\n        if (getTracks(mediaStream, 'video').length && getTracks(mediaStream, 'audio').length) {\r\n            var stream;\r\n            if (!!navigator.mozGetUserMedia) {\r\n                stream = new MediaStream();\r\n                stream.addTrack(getTracks(mediaStream, 'audio')[0]);\r\n            } else {\r\n                // webkitMediaStream\r\n                stream = new MediaStream(getTracks(mediaStream, 'audio'));\r\n            }\r\n            mediaStream = stream;\r\n        }\r\n\r\n        if (!config.mimeType || config.mimeType.toString().toLowerCase().indexOf('audio') === -1) {\r\n            config.mimeType = isChrome ? 'audio/webm' : 'audio/ogg';\r\n        }\r\n\r\n        if (config.mimeType && config.mimeType.toString().toLowerCase() !== 'audio/ogg' && !!navigator.mozGetUserMedia) {\r\n            // forcing better codecs on Firefox (via #166)\r\n            config.mimeType = 'audio/ogg';\r\n        }\r\n    }\r\n\r\n    var arrayOfBlobs = [];\r\n\r\n    /**\r\n     * This method returns array of blobs. Use only with \"timeSlice\". Its useful to preview recording anytime, without using the \"stop\" method.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * var arrayOfBlobs = recorder.getArrayOfBlobs();\r\n     * @returns {Array} Returns array of recorded blobs.\r\n     */\r\n    this.getArrayOfBlobs = function() {\r\n        return arrayOfBlobs;\r\n    };\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        // set defaults\r\n        self.blob = null;\r\n        self.clearRecordedData();\r\n        self.timestamps = [];\r\n        allStates = [];\r\n        arrayOfBlobs = [];\r\n\r\n        var recorderHints = config;\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Passing following config over MediaRecorder API.', recorderHints);\r\n        }\r\n\r\n        if (mediaRecorder) {\r\n            // mandatory to make sure Firefox doesn't fails to record streams 3-4 times without reloading the page.\r\n            mediaRecorder = null;\r\n        }\r\n\r\n        if (isChrome && !isMediaRecorderCompatible()) {\r\n            // to support video-only recording on stable\r\n            recorderHints = 'video/vp8';\r\n        }\r\n\r\n        if (typeof MediaRecorder.isTypeSupported === 'function' && recorderHints.mimeType) {\r\n            if (!MediaRecorder.isTypeSupported(recorderHints.mimeType)) {\r\n                if (!config.disableLogs) {\r\n                    console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\r\n                }\r\n\r\n                recorderHints.mimeType = config.type === 'audio' ? 'audio/webm' : 'video/webm';\r\n            }\r\n        }\r\n\r\n        // using MediaRecorder API here\r\n        try {\r\n            mediaRecorder = new MediaRecorder(mediaStream, recorderHints);\r\n\r\n            // reset\r\n            config.mimeType = recorderHints.mimeType;\r\n        } catch (e) {\r\n            // chrome-based fallback\r\n            mediaRecorder = new MediaRecorder(mediaStream);\r\n        }\r\n\r\n        // old hack?\r\n        if (recorderHints.mimeType && !MediaRecorder.isTypeSupported && 'canRecordMimeType' in mediaRecorder && mediaRecorder.canRecordMimeType(recorderHints.mimeType) === false) {\r\n            if (!config.disableLogs) {\r\n                console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\r\n            }\r\n        }\r\n\r\n        // Dispatching OnDataAvailable Handler\r\n        mediaRecorder.ondataavailable = function(e) {\r\n            if (e.data) {\r\n                allStates.push('ondataavailable: ' + bytesToSize(e.data.size));\r\n            }\r\n\r\n            if (typeof config.timeSlice === 'number') {\r\n                if (e.data && e.data.size && e.data.size > 100) {\r\n                    arrayOfBlobs.push(e.data);\r\n                    updateTimeStamp();\r\n\r\n                    if (typeof config.ondataavailable === 'function') {\r\n                        // intervals based blobs\r\n                        var blob = config.getNativeBlob ? e.data : new Blob([e.data], {\r\n                            type: getMimeType(recorderHints)\r\n                        });\r\n                        config.ondataavailable(blob);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (!e.data || !e.data.size || e.data.size < 100 || self.blob) {\r\n                // make sure that stopRecording always getting fired\r\n                // even if there is invalid data\r\n                if (self.recordingCallback) {\r\n                    self.recordingCallback(new Blob([], {\r\n                        type: getMimeType(recorderHints)\r\n                    }));\r\n                    self.recordingCallback = null;\r\n                }\r\n                return;\r\n            }\r\n\r\n            self.blob = config.getNativeBlob ? e.data : new Blob([e.data], {\r\n                type: getMimeType(recorderHints)\r\n            });\r\n\r\n            if (self.recordingCallback) {\r\n                self.recordingCallback(self.blob);\r\n                self.recordingCallback = null;\r\n            }\r\n        };\r\n\r\n        mediaRecorder.onstart = function() {\r\n            allStates.push('started');\r\n        };\r\n\r\n        mediaRecorder.onpause = function() {\r\n            allStates.push('paused');\r\n        };\r\n\r\n        mediaRecorder.onresume = function() {\r\n            allStates.push('resumed');\r\n        };\r\n\r\n        mediaRecorder.onstop = function() {\r\n            allStates.push('stopped');\r\n        };\r\n\r\n        mediaRecorder.onerror = function(error) {\r\n            if (!error) {\r\n                return;\r\n            }\r\n\r\n            if (!error.name) {\r\n                error.name = 'UnknownError';\r\n            }\r\n\r\n            allStates.push('error: ' + error);\r\n\r\n            if (!config.disableLogs) {\r\n                // via: https://w3c.github.io/mediacapture-record/MediaRecorder.html#exception-summary\r\n                if (error.name.toString().toLowerCase().indexOf('invalidstate') !== -1) {\r\n                    console.error('The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.', error);\r\n                } else if (error.name.toString().toLowerCase().indexOf('notsupported') !== -1) {\r\n                    console.error('MIME type (', recorderHints.mimeType, ') is not supported.', error);\r\n                } else if (error.name.toString().toLowerCase().indexOf('security') !== -1) {\r\n                    console.error('MediaRecorder security error', error);\r\n                }\r\n\r\n                // older code below\r\n                else if (error.name === 'OutOfMemory') {\r\n                    console.error('The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\r\n                } else if (error.name === 'IllegalStreamModification') {\r\n                    console.error('A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\r\n                } else if (error.name === 'OtherRecordingError') {\r\n                    console.error('Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\r\n                } else if (error.name === 'GenericError') {\r\n                    console.error('The UA cannot provide the codec or recording option that has been requested.', error);\r\n                } else {\r\n                    console.error('MediaRecorder Error', error);\r\n                }\r\n            }\r\n\r\n            (function(looper) {\r\n                if (!self.manuallyStopped && mediaRecorder && mediaRecorder.state === 'inactive') {\r\n                    delete config.timeslice;\r\n\r\n                    // 10 minutes, enough?\r\n                    mediaRecorder.start(10 * 60 * 1000);\r\n                    return;\r\n                }\r\n\r\n                setTimeout(looper, 1000);\r\n            })();\r\n\r\n            if (mediaRecorder.state !== 'inactive' && mediaRecorder.state !== 'stopped') {\r\n                mediaRecorder.stop();\r\n            }\r\n        };\r\n\r\n        if (typeof config.timeSlice === 'number') {\r\n            updateTimeStamp();\r\n            mediaRecorder.start(config.timeSlice);\r\n        } else {\r\n            // default is 60 minutes; enough?\r\n            // use config => {timeSlice: 1000} otherwise\r\n\r\n            mediaRecorder.start(3.6e+6);\r\n        }\r\n\r\n        if (config.initCallback) {\r\n            config.initCallback(); // old code\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @property {Array} timestamps - Array of time stamps\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * console.log(recorder.timestamps);\r\n     */\r\n    this.timestamps = [];\r\n\r\n    function updateTimeStamp() {\r\n        self.timestamps.push(new Date().getTime());\r\n\r\n        if (typeof config.onTimeStamp === 'function') {\r\n            config.onTimeStamp(self.timestamps[self.timestamps.length - 1], self.timestamps);\r\n        }\r\n    }\r\n\r\n    function getMimeType(secondObject) {\r\n        if (mediaRecorder && mediaRecorder.mimeType) {\r\n            return mediaRecorder.mimeType;\r\n        }\r\n\r\n        return secondObject.mimeType || 'video/webm';\r\n    }\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        self.manuallyStopped = true; // used inside the mediaRecorder.onerror\r\n\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        this.recordingCallback = callback;\r\n\r\n        if (mediaRecorder.state === 'recording') {\r\n            mediaRecorder.stop();\r\n        }\r\n\r\n        if (typeof config.timeSlice === 'number') {\r\n            setTimeout(function() {\r\n                self.blob = new Blob(arrayOfBlobs, {\r\n                    type: getMimeType(config)\r\n                });\r\n\r\n                self.recordingCallback(self.blob);\r\n            }, 100);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        if (mediaRecorder.state === 'recording') {\r\n            mediaRecorder.pause();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        if (mediaRecorder.state === 'paused') {\r\n            mediaRecorder.resume();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (mediaRecorder && mediaRecorder.state === 'recording') {\r\n            self.stop(clearRecordedDataCB);\r\n        }\r\n\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        arrayOfBlobs = [];\r\n        mediaRecorder = null;\r\n        self.timestamps = [];\r\n    }\r\n\r\n    // Reference to \"MediaRecorder\" object\r\n    var mediaRecorder;\r\n\r\n    /**\r\n     * Access to native MediaRecorder API\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @instance\r\n     * @example\r\n     * var internal = recorder.getInternalRecorder();\r\n     * internal.ondataavailable = function() {}; // override\r\n     * internal.stream, internal.onpause, internal.onstop, etc.\r\n     * @returns {Object} Returns internal recording object.\r\n     */\r\n    this.getInternalRecorder = function() {\r\n        return mediaRecorder;\r\n    };\r\n\r\n    function isMediaStreamActive() {\r\n        if ('active' in mediaStream) {\r\n            if (!mediaStream.active) {\r\n                return false;\r\n            }\r\n        } else if ('ended' in mediaStream) { // old hack\r\n            if (mediaStream.ended) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @property {Blob} blob - Recorded data as \"Blob\" object.\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.stop(function() {\r\n     *     var blob = recorder.blob;\r\n     * });\r\n     */\r\n    this.blob = null;\r\n\r\n\r\n    /**\r\n     * Get MediaRecorder readonly state.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * var state = recorder.getState();\r\n     * @returns {String} Returns recording state.\r\n     */\r\n    this.getState = function() {\r\n        if (!mediaRecorder) {\r\n            return 'inactive';\r\n        }\r\n\r\n        return mediaRecorder.state || 'inactive';\r\n    };\r\n\r\n    // list of all recording states\r\n    var allStates = [];\r\n\r\n    /**\r\n     * Get MediaRecorder all recording states.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * var state = recorder.getAllStates();\r\n     * @returns {Array} Returns all recording states\r\n     */\r\n    this.getAllStates = function() {\r\n        return allStates;\r\n    };\r\n\r\n    // if any Track within the MediaStream is muted or not enabled at any time, \r\n    // the browser will only record black frames \r\n    // or silence since that is the content produced by the Track\r\n    // so we need to stopRecording as soon as any single track ends.\r\n    if (typeof config.checkForInactiveTracks === 'undefined') {\r\n        config.checkForInactiveTracks = false; // disable to minimize CPU usage\r\n    }\r\n\r\n    var self = this;\r\n\r\n    // this method checks if media stream is stopped\r\n    // or if any track is ended.\r\n    (function looper() {\r\n        if (!mediaRecorder || config.checkForInactiveTracks === false) {\r\n            return;\r\n        }\r\n\r\n        if (isMediaStreamActive() === false) {\r\n            if (!config.disableLogs) {\r\n                console.log('MediaStream seems stopped.');\r\n            }\r\n            self.stop();\r\n            return;\r\n        }\r\n\r\n        setTimeout(looper, 1000); // check every second\r\n    })();\r\n\r\n    // for debugging\r\n    this.name = 'MediaStreamRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.MediaStreamRecorder = MediaStreamRecorder;\r\n}\n\r\n// source code from: http://typedarray.org/wp-content/projects/WebAudioRecorder/script.js\r\n// https://github.com/mattdiamond/Recorderjs#license-mit\r\n// ______________________\r\n// StereoAudioRecorder.js\r\n\r\n/**\r\n * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring \"stereo\" audio-recording in chrome.\r\n * @summary JavaScript standalone object for stereo audio recording.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef StereoAudioRecorder\r\n * @class\r\n * @example\r\n * var recorder = new StereoAudioRecorder(MediaStream, {\r\n *     sampleRate: 44100,\r\n *     bufferSize: 4096\r\n * });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}\r\n */\r\n\r\nfunction StereoAudioRecorder(mediaStream, config) {\r\n    if (!getTracks(mediaStream, 'audio').length) {\r\n        throw 'Your stream has no audio tracks.';\r\n    }\r\n\r\n    config = config || {};\r\n\r\n    var self = this;\r\n\r\n    // variables\r\n    var leftchannel = [];\r\n    var rightchannel = [];\r\n    var recording = false;\r\n    var recordingLength = 0;\r\n    var jsAudioNode;\r\n\r\n    var numberOfAudioChannels = 2;\r\n\r\n    /**\r\n     * Set sample rates such as 8K or 16K. Reference: http://stackoverflow.com/a/28977136/552182\r\n     * @property {number} desiredSampRate - Desired Bits per sample * 1000\r\n     * @memberof StereoAudioRecorder\r\n     * @instance\r\n     * @example\r\n     * var recorder = StereoAudioRecorder(mediaStream, {\r\n     *   desiredSampRate: 16 * 1000 // bits-per-sample * 1000\r\n     * });\r\n     */\r\n    var desiredSampRate = config.desiredSampRate;\r\n\r\n    // backward compatibility\r\n    if (config.leftChannel === true) {\r\n        numberOfAudioChannels = 1;\r\n    }\r\n\r\n    if (config.numberOfAudioChannels === 1) {\r\n        numberOfAudioChannels = 1;\r\n    }\r\n\r\n    if (!numberOfAudioChannels || numberOfAudioChannels < 1) {\r\n        numberOfAudioChannels = 2;\r\n    }\r\n\r\n    if (!config.disableLogs) {\r\n        console.log('StereoAudioRecorder is set to record number of channels: ' + numberOfAudioChannels);\r\n    }\r\n\r\n    // if any Track within the MediaStream is muted or not enabled at any time, \r\n    // the browser will only record black frames \r\n    // or silence since that is the content produced by the Track\r\n    // so we need to stopRecording as soon as any single track ends.\r\n    if (typeof config.checkForInactiveTracks === 'undefined') {\r\n        config.checkForInactiveTracks = true;\r\n    }\r\n\r\n    function isMediaStreamActive() {\r\n        if (config.checkForInactiveTracks === false) {\r\n            // always return \"true\"\r\n            return true;\r\n        }\r\n\r\n        if ('active' in mediaStream) {\r\n            if (!mediaStream.active) {\r\n                return false;\r\n            }\r\n        } else if ('ended' in mediaStream) { // old hack\r\n            if (mediaStream.ended) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        if (isMediaStreamActive() === false) {\r\n            throw 'Please make sure MediaStream is active.';\r\n        }\r\n\r\n        resetVariables();\r\n\r\n        isAudioProcessStarted = isPaused = false;\r\n        recording = true;\r\n\r\n        if (typeof config.timeSlice !== 'undefined') {\r\n            looper();\r\n        }\r\n    };\r\n\r\n    function mergeLeftRightBuffers(config, callback) {\r\n        function mergeAudioBuffers(config, cb) {\r\n            var numberOfAudioChannels = config.numberOfAudioChannels;\r\n\r\n            // todo: \"slice(0)\" --- is it causes loop? Should be removed?\r\n            var leftBuffers = config.leftBuffers.slice(0);\r\n            var rightBuffers = config.rightBuffers.slice(0);\r\n            var sampleRate = config.sampleRate;\r\n            var internalInterleavedLength = config.internalInterleavedLength;\r\n            var desiredSampRate = config.desiredSampRate;\r\n\r\n            if (numberOfAudioChannels === 2) {\r\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\r\n                rightBuffers = mergeBuffers(rightBuffers, internalInterleavedLength);\r\n\r\n                if (desiredSampRate) {\r\n                    leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\r\n                    rightBuffers = interpolateArray(rightBuffers, desiredSampRate, sampleRate);\r\n                }\r\n            }\r\n\r\n            if (numberOfAudioChannels === 1) {\r\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\r\n\r\n                if (desiredSampRate) {\r\n                    leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\r\n                }\r\n            }\r\n\r\n            // set sample rate as desired sample rate\r\n            if (desiredSampRate) {\r\n                sampleRate = desiredSampRate;\r\n            }\r\n\r\n            // for changing the sampling rate, reference:\r\n            // http://stackoverflow.com/a/28977136/552182\r\n            function interpolateArray(data, newSampleRate, oldSampleRate) {\r\n                var fitCount = Math.round(data.length * (newSampleRate / oldSampleRate));\r\n                var newData = [];\r\n                var springFactor = Number((data.length - 1) / (fitCount - 1));\r\n                newData[0] = data[0];\r\n                for (var i = 1; i < fitCount - 1; i++) {\r\n                    var tmp = i * springFactor;\r\n                    var before = Number(Math.floor(tmp)).toFixed();\r\n                    var after = Number(Math.ceil(tmp)).toFixed();\r\n                    var atPoint = tmp - before;\r\n                    newData[i] = linearInterpolate(data[before], data[after], atPoint);\r\n                }\r\n                newData[fitCount - 1] = data[data.length - 1];\r\n                return newData;\r\n            }\r\n\r\n            function linearInterpolate(before, after, atPoint) {\r\n                return before + (after - before) * atPoint;\r\n            }\r\n\r\n            function mergeBuffers(channelBuffer, rLength) {\r\n                var result = new Float64Array(rLength);\r\n                var offset = 0;\r\n                var lng = channelBuffer.length;\r\n\r\n                for (var i = 0; i < lng; i++) {\r\n                    var buffer = channelBuffer[i];\r\n                    result.set(buffer, offset);\r\n                    offset += buffer.length;\r\n                }\r\n\r\n                return result;\r\n            }\r\n\r\n            function interleave(leftChannel, rightChannel) {\r\n                var length = leftChannel.length + rightChannel.length;\r\n\r\n                var result = new Float64Array(length);\r\n\r\n                var inputIndex = 0;\r\n\r\n                for (var index = 0; index < length;) {\r\n                    result[index++] = leftChannel[inputIndex];\r\n                    result[index++] = rightChannel[inputIndex];\r\n                    inputIndex++;\r\n                }\r\n                return result;\r\n            }\r\n\r\n            function writeUTFBytes(view, offset, string) {\r\n                var lng = string.length;\r\n                for (var i = 0; i < lng; i++) {\r\n                    view.setUint8(offset + i, string.charCodeAt(i));\r\n                }\r\n            }\r\n\r\n            // interleave both channels together\r\n            var interleaved;\r\n\r\n            if (numberOfAudioChannels === 2) {\r\n                interleaved = interleave(leftBuffers, rightBuffers);\r\n            }\r\n\r\n            if (numberOfAudioChannels === 1) {\r\n                interleaved = leftBuffers;\r\n            }\r\n\r\n            var interleavedLength = interleaved.length;\r\n\r\n            // create wav file\r\n            var resultingBufferLength = 44 + interleavedLength * 2;\r\n\r\n            var buffer = new ArrayBuffer(resultingBufferLength);\r\n\r\n            var view = new DataView(buffer);\r\n\r\n            // RIFF chunk descriptor/identifier \r\n            writeUTFBytes(view, 0, 'RIFF');\r\n\r\n            // RIFF chunk length\r\n            // changed \"44\" to \"36\" via #401\r\n            view.setUint32(4, 36 + interleavedLength * 2, true);\r\n\r\n            // RIFF type \r\n            writeUTFBytes(view, 8, 'WAVE');\r\n\r\n            // format chunk identifier \r\n            // FMT sub-chunk\r\n            writeUTFBytes(view, 12, 'fmt ');\r\n\r\n            // format chunk length \r\n            view.setUint32(16, 16, true);\r\n\r\n            // sample format (raw)\r\n            view.setUint16(20, 1, true);\r\n\r\n            // stereo (2 channels)\r\n            view.setUint16(22, numberOfAudioChannels, true);\r\n\r\n            // sample rate \r\n            view.setUint32(24, sampleRate, true);\r\n\r\n            // byte rate (sample rate * block align)\r\n            view.setUint32(28, sampleRate * 2, true);\r\n\r\n            // block align (channel count * bytes per sample) \r\n            view.setUint16(32, numberOfAudioChannels * 2, true);\r\n\r\n            // bits per sample \r\n            view.setUint16(34, 16, true);\r\n\r\n            // data sub-chunk\r\n            // data chunk identifier \r\n            writeUTFBytes(view, 36, 'data');\r\n\r\n            // data chunk length \r\n            view.setUint32(40, interleavedLength * 2, true);\r\n\r\n            // write the PCM samples\r\n            var lng = interleavedLength;\r\n            var index = 44;\r\n            var volume = 1;\r\n            for (var i = 0; i < lng; i++) {\r\n                view.setInt16(index, interleaved[i] * (0x7FFF * volume), true);\r\n                index += 2;\r\n            }\r\n\r\n            if (cb) {\r\n                return cb({\r\n                    buffer: buffer,\r\n                    view: view\r\n                });\r\n            }\r\n\r\n            postMessage({\r\n                buffer: buffer,\r\n                view: view\r\n            });\r\n        }\r\n\r\n        if (config.noWorker) {\r\n            mergeAudioBuffers(config, function(data) {\r\n                callback(data.buffer, data.view);\r\n            });\r\n            return;\r\n        }\r\n\r\n\r\n        var webWorker = processInWebWorker(mergeAudioBuffers);\r\n\r\n        webWorker.onmessage = function(event) {\r\n            callback(event.data.buffer, event.data.view);\r\n\r\n            // release memory\r\n            URL.revokeObjectURL(webWorker.workerURL);\r\n\r\n            // kill webworker (or Chrome will kill your page after ~25 calls)\r\n            webWorker.terminate();\r\n        };\r\n\r\n        webWorker.postMessage(config);\r\n    }\r\n\r\n    function processInWebWorker(_function) {\r\n        var workerURL = URL.createObjectURL(new Blob([_function.toString(),\r\n            ';this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n        ], {\r\n            type: 'application/javascript'\r\n        }));\r\n\r\n        var worker = new Worker(workerURL);\r\n        worker.workerURL = workerURL;\r\n        return worker;\r\n    }\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        // stop recording\r\n        recording = false;\r\n\r\n        mergeLeftRightBuffers({\r\n            desiredSampRate: desiredSampRate,\r\n            sampleRate: sampleRate,\r\n            numberOfAudioChannels: numberOfAudioChannels,\r\n            internalInterleavedLength: recordingLength,\r\n            leftBuffers: leftchannel,\r\n            rightBuffers: numberOfAudioChannels === 1 ? [] : rightchannel,\r\n            noWorker: config.noWorker\r\n        }, function(buffer, view) {\r\n            /**\r\n             * @property {Blob} blob - The recorded blob object.\r\n             * @memberof StereoAudioRecorder\r\n             * @example\r\n             * recorder.stop(function(){\r\n             *     var blob = recorder.blob;\r\n             * });\r\n             */\r\n            self.blob = new Blob([view], {\r\n                type: 'audio/wav'\r\n            });\r\n\r\n            /**\r\n             * @property {ArrayBuffer} buffer - The recorded buffer object.\r\n             * @memberof StereoAudioRecorder\r\n             * @example\r\n             * recorder.stop(function(){\r\n             *     var buffer = recorder.buffer;\r\n             * });\r\n             */\r\n            self.buffer = new ArrayBuffer(view.buffer.byteLength);\r\n\r\n            /**\r\n             * @property {DataView} view - The recorded data-view object.\r\n             * @memberof StereoAudioRecorder\r\n             * @example\r\n             * recorder.stop(function(){\r\n             *     var view = recorder.view;\r\n             * });\r\n             */\r\n            self.view = view;\r\n\r\n            self.sampleRate = desiredSampRate || sampleRate;\r\n            self.bufferSize = bufferSize;\r\n\r\n            // recorded audio length\r\n            self.length = recordingLength;\r\n\r\n            isAudioProcessStarted = false;\r\n\r\n            if (callback) {\r\n                callback(self.blob);\r\n            }\r\n        });\r\n    };\r\n\r\n    if (typeof RecordRTC.Storage === 'undefined') {\r\n        RecordRTC.Storage = {\r\n            AudioContextConstructor: null,\r\n            AudioContext: window.AudioContext || window.webkitAudioContext\r\n        };\r\n    }\r\n\r\n    if (!RecordRTC.Storage.AudioContextConstructor || RecordRTC.Storage.AudioContextConstructor.state === 'closed') {\r\n        RecordRTC.Storage.AudioContextConstructor = new RecordRTC.Storage.AudioContext();\r\n    }\r\n\r\n    var context = RecordRTC.Storage.AudioContextConstructor;\r\n\r\n    // creates an audio node from the microphone incoming stream\r\n    var audioInput = context.createMediaStreamSource(mediaStream);\r\n\r\n    var legalBufferValues = [0, 256, 512, 1024, 2048, 4096, 8192, 16384];\r\n\r\n    /**\r\n     * From the spec: This value controls how frequently the audioprocess event is\r\n     * dispatched and how many sample-frames need to be processed each call.\r\n     * Lower values for buffer size will result in a lower (better) latency.\r\n     * Higher values will be necessary to avoid audio breakup and glitches\r\n     * The size of the buffer (in sample-frames) which needs to\r\n     * be processed each time onprocessaudio is called.\r\n     * Legal values are (256, 512, 1024, 2048, 4096, 8192, 16384).\r\n     * @property {number} bufferSize - Buffer-size for how frequently the audioprocess event is dispatched.\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder = new StereoAudioRecorder(mediaStream, {\r\n     *     bufferSize: 4096\r\n     * });\r\n     */\r\n\r\n    // \"0\" means, let chrome decide the most accurate buffer-size for current platform.\r\n    var bufferSize = typeof config.bufferSize === 'undefined' ? 4096 : config.bufferSize;\r\n\r\n    if (legalBufferValues.indexOf(bufferSize) === -1) {\r\n        if (!config.disableLogs) {\r\n            console.log('Legal values for buffer-size are ' + JSON.stringify(legalBufferValues, null, '\\t'));\r\n        }\r\n    }\r\n\r\n    if (context.createJavaScriptNode) {\r\n        jsAudioNode = context.createJavaScriptNode(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\r\n    } else if (context.createScriptProcessor) {\r\n        jsAudioNode = context.createScriptProcessor(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\r\n    } else {\r\n        throw 'WebAudio API has no support on this browser.';\r\n    }\r\n\r\n    // connect the stream to the script processor\r\n    audioInput.connect(jsAudioNode);\r\n\r\n    if (!config.bufferSize) {\r\n        bufferSize = jsAudioNode.bufferSize; // device buffer-size\r\n    }\r\n\r\n    /**\r\n     * The sample rate (in sample-frames per second) at which the\r\n     * AudioContext handles audio. It is assumed that all AudioNodes\r\n     * in the context run at this rate. In making this assumption,\r\n     * sample-rate converters or \"varispeed\" processors are not supported\r\n     * in real-time processing.\r\n     * The sampleRate parameter describes the sample-rate of the\r\n     * linear PCM audio data in the buffer in sample-frames per second.\r\n     * An implementation must support sample-rates in at least\r\n     * the range 22050 to 96000.\r\n     * @property {number} sampleRate - Buffer-size for how frequently the audioprocess event is dispatched.\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder = new StereoAudioRecorder(mediaStream, {\r\n     *     sampleRate: 44100\r\n     * });\r\n     */\r\n    var sampleRate = typeof config.sampleRate !== 'undefined' ? config.sampleRate : context.sampleRate || 44100;\r\n\r\n    if (sampleRate < 22050 || sampleRate > 96000) {\r\n        // Ref: http://stackoverflow.com/a/26303918/552182\r\n        if (!config.disableLogs) {\r\n            console.log('sample-rate must be under range 22050 and 96000.');\r\n        }\r\n    }\r\n\r\n    if (!config.disableLogs) {\r\n        if (config.desiredSampRate) {\r\n            console.log('Desired sample-rate: ' + config.desiredSampRate);\r\n        }\r\n    }\r\n\r\n    var isPaused = false;\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPaused = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        if (isMediaStreamActive() === false) {\r\n            throw 'Please make sure MediaStream is active.';\r\n        }\r\n\r\n        if (!recording) {\r\n            if (!config.disableLogs) {\r\n                console.log('Seems recording has been restarted.');\r\n            }\r\n            this.record();\r\n            return;\r\n        }\r\n\r\n        isPaused = false;\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        config.checkForInactiveTracks = false;\r\n\r\n        if (recording) {\r\n            this.stop(clearRecordedDataCB);\r\n        }\r\n\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function resetVariables() {\r\n        leftchannel = [];\r\n        rightchannel = [];\r\n        recordingLength = 0;\r\n        isAudioProcessStarted = false;\r\n        recording = false;\r\n        isPaused = false;\r\n        context = null;\r\n\r\n        self.leftchannel = leftchannel;\r\n        self.rightchannel = rightchannel;\r\n        self.numberOfAudioChannels = numberOfAudioChannels;\r\n        self.desiredSampRate = desiredSampRate;\r\n        self.sampleRate = sampleRate;\r\n        self.recordingLength = recordingLength;\r\n\r\n        intervalsBasedBuffers = {\r\n            left: [],\r\n            right: [],\r\n            recordingLength: 0\r\n        };\r\n    }\r\n\r\n    function clearRecordedDataCB() {\r\n        if (jsAudioNode) {\r\n            jsAudioNode.onaudioprocess = null;\r\n            jsAudioNode.disconnect();\r\n            jsAudioNode = null;\r\n        }\r\n\r\n        if (audioInput) {\r\n            audioInput.disconnect();\r\n            audioInput = null;\r\n        }\r\n\r\n        resetVariables();\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'StereoAudioRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    var isAudioProcessStarted = false;\r\n\r\n    function onAudioProcessDataAvailable(e) {\r\n        if (isPaused) {\r\n            return;\r\n        }\r\n\r\n        if (isMediaStreamActive() === false) {\r\n            if (!config.disableLogs) {\r\n                console.log('MediaStream seems stopped.');\r\n            }\r\n            jsAudioNode.disconnect();\r\n            recording = false;\r\n        }\r\n\r\n        if (!recording) {\r\n            if (audioInput) {\r\n                audioInput.disconnect();\r\n                audioInput = null;\r\n            }\r\n            return;\r\n        }\r\n\r\n        /**\r\n         * This method is called on \"onaudioprocess\" event's first invocation.\r\n         * @method {function} onAudioProcessStarted\r\n         * @memberof StereoAudioRecorder\r\n         * @example\r\n         * recorder.onAudioProcessStarted: function() { };\r\n         */\r\n        if (!isAudioProcessStarted) {\r\n            isAudioProcessStarted = true;\r\n            if (config.onAudioProcessStarted) {\r\n                config.onAudioProcessStarted();\r\n            }\r\n\r\n            if (config.initCallback) {\r\n                config.initCallback();\r\n            }\r\n        }\r\n\r\n        var left = e.inputBuffer.getChannelData(0);\r\n\r\n        // we clone the samples\r\n        var chLeft = new Float32Array(left);\r\n        leftchannel.push(chLeft);\r\n\r\n        if (numberOfAudioChannels === 2) {\r\n            var right = e.inputBuffer.getChannelData(1);\r\n            var chRight = new Float32Array(right);\r\n            rightchannel.push(chRight);\r\n        }\r\n\r\n        recordingLength += bufferSize;\r\n\r\n        // export raw PCM\r\n        self.recordingLength = recordingLength;\r\n\r\n        if (typeof config.timeSlice !== 'undefined') {\r\n            intervalsBasedBuffers.recordingLength += bufferSize;\r\n            intervalsBasedBuffers.left.push(chLeft);\r\n\r\n            if (numberOfAudioChannels === 2) {\r\n                intervalsBasedBuffers.right.push(chRight);\r\n            }\r\n        }\r\n    }\r\n\r\n    jsAudioNode.onaudioprocess = onAudioProcessDataAvailable;\r\n\r\n    // to prevent self audio to be connected with speakers\r\n    if (context.createMediaStreamDestination) {\r\n        jsAudioNode.connect(context.createMediaStreamDestination());\r\n    } else {\r\n        jsAudioNode.connect(context.destination);\r\n    }\r\n\r\n    // export raw PCM\r\n    this.leftchannel = leftchannel;\r\n    this.rightchannel = rightchannel;\r\n    this.numberOfAudioChannels = numberOfAudioChannels;\r\n    this.desiredSampRate = desiredSampRate;\r\n    this.sampleRate = sampleRate;\r\n    self.recordingLength = recordingLength;\r\n\r\n    // helper for intervals based blobs\r\n    var intervalsBasedBuffers = {\r\n        left: [],\r\n        right: [],\r\n        recordingLength: 0\r\n    };\r\n\r\n    // this looper is used to support intervals based blobs (via timeSlice+ondataavailable)\r\n    function looper() {\r\n        if (!recording || typeof config.ondataavailable !== 'function' || typeof config.timeSlice === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (intervalsBasedBuffers.left.length) {\r\n            mergeLeftRightBuffers({\r\n                desiredSampRate: desiredSampRate,\r\n                sampleRate: sampleRate,\r\n                numberOfAudioChannels: numberOfAudioChannels,\r\n                internalInterleavedLength: intervalsBasedBuffers.recordingLength,\r\n                leftBuffers: intervalsBasedBuffers.left,\r\n                rightBuffers: numberOfAudioChannels === 1 ? [] : intervalsBasedBuffers.right\r\n            }, function(buffer, view) {\r\n                var blob = new Blob([view], {\r\n                    type: 'audio/wav'\r\n                });\r\n                config.ondataavailable(blob);\r\n\r\n                setTimeout(looper, config.timeSlice);\r\n            });\r\n\r\n            intervalsBasedBuffers = {\r\n                left: [],\r\n                right: [],\r\n                recordingLength: 0\r\n            };\r\n        } else {\r\n            setTimeout(looper, config.timeSlice);\r\n        }\r\n    }\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.StereoAudioRecorder = StereoAudioRecorder;\r\n}\n\r\n// _________________\r\n// CanvasRecorder.js\r\n\r\n/**\r\n * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.\r\n * @summary HTML2Canvas recording into video WebM.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef CanvasRecorder\r\n * @class\r\n * @example\r\n * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.\r\n * @param {object} config - {disableLogs:true, initCallback: function}\r\n */\r\n\r\nfunction CanvasRecorder(htmlElement, config) {\r\n    if (typeof html2canvas === 'undefined') {\r\n        throw 'Please link: https://www.webrtc-experiment.com/screenshot.js';\r\n    }\r\n\r\n    config = config || {};\r\n    if (!config.frameInterval) {\r\n        config.frameInterval = 10;\r\n    }\r\n\r\n    // via DetectRTC.js\r\n    var isCanvasSupportsStreamCapturing = false;\r\n    ['captureStream', 'mozCaptureStream', 'webkitCaptureStream'].forEach(function(item) {\r\n        if (item in document.createElement('canvas')) {\r\n            isCanvasSupportsStreamCapturing = true;\r\n        }\r\n    });\r\n\r\n    var _isChrome = (!!window.webkitRTCPeerConnection || !!window.webkitGetUserMedia) && !!window.chrome;\r\n\r\n    var chromeVersion = 50;\r\n    var matchArray = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\r\n    if (_isChrome && matchArray && matchArray[2]) {\r\n        chromeVersion = parseInt(matchArray[2], 10);\r\n    }\r\n\r\n    if (_isChrome && chromeVersion < 52) {\r\n        isCanvasSupportsStreamCapturing = false;\r\n    }\r\n\r\n    if (config.useWhammyRecorder) {\r\n        isCanvasSupportsStreamCapturing = false;\r\n    }\r\n\r\n    var globalCanvas, mediaStreamRecorder;\r\n\r\n    if (isCanvasSupportsStreamCapturing) {\r\n        if (!config.disableLogs) {\r\n            console.log('Your browser supports both MediRecorder API and canvas.captureStream!');\r\n        }\r\n\r\n        if (htmlElement instanceof HTMLCanvasElement) {\r\n            globalCanvas = htmlElement;\r\n        } else if (htmlElement instanceof CanvasRenderingContext2D) {\r\n            globalCanvas = htmlElement.canvas;\r\n        } else {\r\n            throw 'Please pass either HTMLCanvasElement or CanvasRenderingContext2D.';\r\n        }\r\n    } else if (!!navigator.mozGetUserMedia) {\r\n        if (!config.disableLogs) {\r\n            console.error('Canvas recording is NOT supported in Firefox.');\r\n        }\r\n    }\r\n\r\n    var isRecording;\r\n\r\n    /**\r\n     * This method records Canvas.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        isRecording = true;\r\n\r\n        if (isCanvasSupportsStreamCapturing && !config.useWhammyRecorder) {\r\n            // CanvasCaptureMediaStream\r\n            var canvasMediaStream;\r\n            if ('captureStream' in globalCanvas) {\r\n                canvasMediaStream = globalCanvas.captureStream(25); // 25 FPS\r\n            } else if ('mozCaptureStream' in globalCanvas) {\r\n                canvasMediaStream = globalCanvas.mozCaptureStream(25);\r\n            } else if ('webkitCaptureStream' in globalCanvas) {\r\n                canvasMediaStream = globalCanvas.webkitCaptureStream(25);\r\n            }\r\n\r\n            try {\r\n                var mdStream = new MediaStream();\r\n                mdStream.addTrack(getTracks(canvasMediaStream, 'video')[0]);\r\n                canvasMediaStream = mdStream;\r\n            } catch (e) {}\r\n\r\n            if (!canvasMediaStream) {\r\n                throw 'captureStream API are NOT available.';\r\n            }\r\n\r\n            // Note: Jan 18, 2016 status is that, \r\n            // Firefox MediaRecorder API can't record CanvasCaptureMediaStream object.\r\n            mediaStreamRecorder = new MediaStreamRecorder(canvasMediaStream, {\r\n                mimeType: config.mimeType || 'video/webm'\r\n            });\r\n            mediaStreamRecorder.record();\r\n        } else {\r\n            whammy.frames = [];\r\n            lastTime = new Date().getTime();\r\n            drawCanvasFrame();\r\n        }\r\n\r\n        if (config.initCallback) {\r\n            config.initCallback();\r\n        }\r\n    };\r\n\r\n    this.getWebPImages = function(callback) {\r\n        if (htmlElement.nodeName.toLowerCase() !== 'canvas') {\r\n            callback();\r\n            return;\r\n        }\r\n\r\n        var framesLength = whammy.frames.length;\r\n        whammy.frames.forEach(function(frame, idx) {\r\n            var framesRemaining = framesLength - idx;\r\n            if (!config.disableLogs) {\r\n                console.log(framesRemaining + '/' + framesLength + ' frames remaining');\r\n            }\r\n\r\n            if (config.onEncodingCallback) {\r\n                config.onEncodingCallback(framesRemaining, framesLength);\r\n            }\r\n\r\n            var webp = frame.image.toDataURL('image/webp', 1);\r\n            whammy.frames[idx].image = webp;\r\n        });\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Generating WebM');\r\n        }\r\n\r\n        callback();\r\n    };\r\n\r\n    /**\r\n     * This method stops recording Canvas.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        isRecording = false;\r\n\r\n        var that = this;\r\n\r\n        if (isCanvasSupportsStreamCapturing && mediaStreamRecorder) {\r\n            mediaStreamRecorder.stop(callback);\r\n            return;\r\n        }\r\n\r\n        this.getWebPImages(function() {\r\n            /**\r\n             * @property {Blob} blob - Recorded frames in video/webm blob.\r\n             * @memberof CanvasRecorder\r\n             * @example\r\n             * recorder.stop(function() {\r\n             *     var blob = recorder.blob;\r\n             * });\r\n             */\r\n            whammy.compile(function(blob) {\r\n                if (!config.disableLogs) {\r\n                    console.log('Recording finished!');\r\n                }\r\n\r\n                that.blob = blob;\r\n\r\n                if (that.blob.forEach) {\r\n                    that.blob = new Blob([], {\r\n                        type: 'video/webm'\r\n                    });\r\n                }\r\n\r\n                if (callback) {\r\n                    callback(that.blob);\r\n                }\r\n\r\n                whammy.frames = [];\r\n            });\r\n        });\r\n    };\r\n\r\n    var isPausedRecording = false;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPausedRecording = true;\r\n\r\n        if (mediaStreamRecorder instanceof MediaStreamRecorder) {\r\n            mediaStreamRecorder.pause();\r\n            return;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPausedRecording = false;\r\n\r\n        if (mediaStreamRecorder instanceof MediaStreamRecorder) {\r\n            mediaStreamRecorder.resume();\r\n            return;\r\n        }\r\n\r\n        if (!isRecording) {\r\n            this.record();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (isRecording) {\r\n            this.stop(clearRecordedDataCB);\r\n        }\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        whammy.frames = [];\r\n        isRecording = false;\r\n        isPausedRecording = false;\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'CanvasRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    function cloneCanvas() {\r\n        //create a new canvas\r\n        var newCanvas = document.createElement('canvas');\r\n        var context = newCanvas.getContext('2d');\r\n\r\n        //set dimensions\r\n        newCanvas.width = htmlElement.width;\r\n        newCanvas.height = htmlElement.height;\r\n\r\n        //apply the old canvas to the new one\r\n        context.drawImage(htmlElement, 0, 0);\r\n\r\n        //return the new canvas\r\n        return newCanvas;\r\n    }\r\n\r\n    function drawCanvasFrame() {\r\n        if (isPausedRecording) {\r\n            lastTime = new Date().getTime();\r\n            return setTimeout(drawCanvasFrame, 500);\r\n        }\r\n\r\n        if (htmlElement.nodeName.toLowerCase() === 'canvas') {\r\n            var duration = new Date().getTime() - lastTime;\r\n            // via #206, by Jack i.e. @Seymourr\r\n            lastTime = new Date().getTime();\r\n\r\n            whammy.frames.push({\r\n                image: cloneCanvas(),\r\n                duration: duration\r\n            });\r\n\r\n            if (isRecording) {\r\n                setTimeout(drawCanvasFrame, config.frameInterval);\r\n            }\r\n            return;\r\n        }\r\n\r\n        html2canvas(htmlElement, {\r\n            grabMouse: typeof config.showMousePointer === 'undefined' || config.showMousePointer,\r\n            onrendered: function(canvas) {\r\n                var duration = new Date().getTime() - lastTime;\r\n                if (!duration) {\r\n                    return setTimeout(drawCanvasFrame, config.frameInterval);\r\n                }\r\n\r\n                // via #206, by Jack i.e. @Seymourr\r\n                lastTime = new Date().getTime();\r\n\r\n                whammy.frames.push({\r\n                    image: canvas.toDataURL('image/webp', 1),\r\n                    duration: duration\r\n                });\r\n\r\n                if (isRecording) {\r\n                    setTimeout(drawCanvasFrame, config.frameInterval);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    var lastTime = new Date().getTime();\r\n\r\n    var whammy = new Whammy.Video(100);\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.CanvasRecorder = CanvasRecorder;\r\n}\n\r\n// _________________\r\n// WhammyRecorder.js\r\n\r\n/**\r\n * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.\r\n * @summary Video recording feature in Chrome.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef WhammyRecorder\r\n * @class\r\n * @example\r\n * var recorder = new WhammyRecorder(mediaStream);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}\r\n */\r\n\r\nfunction WhammyRecorder(mediaStream, config) {\r\n\r\n    config = config || {};\r\n\r\n    if (!config.frameInterval) {\r\n        config.frameInterval = 10;\r\n    }\r\n\r\n    if (!config.disableLogs) {\r\n        console.log('Using frames-interval:', config.frameInterval);\r\n    }\r\n\r\n    /**\r\n     * This method records video.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        if (!config.width) {\r\n            config.width = 320;\r\n        }\r\n\r\n        if (!config.height) {\r\n            config.height = 240;\r\n        }\r\n\r\n        if (!config.video) {\r\n            config.video = {\r\n                width: config.width,\r\n                height: config.height\r\n            };\r\n        }\r\n\r\n        if (!config.canvas) {\r\n            config.canvas = {\r\n                width: config.width,\r\n                height: config.height\r\n            };\r\n        }\r\n\r\n        canvas.width = config.canvas.width || 320;\r\n        canvas.height = config.canvas.height || 240;\r\n\r\n        context = canvas.getContext('2d');\r\n\r\n        // setting defaults\r\n        if (config.video && config.video instanceof HTMLVideoElement) {\r\n            video = config.video.cloneNode();\r\n\r\n            if (config.initCallback) {\r\n                config.initCallback();\r\n            }\r\n        } else {\r\n            video = document.createElement('video');\r\n\r\n            setSrcObject(mediaStream, video);\r\n\r\n            video.onloadedmetadata = function() { // \"onloadedmetadata\" may NOT work in FF?\r\n                if (config.initCallback) {\r\n                    config.initCallback();\r\n                }\r\n            };\r\n\r\n            video.width = config.video.width;\r\n            video.height = config.video.height;\r\n        }\r\n\r\n        video.muted = true;\r\n        video.play();\r\n\r\n        lastTime = new Date().getTime();\r\n        whammy = new Whammy.Video();\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('canvas resolutions', canvas.width, '*', canvas.height);\r\n            console.log('video width/height', video.width || canvas.width, '*', video.height || canvas.height);\r\n        }\r\n\r\n        drawFrames(config.frameInterval);\r\n    };\r\n\r\n    /**\r\n     * Draw and push frames to Whammy\r\n     * @param {integer} frameInterval - set minimum interval (in milliseconds) between each time we push a frame to Whammy\r\n     */\r\n    function drawFrames(frameInterval) {\r\n        frameInterval = typeof frameInterval !== 'undefined' ? frameInterval : 10;\r\n\r\n        var duration = new Date().getTime() - lastTime;\r\n        if (!duration) {\r\n            return setTimeout(drawFrames, frameInterval, frameInterval);\r\n        }\r\n\r\n        if (isPausedRecording) {\r\n            lastTime = new Date().getTime();\r\n            return setTimeout(drawFrames, 100);\r\n        }\r\n\r\n        // via #206, by Jack i.e. @Seymourr\r\n        lastTime = new Date().getTime();\r\n\r\n        if (video.paused) {\r\n            // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\r\n            // Tweak for Android Chrome\r\n            video.play();\r\n        }\r\n\r\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n        whammy.frames.push({\r\n            duration: duration,\r\n            image: canvas.toDataURL('image/webp')\r\n        });\r\n\r\n        if (!isStopDrawing) {\r\n            setTimeout(drawFrames, frameInterval, frameInterval);\r\n        }\r\n    }\r\n\r\n    function asyncLoop(o) {\r\n        var i = -1,\r\n            length = o.length;\r\n\r\n        (function loop() {\r\n            i++;\r\n            if (i === length) {\r\n                o.callback();\r\n                return;\r\n            }\r\n\r\n            // \"setTimeout\" added by Jim McLeod\r\n            setTimeout(function() {\r\n                o.functionToLoop(loop, i);\r\n            }, 1);\r\n        })();\r\n    }\r\n\r\n\r\n    /**\r\n     * remove black frames from the beginning to the specified frame\r\n     * @param {Array} _frames - array of frames to be checked\r\n     * @param {number} _framesToCheck - number of frame until check will be executed (-1 - will drop all frames until frame not matched will be found)\r\n     * @param {number} _pixTolerance - 0 - very strict (only black pixel color) ; 1 - all\r\n     * @param {number} _frameTolerance - 0 - very strict (only black frame color) ; 1 - all\r\n     * @returns {Array} - array of frames\r\n     */\r\n    // pull#293 by @volodalexey\r\n    function dropBlackFrames(_frames, _framesToCheck, _pixTolerance, _frameTolerance, callback) {\r\n        var localCanvas = document.createElement('canvas');\r\n        localCanvas.width = canvas.width;\r\n        localCanvas.height = canvas.height;\r\n        var context2d = localCanvas.getContext('2d');\r\n        var resultFrames = [];\r\n\r\n        var checkUntilNotBlack = _framesToCheck === -1;\r\n        var endCheckFrame = (_framesToCheck && _framesToCheck > 0 && _framesToCheck <= _frames.length) ?\r\n            _framesToCheck : _frames.length;\r\n        var sampleColor = {\r\n            r: 0,\r\n            g: 0,\r\n            b: 0\r\n        };\r\n        var maxColorDifference = Math.sqrt(\r\n            Math.pow(255, 2) +\r\n            Math.pow(255, 2) +\r\n            Math.pow(255, 2)\r\n        );\r\n        var pixTolerance = _pixTolerance && _pixTolerance >= 0 && _pixTolerance <= 1 ? _pixTolerance : 0;\r\n        var frameTolerance = _frameTolerance && _frameTolerance >= 0 && _frameTolerance <= 1 ? _frameTolerance : 0;\r\n        var doNotCheckNext = false;\r\n\r\n        asyncLoop({\r\n            length: endCheckFrame,\r\n            functionToLoop: function(loop, f) {\r\n                var matchPixCount, endPixCheck, maxPixCount;\r\n\r\n                var finishImage = function() {\r\n                    if (!doNotCheckNext && maxPixCount - matchPixCount <= maxPixCount * frameTolerance) {\r\n                        // console.log('removed black frame : ' + f + ' ; frame duration ' + _frames[f].duration);\r\n                    } else {\r\n                        // console.log('frame is passed : ' + f);\r\n                        if (checkUntilNotBlack) {\r\n                            doNotCheckNext = true;\r\n                        }\r\n                        resultFrames.push(_frames[f]);\r\n                    }\r\n                    loop();\r\n                };\r\n\r\n                if (!doNotCheckNext) {\r\n                    var image = new Image();\r\n                    image.onload = function() {\r\n                        context2d.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n                        var imageData = context2d.getImageData(0, 0, canvas.width, canvas.height);\r\n                        matchPixCount = 0;\r\n                        endPixCheck = imageData.data.length;\r\n                        maxPixCount = imageData.data.length / 4;\r\n\r\n                        for (var pix = 0; pix < endPixCheck; pix += 4) {\r\n                            var currentColor = {\r\n                                r: imageData.data[pix],\r\n                                g: imageData.data[pix + 1],\r\n                                b: imageData.data[pix + 2]\r\n                            };\r\n                            var colorDifference = Math.sqrt(\r\n                                Math.pow(currentColor.r - sampleColor.r, 2) +\r\n                                Math.pow(currentColor.g - sampleColor.g, 2) +\r\n                                Math.pow(currentColor.b - sampleColor.b, 2)\r\n                            );\r\n                            // difference in color it is difference in color vectors (r1,g1,b1) <=> (r2,g2,b2)\r\n                            if (colorDifference <= maxColorDifference * pixTolerance) {\r\n                                matchPixCount++;\r\n                            }\r\n                        }\r\n                        finishImage();\r\n                    };\r\n                    image.src = _frames[f].image;\r\n                } else {\r\n                    finishImage();\r\n                }\r\n            },\r\n            callback: function() {\r\n                resultFrames = resultFrames.concat(_frames.slice(endCheckFrame));\r\n\r\n                if (resultFrames.length <= 0) {\r\n                    // at least one last frame should be available for next manipulation\r\n                    // if total duration of all frames will be < 1000 than ffmpeg doesn't work well...\r\n                    resultFrames.push(_frames[_frames.length - 1]);\r\n                }\r\n                callback(resultFrames);\r\n            }\r\n        });\r\n    }\r\n\r\n    var isStopDrawing = false;\r\n\r\n    /**\r\n     * This method stops recording video.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        isStopDrawing = true;\r\n\r\n        var _this = this;\r\n        // analyse of all frames takes some time!\r\n        setTimeout(function() {\r\n            // e.g. dropBlackFrames(frames, 10, 1, 1) - will cut all 10 frames\r\n            // e.g. dropBlackFrames(frames, 10, 0.5, 0.5) - will analyse 10 frames\r\n            // e.g. dropBlackFrames(frames, 10) === dropBlackFrames(frames, 10, 0, 0) - will analyse 10 frames with strict black color\r\n            dropBlackFrames(whammy.frames, -1, null, null, function(frames) {\r\n                whammy.frames = frames;\r\n\r\n                // to display advertisement images!\r\n                if (config.advertisement && config.advertisement.length) {\r\n                    whammy.frames = config.advertisement.concat(whammy.frames);\r\n                }\r\n\r\n                /**\r\n                 * @property {Blob} blob - Recorded frames in video/webm blob.\r\n                 * @memberof WhammyRecorder\r\n                 * @example\r\n                 * recorder.stop(function() {\r\n                 *     var blob = recorder.blob;\r\n                 * });\r\n                 */\r\n                whammy.compile(function(blob) {\r\n                    _this.blob = blob;\r\n\r\n                    if (_this.blob.forEach) {\r\n                        _this.blob = new Blob([], {\r\n                            type: 'video/webm'\r\n                        });\r\n                    }\r\n\r\n                    if (callback) {\r\n                        callback(_this.blob);\r\n                    }\r\n                });\r\n            });\r\n        }, 10);\r\n    };\r\n\r\n    var isPausedRecording = false;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPausedRecording = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPausedRecording = false;\r\n\r\n        if (isStopDrawing) {\r\n            this.record();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (!isStopDrawing) {\r\n            this.stop(clearRecordedDataCB);\r\n        }\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        whammy.frames = [];\r\n        isStopDrawing = true;\r\n        isPausedRecording = false;\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'WhammyRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    var canvas = document.createElement('canvas');\r\n    var context = canvas.getContext('2d');\r\n\r\n    var video;\r\n    var lastTime;\r\n    var whammy;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.WhammyRecorder = WhammyRecorder;\r\n}\n\r\n// https://github.com/antimatter15/whammy/blob/master/LICENSE\r\n// _________\r\n// Whammy.js\r\n\r\n// todo: Firefox now supports webp for webm containers!\r\n// their MediaRecorder implementation works well!\r\n// should we provide an option to record via Whammy.js or MediaRecorder API is a better solution?\r\n\r\n/**\r\n * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}\r\n * @summary A real time javascript webm encoder based on a canvas hack.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef Whammy\r\n * @class\r\n * @example\r\n * var recorder = new Whammy().Video(15);\r\n * recorder.add(context || canvas || dataURL);\r\n * var output = recorder.compile();\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\n\r\nvar Whammy = (function() {\r\n    // a more abstract-ish API\r\n\r\n    function WhammyVideo(duration) {\r\n        this.frames = [];\r\n        this.duration = duration || 1;\r\n        this.quality = 0.8;\r\n    }\r\n\r\n    /**\r\n     * Pass Canvas or Context or image/webp(string) to {@link Whammy} encoder.\r\n     * @method\r\n     * @memberof Whammy\r\n     * @example\r\n     * recorder = new Whammy().Video(0.8, 100);\r\n     * recorder.add(canvas || context || 'image/webp');\r\n     * @param {string} frame - Canvas || Context || image/webp\r\n     * @param {number} duration - Stick a duration (in milliseconds)\r\n     */\r\n    WhammyVideo.prototype.add = function(frame, duration) {\r\n        if ('canvas' in frame) { //CanvasRenderingContext2D\r\n            frame = frame.canvas;\r\n        }\r\n\r\n        if ('toDataURL' in frame) {\r\n            frame = frame.toDataURL('image/webp', this.quality);\r\n        }\r\n\r\n        if (!(/^data:image\\/webp;base64,/ig).test(frame)) {\r\n            throw 'Input must be formatted properly as a base64 encoded DataURI of type image/webp';\r\n        }\r\n        this.frames.push({\r\n            image: frame,\r\n            duration: duration || this.duration\r\n        });\r\n    };\r\n\r\n    function processInWebWorker(_function) {\r\n        var blob = URL.createObjectURL(new Blob([_function.toString(),\r\n            'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n        ], {\r\n            type: 'application/javascript'\r\n        }));\r\n\r\n        var worker = new Worker(blob);\r\n        URL.revokeObjectURL(blob);\r\n        return worker;\r\n    }\r\n\r\n    function whammyInWebWorker(frames) {\r\n        function ArrayToWebM(frames) {\r\n            var info = checkFrames(frames);\r\n            if (!info) {\r\n                return [];\r\n            }\r\n\r\n            var clusterMaxDuration = 30000;\r\n\r\n            var EBML = [{\r\n                'id': 0x1a45dfa3, // EBML\r\n                'data': [{\r\n                    'data': 1,\r\n                    'id': 0x4286 // EBMLVersion\r\n                }, {\r\n                    'data': 1,\r\n                    'id': 0x42f7 // EBMLReadVersion\r\n                }, {\r\n                    'data': 4,\r\n                    'id': 0x42f2 // EBMLMaxIDLength\r\n                }, {\r\n                    'data': 8,\r\n                    'id': 0x42f3 // EBMLMaxSizeLength\r\n                }, {\r\n                    'data': 'webm',\r\n                    'id': 0x4282 // DocType\r\n                }, {\r\n                    'data': 2,\r\n                    'id': 0x4287 // DocTypeVersion\r\n                }, {\r\n                    'data': 2,\r\n                    'id': 0x4285 // DocTypeReadVersion\r\n                }]\r\n            }, {\r\n                'id': 0x18538067, // Segment\r\n                'data': [{\r\n                    'id': 0x1549a966, // Info\r\n                    'data': [{\r\n                        'data': 1e6, //do things in millisecs (num of nanosecs for duration scale)\r\n                        'id': 0x2ad7b1 // TimecodeScale\r\n                    }, {\r\n                        'data': 'whammy',\r\n                        'id': 0x4d80 // MuxingApp\r\n                    }, {\r\n                        'data': 'whammy',\r\n                        'id': 0x5741 // WritingApp\r\n                    }, {\r\n                        'data': doubleToString(info.duration),\r\n                        'id': 0x4489 // Duration\r\n                    }]\r\n                }, {\r\n                    'id': 0x1654ae6b, // Tracks\r\n                    'data': [{\r\n                        'id': 0xae, // TrackEntry\r\n                        'data': [{\r\n                            'data': 1,\r\n                            'id': 0xd7 // TrackNumber\r\n                        }, {\r\n                            'data': 1,\r\n                            'id': 0x73c5 // TrackUID\r\n                        }, {\r\n                            'data': 0,\r\n                            'id': 0x9c // FlagLacing\r\n                        }, {\r\n                            'data': 'und',\r\n                            'id': 0x22b59c // Language\r\n                        }, {\r\n                            'data': 'V_VP8',\r\n                            'id': 0x86 // CodecID\r\n                        }, {\r\n                            'data': 'VP8',\r\n                            'id': 0x258688 // CodecName\r\n                        }, {\r\n                            'data': 1,\r\n                            'id': 0x83 // TrackType\r\n                        }, {\r\n                            'id': 0xe0, // Video\r\n                            'data': [{\r\n                                'data': info.width,\r\n                                'id': 0xb0 // PixelWidth\r\n                            }, {\r\n                                'data': info.height,\r\n                                'id': 0xba // PixelHeight\r\n                            }]\r\n                        }]\r\n                    }]\r\n                }]\r\n            }];\r\n\r\n            //Generate clusters (max duration)\r\n            var frameNumber = 0;\r\n            var clusterTimecode = 0;\r\n            while (frameNumber < frames.length) {\r\n\r\n                var clusterFrames = [];\r\n                var clusterDuration = 0;\r\n                do {\r\n                    clusterFrames.push(frames[frameNumber]);\r\n                    clusterDuration += frames[frameNumber].duration;\r\n                    frameNumber++;\r\n                } while (frameNumber < frames.length && clusterDuration < clusterMaxDuration);\r\n\r\n                var clusterCounter = 0;\r\n                var cluster = {\r\n                    'id': 0x1f43b675, // Cluster\r\n                    'data': getClusterData(clusterTimecode, clusterCounter, clusterFrames)\r\n                }; //Add cluster to segment\r\n                EBML[1].data.push(cluster);\r\n                clusterTimecode += clusterDuration;\r\n            }\r\n\r\n            return generateEBML(EBML);\r\n        }\r\n\r\n        function getClusterData(clusterTimecode, clusterCounter, clusterFrames) {\r\n            return [{\r\n                'data': clusterTimecode,\r\n                'id': 0xe7 // Timecode\r\n            }].concat(clusterFrames.map(function(webp) {\r\n                var block = makeSimpleBlock({\r\n                    discardable: 0,\r\n                    frame: webp.data.slice(4),\r\n                    invisible: 0,\r\n                    keyframe: 1,\r\n                    lacing: 0,\r\n                    trackNum: 1,\r\n                    timecode: Math.round(clusterCounter)\r\n                });\r\n                clusterCounter += webp.duration;\r\n                return {\r\n                    data: block,\r\n                    id: 0xa3\r\n                };\r\n            }));\r\n        }\r\n\r\n        // sums the lengths of all the frames and gets the duration\r\n\r\n        function checkFrames(frames) {\r\n            if (!frames[0]) {\r\n                postMessage({\r\n                    error: 'Something went wrong. Maybe WebP format is not supported in the current browser.'\r\n                });\r\n                return;\r\n            }\r\n\r\n            var width = frames[0].width,\r\n                height = frames[0].height,\r\n                duration = frames[0].duration;\r\n\r\n            for (var i = 1; i < frames.length; i++) {\r\n                duration += frames[i].duration;\r\n            }\r\n            return {\r\n                duration: duration,\r\n                width: width,\r\n                height: height\r\n            };\r\n        }\r\n\r\n        function numToBuffer(num) {\r\n            var parts = [];\r\n            while (num > 0) {\r\n                parts.push(num & 0xff);\r\n                num = num >> 8;\r\n            }\r\n            return new Uint8Array(parts.reverse());\r\n        }\r\n\r\n        function strToBuffer(str) {\r\n            return new Uint8Array(str.split('').map(function(e) {\r\n                return e.charCodeAt(0);\r\n            }));\r\n        }\r\n\r\n        function bitsToBuffer(bits) {\r\n            var data = [];\r\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\r\n            bits = pad + bits;\r\n            for (var i = 0; i < bits.length; i += 8) {\r\n                data.push(parseInt(bits.substr(i, 8), 2));\r\n            }\r\n            return new Uint8Array(data);\r\n        }\r\n\r\n        function generateEBML(json) {\r\n            var ebml = [];\r\n            for (var i = 0; i < json.length; i++) {\r\n                var data = json[i].data;\r\n\r\n                if (typeof data === 'object') {\r\n                    data = generateEBML(data);\r\n                }\r\n\r\n                if (typeof data === 'number') {\r\n                    data = bitsToBuffer(data.toString(2));\r\n                }\r\n\r\n                if (typeof data === 'string') {\r\n                    data = strToBuffer(data);\r\n                }\r\n\r\n                var len = data.size || data.byteLength || data.length;\r\n                var zeroes = Math.ceil(Math.ceil(Math.log(len) / Math.log(2)) / 8);\r\n                var sizeToString = len.toString(2);\r\n                var padded = (new Array((zeroes * 7 + 7 + 1) - sizeToString.length)).join('0') + sizeToString;\r\n                var size = (new Array(zeroes)).join('0') + '1' + padded;\r\n\r\n                ebml.push(numToBuffer(json[i].id));\r\n                ebml.push(bitsToBuffer(size));\r\n                ebml.push(data);\r\n            }\r\n\r\n            return new Blob(ebml, {\r\n                type: 'video/webm'\r\n            });\r\n        }\r\n\r\n        function toBinStrOld(bits) {\r\n            var data = '';\r\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\r\n            bits = pad + bits;\r\n            for (var i = 0; i < bits.length; i += 8) {\r\n                data += String.fromCharCode(parseInt(bits.substr(i, 8), 2));\r\n            }\r\n            return data;\r\n        }\r\n\r\n        function makeSimpleBlock(data) {\r\n            var flags = 0;\r\n\r\n            if (data.keyframe) {\r\n                flags |= 128;\r\n            }\r\n\r\n            if (data.invisible) {\r\n                flags |= 8;\r\n            }\r\n\r\n            if (data.lacing) {\r\n                flags |= (data.lacing << 1);\r\n            }\r\n\r\n            if (data.discardable) {\r\n                flags |= 1;\r\n            }\r\n\r\n            if (data.trackNum > 127) {\r\n                throw 'TrackNumber > 127 not supported';\r\n            }\r\n\r\n            var out = [data.trackNum | 0x80, data.timecode >> 8, data.timecode & 0xff, flags].map(function(e) {\r\n                return String.fromCharCode(e);\r\n            }).join('') + data.frame;\r\n\r\n            return out;\r\n        }\r\n\r\n        function parseWebP(riff) {\r\n            var VP8 = riff.RIFF[0].WEBP[0];\r\n\r\n            var frameStart = VP8.indexOf('\\x9d\\x01\\x2a'); // A VP8 keyframe starts with the 0x9d012a header\r\n            for (var i = 0, c = []; i < 4; i++) {\r\n                c[i] = VP8.charCodeAt(frameStart + 3 + i);\r\n            }\r\n\r\n            var width, height, tmp;\r\n\r\n            //the code below is literally copied verbatim from the bitstream spec\r\n            tmp = (c[1] << 8) | c[0];\r\n            width = tmp & 0x3FFF;\r\n            tmp = (c[3] << 8) | c[2];\r\n            height = tmp & 0x3FFF;\r\n            return {\r\n                width: width,\r\n                height: height,\r\n                data: VP8,\r\n                riff: riff\r\n            };\r\n        }\r\n\r\n        function getStrLength(string, offset) {\r\n            return parseInt(string.substr(offset + 4, 4).split('').map(function(i) {\r\n                var unpadded = i.charCodeAt(0).toString(2);\r\n                return (new Array(8 - unpadded.length + 1)).join('0') + unpadded;\r\n            }).join(''), 2);\r\n        }\r\n\r\n        function parseRIFF(string) {\r\n            var offset = 0;\r\n            var chunks = {};\r\n\r\n            while (offset < string.length) {\r\n                var id = string.substr(offset, 4);\r\n                var len = getStrLength(string, offset);\r\n                var data = string.substr(offset + 4 + 4, len);\r\n                offset += 4 + 4 + len;\r\n                chunks[id] = chunks[id] || [];\r\n\r\n                if (id === 'RIFF' || id === 'LIST') {\r\n                    chunks[id].push(parseRIFF(data));\r\n                } else {\r\n                    chunks[id].push(data);\r\n                }\r\n            }\r\n            return chunks;\r\n        }\r\n\r\n        function doubleToString(num) {\r\n            return [].slice.call(\r\n                new Uint8Array((new Float64Array([num])).buffer), 0).map(function(e) {\r\n                return String.fromCharCode(e);\r\n            }).reverse().join('');\r\n        }\r\n\r\n        var webm = new ArrayToWebM(frames.map(function(frame) {\r\n            var webp = parseWebP(parseRIFF(atob(frame.image.slice(23))));\r\n            webp.duration = frame.duration;\r\n            return webp;\r\n        }));\r\n\r\n        postMessage(webm);\r\n    }\r\n\r\n    /**\r\n     * Encodes frames in WebM container. It uses WebWorkinvoke to invoke 'ArrayToWebM' method.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof Whammy\r\n     * @example\r\n     * recorder = new Whammy().Video(0.8, 100);\r\n     * recorder.compile(function(blob) {\r\n     *    // blob.size - blob.type\r\n     * });\r\n     */\r\n    WhammyVideo.prototype.compile = function(callback) {\r\n        var webWorker = processInWebWorker(whammyInWebWorker);\r\n\r\n        webWorker.onmessage = function(event) {\r\n            if (event.data.error) {\r\n                console.error(event.data.error);\r\n                return;\r\n            }\r\n            callback(event.data);\r\n        };\r\n\r\n        webWorker.postMessage(this.frames);\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * A more abstract-ish API.\r\n         * @method\r\n         * @memberof Whammy\r\n         * @example\r\n         * recorder = new Whammy().Video(0.8, 100);\r\n         * @param {?number} speed - 0.8\r\n         * @param {?number} quality - 100\r\n         */\r\n        Video: WhammyVideo\r\n    };\r\n})();\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.Whammy = Whammy;\r\n}\n\r\n// ______________ (indexed-db)\r\n// DiskStorage.js\r\n\r\n/**\r\n * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.\r\n * @summary Writing blobs into IndexedDB.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @example\r\n * DiskStorage.Store({\r\n *     audioBlob: yourAudioBlob,\r\n *     videoBlob: yourVideoBlob,\r\n *     gifBlob  : yourGifBlob\r\n * });\r\n * DiskStorage.Fetch(function(dataURL, type) {\r\n *     if(type === 'audioBlob') { }\r\n *     if(type === 'videoBlob') { }\r\n *     if(type === 'gifBlob')   { }\r\n * });\r\n * // DiskStorage.dataStoreName = 'recordRTC';\r\n * // DiskStorage.onError = function(error) { };\r\n * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\r\n * @property {function} Fetch - This method fetches stored blobs from IndexedDB.\r\n * @property {function} Store - This method stores blobs in IndexedDB.\r\n * @property {function} onError - This function is invoked for any known/unknown error.\r\n * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\n\r\n\r\nvar DiskStorage = {\r\n    /**\r\n     * This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.init();\r\n     */\r\n    init: function() {\r\n        var self = this;\r\n\r\n        if (typeof indexedDB === 'undefined' || typeof indexedDB.open === 'undefined') {\r\n            console.error('IndexedDB API are not available in this browser.');\r\n            return;\r\n        }\r\n\r\n        var dbVersion = 1;\r\n        var dbName = this.dbName || location.href.replace(/\\/|:|#|%|\\.|\\[|\\]/g, ''),\r\n            db;\r\n        var request = indexedDB.open(dbName, dbVersion);\r\n\r\n        function createObjectStore(dataBase) {\r\n            dataBase.createObjectStore(self.dataStoreName);\r\n        }\r\n\r\n        function putInDB() {\r\n            var transaction = db.transaction([self.dataStoreName], 'readwrite');\r\n\r\n            if (self.videoBlob) {\r\n                transaction.objectStore(self.dataStoreName).put(self.videoBlob, 'videoBlob');\r\n            }\r\n\r\n            if (self.gifBlob) {\r\n                transaction.objectStore(self.dataStoreName).put(self.gifBlob, 'gifBlob');\r\n            }\r\n\r\n            if (self.audioBlob) {\r\n                transaction.objectStore(self.dataStoreName).put(self.audioBlob, 'audioBlob');\r\n            }\r\n\r\n            function getFromStore(portionName) {\r\n                transaction.objectStore(self.dataStoreName).get(portionName).onsuccess = function(event) {\r\n                    if (self.callback) {\r\n                        self.callback(event.target.result, portionName);\r\n                    }\r\n                };\r\n            }\r\n\r\n            getFromStore('audioBlob');\r\n            getFromStore('videoBlob');\r\n            getFromStore('gifBlob');\r\n        }\r\n\r\n        request.onerror = self.onError;\r\n\r\n        request.onsuccess = function() {\r\n            db = request.result;\r\n            db.onerror = self.onError;\r\n\r\n            if (db.setVersion) {\r\n                if (db.version !== dbVersion) {\r\n                    var setVersion = db.setVersion(dbVersion);\r\n                    setVersion.onsuccess = function() {\r\n                        createObjectStore(db);\r\n                        putInDB();\r\n                    };\r\n                } else {\r\n                    putInDB();\r\n                }\r\n            } else {\r\n                putInDB();\r\n            }\r\n        };\r\n        request.onupgradeneeded = function(event) {\r\n            createObjectStore(event.target.result);\r\n        };\r\n    },\r\n    /**\r\n     * This method fetches stored blobs from IndexedDB.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.Fetch(function(dataURL, type) {\r\n     *     if(type === 'audioBlob') { }\r\n     *     if(type === 'videoBlob') { }\r\n     *     if(type === 'gifBlob')   { }\r\n     * });\r\n     */\r\n    Fetch: function(callback) {\r\n        this.callback = callback;\r\n        this.init();\r\n\r\n        return this;\r\n    },\r\n    /**\r\n     * This method stores blobs in IndexedDB.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.Store({\r\n     *     audioBlob: yourAudioBlob,\r\n     *     videoBlob: yourVideoBlob,\r\n     *     gifBlob  : yourGifBlob\r\n     * });\r\n     */\r\n    Store: function(config) {\r\n        this.audioBlob = config.audioBlob;\r\n        this.videoBlob = config.videoBlob;\r\n        this.gifBlob = config.gifBlob;\r\n\r\n        this.init();\r\n\r\n        return this;\r\n    },\r\n    /**\r\n     * This function is invoked for any known/unknown error.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.onError = function(error){\r\n     *     alerot( JSON.stringify(error) );\r\n     * };\r\n     */\r\n    onError: function(error) {\r\n        console.error(JSON.stringify(error, null, '\\t'));\r\n    },\r\n\r\n    /**\r\n     * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.dataStoreName = 'recordRTC';\r\n     */\r\n    dataStoreName: 'recordRTC',\r\n    dbName: null\r\n};\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.DiskStorage = DiskStorage;\r\n}\n\r\n// ______________\r\n// GifRecorder.js\r\n\r\n/**\r\n * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef GifRecorder\r\n * @class\r\n * @example\r\n * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     img.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.\r\n * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}\r\n */\r\n\r\nfunction GifRecorder(mediaStream, config) {\r\n    if (typeof GIFEncoder === 'undefined') {\r\n        var script = document.createElement('script');\r\n        script.src = 'https://www.webrtc-experiment.com/gif-recorder.js';\r\n        (document.body || document.documentElement).appendChild(script);\r\n    }\r\n\r\n    config = config || {};\r\n\r\n    var isHTMLObject = mediaStream instanceof CanvasRenderingContext2D || mediaStream instanceof HTMLCanvasElement;\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        if (typeof GIFEncoder === 'undefined') {\r\n            setTimeout(self.record, 1000);\r\n            return;\r\n        }\r\n\r\n        if (!isLoadedMetaData) {\r\n            setTimeout(self.record, 1000);\r\n            return;\r\n        }\r\n\r\n        if (!isHTMLObject) {\r\n            if (!config.width) {\r\n                config.width = video.offsetWidth || 320;\r\n            }\r\n\r\n            if (!config.height) {\r\n                config.height = video.offsetHeight || 240;\r\n            }\r\n\r\n            if (!config.video) {\r\n                config.video = {\r\n                    width: config.width,\r\n                    height: config.height\r\n                };\r\n            }\r\n\r\n            if (!config.canvas) {\r\n                config.canvas = {\r\n                    width: config.width,\r\n                    height: config.height\r\n                };\r\n            }\r\n\r\n            canvas.width = config.canvas.width || 320;\r\n            canvas.height = config.canvas.height || 240;\r\n\r\n            video.width = config.video.width || 320;\r\n            video.height = config.video.height || 240;\r\n        }\r\n\r\n        // external library to record as GIF images\r\n        gifEncoder = new GIFEncoder();\r\n\r\n        // void setRepeat(int iter) \r\n        // Sets the number of times the set of GIF frames should be played. \r\n        // Default is 1; 0 means play indefinitely.\r\n        gifEncoder.setRepeat(0);\r\n\r\n        // void setFrameRate(Number fps) \r\n        // Sets frame rate in frames per second. \r\n        // Equivalent to setDelay(1000/fps).\r\n        // Using \"setDelay\" instead of \"setFrameRate\"\r\n        gifEncoder.setDelay(config.frameRate || 200);\r\n\r\n        // void setQuality(int quality) \r\n        // Sets quality of color quantization (conversion of images to the \r\n        // maximum 256 colors allowed by the GIF specification). \r\n        // Lower values (minimum = 1) produce better colors, \r\n        // but slow processing significantly. 10 is the default, \r\n        // and produces good color mapping at reasonable speeds. \r\n        // Values greater than 20 do not yield significant improvements in speed.\r\n        gifEncoder.setQuality(config.quality || 10);\r\n\r\n        // Boolean start() \r\n        // This writes the GIF Header and returns false if it fails.\r\n        gifEncoder.start();\r\n\r\n        if (typeof config.onGifRecordingStarted === 'function') {\r\n            config.onGifRecordingStarted();\r\n        }\r\n\r\n        startTime = Date.now();\r\n\r\n        function drawVideoFrame(time) {\r\n            if (self.clearedRecordedData === true) {\r\n                return;\r\n            }\r\n\r\n            if (isPausedRecording) {\r\n                return setTimeout(function() {\r\n                    drawVideoFrame(time);\r\n                }, 100);\r\n            }\r\n\r\n            lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\r\n\r\n            if (typeof lastFrameTime === undefined) {\r\n                lastFrameTime = time;\r\n            }\r\n\r\n            // ~10 fps\r\n            if (time - lastFrameTime < 90) {\r\n                return;\r\n            }\r\n\r\n            if (!isHTMLObject && video.paused) {\r\n                // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\r\n                // Tweak for Android Chrome\r\n                video.play();\r\n            }\r\n\r\n            if (!isHTMLObject) {\r\n                context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n            }\r\n\r\n            if (config.onGifPreview) {\r\n                config.onGifPreview(canvas.toDataURL('image/png'));\r\n            }\r\n\r\n            gifEncoder.addFrame(context);\r\n            lastFrameTime = time;\r\n        }\r\n\r\n        lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\r\n\r\n        if (config.initCallback) {\r\n            config.initCallback();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     img.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        if (lastAnimationFrame) {\r\n            cancelAnimationFrame(lastAnimationFrame);\r\n        }\r\n\r\n        endTime = Date.now();\r\n\r\n        /**\r\n         * @property {Blob} blob - The recorded blob object.\r\n         * @memberof GifRecorder\r\n         * @example\r\n         * recorder.stop(function(){\r\n         *     var blob = recorder.blob;\r\n         * });\r\n         */\r\n        this.blob = new Blob([new Uint8Array(gifEncoder.stream().bin)], {\r\n            type: 'image/gif'\r\n        });\r\n\r\n        callback(this.blob);\r\n\r\n        // bug: find a way to clear old recorded blobs\r\n        gifEncoder.stream().bin = [];\r\n    };\r\n\r\n    var isPausedRecording = false;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPausedRecording = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPausedRecording = false;\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        self.clearedRecordedData = true;\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        if (gifEncoder) {\r\n            gifEncoder.stream().bin = [];\r\n        }\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'GifRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    var canvas = document.createElement('canvas');\r\n    var context = canvas.getContext('2d');\r\n\r\n    if (isHTMLObject) {\r\n        if (mediaStream instanceof CanvasRenderingContext2D) {\r\n            context = mediaStream;\r\n            canvas = context.canvas;\r\n        } else if (mediaStream instanceof HTMLCanvasElement) {\r\n            context = mediaStream.getContext('2d');\r\n            canvas = mediaStream;\r\n        }\r\n    }\r\n\r\n    var isLoadedMetaData = true;\r\n\r\n    if (!isHTMLObject) {\r\n        var video = document.createElement('video');\r\n        video.muted = true;\r\n        video.autoplay = true;\r\n        video.playsInline = true;\r\n\r\n        isLoadedMetaData = false;\r\n        video.onloadedmetadata = function() {\r\n            isLoadedMetaData = true;\r\n        };\r\n\r\n        setSrcObject(mediaStream, video);\r\n\r\n        video.play();\r\n    }\r\n\r\n    var lastAnimationFrame = null;\r\n    var startTime, endTime, lastFrameTime;\r\n\r\n    var gifEncoder;\r\n\r\n    var self = this;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.GifRecorder = GifRecorder;\r\n}\n\r\n// Last time updated: 2019-06-21 4:09:42 AM UTC\r\n\r\n// ________________________\r\n// MultiStreamsMixer v1.2.2\r\n\r\n// Open-Sourced: https://github.com/muaz-khan/MultiStreamsMixer\r\n\r\n// --------------------------------------------------\r\n// Muaz Khan     - www.MuazKhan.com\r\n// MIT License   - www.WebRTC-Experiment.com/licence\r\n// --------------------------------------------------\r\n\r\nfunction MultiStreamsMixer(arrayOfMediaStreams, elementClass) {\r\n\r\n    var browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\r\n\r\n    (function(that) {\r\n        if (typeof RecordRTC !== 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (!that) {\r\n            return;\r\n        }\r\n\r\n        if (typeof window !== 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (typeof global === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        global.navigator = {\r\n            userAgent: browserFakeUserAgent,\r\n            getUserMedia: function() {}\r\n        };\r\n\r\n        if (!global.console) {\r\n            global.console = {};\r\n        }\r\n\r\n        if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\r\n            global.console.error = global.console.log = global.console.log || function() {\r\n                console.log(arguments);\r\n            };\r\n        }\r\n\r\n        if (typeof document === 'undefined') {\r\n            /*global document:true */\r\n            that.document = {\r\n                documentElement: {\r\n                    appendChild: function() {\r\n                        return '';\r\n                    }\r\n                }\r\n            };\r\n\r\n            document.createElement = document.captureStream = document.mozCaptureStream = function() {\r\n                var obj = {\r\n                    getContext: function() {\r\n                        return obj;\r\n                    },\r\n                    play: function() {},\r\n                    pause: function() {},\r\n                    drawImage: function() {},\r\n                    toDataURL: function() {\r\n                        return '';\r\n                    },\r\n                    style: {}\r\n                };\r\n                return obj;\r\n            };\r\n\r\n            that.HTMLVideoElement = function() {};\r\n        }\r\n\r\n        if (typeof location === 'undefined') {\r\n            /*global location:true */\r\n            that.location = {\r\n                protocol: 'file:',\r\n                href: '',\r\n                hash: ''\r\n            };\r\n        }\r\n\r\n        if (typeof screen === 'undefined') {\r\n            /*global screen:true */\r\n            that.screen = {\r\n                width: 0,\r\n                height: 0\r\n            };\r\n        }\r\n\r\n        if (typeof URL === 'undefined') {\r\n            /*global screen:true */\r\n            that.URL = {\r\n                createObjectURL: function() {\r\n                    return '';\r\n                },\r\n                revokeObjectURL: function() {\r\n                    return '';\r\n                }\r\n            };\r\n        }\r\n\r\n        /*global window:true */\r\n        that.window = global;\r\n    })(typeof global !== 'undefined' ? global : null);\r\n\r\n    // requires: chrome://flags/#enable-experimental-web-platform-features\r\n\r\n    elementClass = elementClass || 'multi-streams-mixer';\r\n\r\n    var videos = [];\r\n    var isStopDrawingFrames = false;\r\n\r\n    var canvas = document.createElement('canvas');\r\n    var context = canvas.getContext('2d');\r\n    canvas.style.opacity = 0;\r\n    canvas.style.position = 'absolute';\r\n    canvas.style.zIndex = -1;\r\n    canvas.style.top = '-1000em';\r\n    canvas.style.left = '-1000em';\r\n    canvas.className = elementClass;\r\n    (document.body || document.documentElement).appendChild(canvas);\r\n\r\n    this.disableLogs = false;\r\n    this.frameInterval = 10;\r\n\r\n    this.width = 360;\r\n    this.height = 240;\r\n\r\n    // use gain node to prevent echo\r\n    this.useGainNode = true;\r\n\r\n    var self = this;\r\n\r\n    // _____________________________\r\n    // Cross-Browser-Declarations.js\r\n\r\n    // WebAudio API representer\r\n    var AudioContext = window.AudioContext;\r\n\r\n    if (typeof AudioContext === 'undefined') {\r\n        if (typeof webkitAudioContext !== 'undefined') {\r\n            /*global AudioContext:true */\r\n            AudioContext = webkitAudioContext;\r\n        }\r\n\r\n        if (typeof mozAudioContext !== 'undefined') {\r\n            /*global AudioContext:true */\r\n            AudioContext = mozAudioContext;\r\n        }\r\n    }\r\n\r\n    /*jshint -W079 */\r\n    var URL = window.URL;\r\n\r\n    if (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\r\n        /*global URL:true */\r\n        URL = webkitURL;\r\n    }\r\n\r\n    if (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') { // maybe window.navigator?\r\n        if (typeof navigator.webkitGetUserMedia !== 'undefined') {\r\n            navigator.getUserMedia = navigator.webkitGetUserMedia;\r\n        }\r\n\r\n        if (typeof navigator.mozGetUserMedia !== 'undefined') {\r\n            navigator.getUserMedia = navigator.mozGetUserMedia;\r\n        }\r\n    }\r\n\r\n    var MediaStream = window.MediaStream;\r\n\r\n    if (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\r\n        MediaStream = webkitMediaStream;\r\n    }\r\n\r\n    /*global MediaStream:true */\r\n    if (typeof MediaStream !== 'undefined') {\r\n        // override \"stop\" method for all browsers\r\n        if (typeof MediaStream.prototype.stop === 'undefined') {\r\n            MediaStream.prototype.stop = function() {\r\n                this.getTracks().forEach(function(track) {\r\n                    track.stop();\r\n                });\r\n            };\r\n        }\r\n    }\r\n\r\n    var Storage = {};\r\n\r\n    if (typeof AudioContext !== 'undefined') {\r\n        Storage.AudioContext = AudioContext;\r\n    } else if (typeof webkitAudioContext !== 'undefined') {\r\n        Storage.AudioContext = webkitAudioContext;\r\n    }\r\n\r\n    function setSrcObject(stream, element) {\r\n        if ('srcObject' in element) {\r\n            element.srcObject = stream;\r\n        } else if ('mozSrcObject' in element) {\r\n            element.mozSrcObject = stream;\r\n        } else {\r\n            element.srcObject = stream;\r\n        }\r\n    }\r\n\r\n    this.startDrawingFrames = function() {\r\n        drawVideosToCanvas();\r\n    };\r\n\r\n    function drawVideosToCanvas() {\r\n        if (isStopDrawingFrames) {\r\n            return;\r\n        }\r\n\r\n        var videosLength = videos.length;\r\n\r\n        var fullcanvas = false;\r\n        var remaining = [];\r\n        videos.forEach(function(video) {\r\n            if (!video.stream) {\r\n                video.stream = {};\r\n            }\r\n\r\n            if (video.stream.fullcanvas) {\r\n                fullcanvas = video;\r\n            } else {\r\n                // todo: video.stream.active or video.stream.live to fix blank frames issues?\r\n                remaining.push(video);\r\n            }\r\n        });\r\n\r\n        if (fullcanvas) {\r\n            canvas.width = fullcanvas.stream.width;\r\n            canvas.height = fullcanvas.stream.height;\r\n        } else if (remaining.length) {\r\n            canvas.width = videosLength > 1 ? remaining[0].width * 2 : remaining[0].width;\r\n\r\n            var height = 1;\r\n            if (videosLength === 3 || videosLength === 4) {\r\n                height = 2;\r\n            }\r\n            if (videosLength === 5 || videosLength === 6) {\r\n                height = 3;\r\n            }\r\n            if (videosLength === 7 || videosLength === 8) {\r\n                height = 4;\r\n            }\r\n            if (videosLength === 9 || videosLength === 10) {\r\n                height = 5;\r\n            }\r\n            canvas.height = remaining[0].height * height;\r\n        } else {\r\n            canvas.width = self.width || 360;\r\n            canvas.height = self.height || 240;\r\n        }\r\n\r\n        if (fullcanvas && fullcanvas instanceof HTMLVideoElement) {\r\n            drawImage(fullcanvas);\r\n        }\r\n\r\n        remaining.forEach(function(video, idx) {\r\n            drawImage(video, idx);\r\n        });\r\n\r\n        setTimeout(drawVideosToCanvas, self.frameInterval);\r\n    }\r\n\r\n    function drawImage(video, idx) {\r\n        if (isStopDrawingFrames) {\r\n            return;\r\n        }\r\n\r\n        var x = 0;\r\n        var y = 0;\r\n        var width = video.width;\r\n        var height = video.height;\r\n\r\n        if (idx === 1) {\r\n            x = video.width;\r\n        }\r\n\r\n        if (idx === 2) {\r\n            y = video.height;\r\n        }\r\n\r\n        if (idx === 3) {\r\n            x = video.width;\r\n            y = video.height;\r\n        }\r\n\r\n        if (idx === 4) {\r\n            y = video.height * 2;\r\n        }\r\n\r\n        if (idx === 5) {\r\n            x = video.width;\r\n            y = video.height * 2;\r\n        }\r\n\r\n        if (idx === 6) {\r\n            y = video.height * 3;\r\n        }\r\n\r\n        if (idx === 7) {\r\n            x = video.width;\r\n            y = video.height * 3;\r\n        }\r\n\r\n        if (typeof video.stream.left !== 'undefined') {\r\n            x = video.stream.left;\r\n        }\r\n\r\n        if (typeof video.stream.top !== 'undefined') {\r\n            y = video.stream.top;\r\n        }\r\n\r\n        if (typeof video.stream.width !== 'undefined') {\r\n            width = video.stream.width;\r\n        }\r\n\r\n        if (typeof video.stream.height !== 'undefined') {\r\n            height = video.stream.height;\r\n        }\r\n\r\n        context.drawImage(video, x, y, width, height);\r\n\r\n        if (typeof video.stream.onRender === 'function') {\r\n            video.stream.onRender(context, x, y, width, height, idx);\r\n        }\r\n    }\r\n\r\n    function getMixedStream() {\r\n        isStopDrawingFrames = false;\r\n        var mixedVideoStream = getMixedVideoStream();\r\n\r\n        var mixedAudioStream = getMixedAudioStream();\r\n        if (mixedAudioStream) {\r\n            mixedAudioStream.getTracks().filter(function(t) {\r\n                return t.kind === 'audio';\r\n            }).forEach(function(track) {\r\n                mixedVideoStream.addTrack(track);\r\n            });\r\n        }\r\n\r\n        var fullcanvas;\r\n        arrayOfMediaStreams.forEach(function(stream) {\r\n            if (stream.fullcanvas) {\r\n                fullcanvas = true;\r\n            }\r\n        });\r\n\r\n        // mixedVideoStream.prototype.appendStreams = appendStreams;\r\n        // mixedVideoStream.prototype.resetVideoStreams = resetVideoStreams;\r\n        // mixedVideoStream.prototype.clearRecordedData = clearRecordedData;\r\n\r\n        return mixedVideoStream;\r\n    }\r\n\r\n    function getMixedVideoStream() {\r\n        resetVideoStreams();\r\n\r\n        var capturedStream;\r\n\r\n        if ('captureStream' in canvas) {\r\n            capturedStream = canvas.captureStream();\r\n        } else if ('mozCaptureStream' in canvas) {\r\n            capturedStream = canvas.mozCaptureStream();\r\n        } else if (!self.disableLogs) {\r\n            console.error('Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features');\r\n        }\r\n\r\n        var videoStream = new MediaStream();\r\n\r\n        capturedStream.getTracks().filter(function(t) {\r\n            return t.kind === 'video';\r\n        }).forEach(function(track) {\r\n            videoStream.addTrack(track);\r\n        });\r\n\r\n        canvas.stream = videoStream;\r\n\r\n        return videoStream;\r\n    }\r\n\r\n    function getMixedAudioStream() {\r\n        // via: @pehrsons\r\n        if (!Storage.AudioContextConstructor) {\r\n            Storage.AudioContextConstructor = new Storage.AudioContext();\r\n        }\r\n\r\n        self.audioContext = Storage.AudioContextConstructor;\r\n\r\n        self.audioSources = [];\r\n\r\n        if (self.useGainNode === true) {\r\n            self.gainNode = self.audioContext.createGain();\r\n            self.gainNode.connect(self.audioContext.destination);\r\n            self.gainNode.gain.value = 0; // don't hear self\r\n        }\r\n\r\n        var audioTracksLength = 0;\r\n        arrayOfMediaStreams.forEach(function(stream) {\r\n            if (!stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'audio';\r\n                }).length) {\r\n                return;\r\n            }\r\n\r\n            audioTracksLength++;\r\n\r\n            var audioSource = self.audioContext.createMediaStreamSource(stream);\r\n\r\n            if (self.useGainNode === true) {\r\n                audioSource.connect(self.gainNode);\r\n            }\r\n\r\n            self.audioSources.push(audioSource);\r\n        });\r\n\r\n        if (!audioTracksLength) {\r\n            // because \"self.audioContext\" is not initialized\r\n            // that's why we've to ignore rest of the code\r\n            return;\r\n        }\r\n\r\n        self.audioDestination = self.audioContext.createMediaStreamDestination();\r\n        self.audioSources.forEach(function(audioSource) {\r\n            audioSource.connect(self.audioDestination);\r\n        });\r\n        return self.audioDestination.stream;\r\n    }\r\n\r\n    function getVideo(stream) {\r\n        var video = document.createElement('video');\r\n\r\n        setSrcObject(stream, video);\r\n\r\n        video.className = elementClass;\r\n\r\n        video.muted = true;\r\n        video.volume = 0;\r\n\r\n        video.width = stream.width || self.width || 360;\r\n        video.height = stream.height || self.height || 240;\r\n\r\n        video.play();\r\n\r\n        return video;\r\n    }\r\n\r\n    this.appendStreams = function(streams) {\r\n        if (!streams) {\r\n            throw 'First parameter is required.';\r\n        }\r\n\r\n        if (!(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        streams.forEach(function(stream) {\r\n            var newStream = new MediaStream();\r\n\r\n            if (stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'video';\r\n                }).length) {\r\n                var video = getVideo(stream);\r\n                video.stream = stream;\r\n                videos.push(video);\r\n\r\n                newStream.addTrack(stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'video';\r\n                })[0]);\r\n            }\r\n\r\n            if (stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'audio';\r\n                }).length) {\r\n                var audioSource = self.audioContext.createMediaStreamSource(stream);\r\n                self.audioDestination = self.audioContext.createMediaStreamDestination();\r\n                audioSource.connect(self.audioDestination);\r\n\r\n                newStream.addTrack(self.audioDestination.stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'audio';\r\n                })[0]);\r\n            }\r\n\r\n            arrayOfMediaStreams.push(newStream);\r\n        });\r\n    };\r\n\r\n    this.releaseStreams = function() {\r\n        videos = [];\r\n        isStopDrawingFrames = true;\r\n\r\n        if (self.gainNode) {\r\n            self.gainNode.disconnect();\r\n            self.gainNode = null;\r\n        }\r\n\r\n        if (self.audioSources.length) {\r\n            self.audioSources.forEach(function(source) {\r\n                source.disconnect();\r\n            });\r\n            self.audioSources = [];\r\n        }\r\n\r\n        if (self.audioDestination) {\r\n            self.audioDestination.disconnect();\r\n            self.audioDestination = null;\r\n        }\r\n\r\n        if (self.audioContext) {\r\n            self.audioContext.close();\r\n        }\r\n\r\n        self.audioContext = null;\r\n\r\n        context.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        if (canvas.stream) {\r\n            canvas.stream.stop();\r\n            canvas.stream = null;\r\n        }\r\n    };\r\n\r\n    this.resetVideoStreams = function(streams) {\r\n        if (streams && !(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        resetVideoStreams(streams);\r\n    };\r\n\r\n    function resetVideoStreams(streams) {\r\n        videos = [];\r\n        streams = streams || arrayOfMediaStreams;\r\n\r\n        // via: @adrian-ber\r\n        streams.forEach(function(stream) {\r\n            if (!stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'video';\r\n                }).length) {\r\n                return;\r\n            }\r\n\r\n            var video = getVideo(stream);\r\n            video.stream = stream;\r\n            videos.push(video);\r\n        });\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'MultiStreamsMixer';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    this.getMixedStream = getMixedStream;\r\n\r\n}\r\n\r\nif (typeof RecordRTC === 'undefined') {\r\n    if (typeof module !== 'undefined' /* && !!module.exports*/ ) {\r\n        module.exports = MultiStreamsMixer;\r\n    }\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('MultiStreamsMixer', [], function() {\r\n            return MultiStreamsMixer;\r\n        });\r\n    }\r\n}\n\r\n// ______________________\r\n// MultiStreamRecorder.js\r\n\r\n/*\r\n * Video conference recording, using captureStream API along with WebAudio and Canvas2D API.\r\n */\r\n\r\n/**\r\n * MultiStreamRecorder can record multiple videos in single container.\r\n * @summary Multi-videos recorder.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef MultiStreamRecorder\r\n * @class\r\n * @example\r\n * var options = {\r\n *     mimeType: 'video/webm'\r\n * }\r\n * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n *\r\n *     // or\r\n *     var blob = recorder.blob;\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStreams} mediaStreams - Array of MediaStreams.\r\n * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: \"video/webm\"}\r\n */\r\n\r\nfunction MultiStreamRecorder(arrayOfMediaStreams, options) {\r\n    arrayOfMediaStreams = arrayOfMediaStreams || [];\r\n    var self = this;\r\n\r\n    var mixer;\r\n    var mediaRecorder;\r\n\r\n    options = options || {\r\n        elementClass: 'multi-streams-mixer',\r\n        mimeType: 'video/webm',\r\n        video: {\r\n            width: 360,\r\n            height: 240\r\n        }\r\n    };\r\n\r\n    if (!options.frameInterval) {\r\n        options.frameInterval = 10;\r\n    }\r\n\r\n    if (!options.video) {\r\n        options.video = {};\r\n    }\r\n\r\n    if (!options.video.width) {\r\n        options.video.width = 360;\r\n    }\r\n\r\n    if (!options.video.height) {\r\n        options.video.height = 240;\r\n    }\r\n\r\n    /**\r\n     * This method records all MediaStreams.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        // github/muaz-khan/MultiStreamsMixer\r\n        mixer = new MultiStreamsMixer(arrayOfMediaStreams, options.elementClass || 'multi-streams-mixer');\r\n\r\n        if (getAllVideoTracks().length) {\r\n            mixer.frameInterval = options.frameInterval || 10;\r\n            mixer.width = options.video.width || 360;\r\n            mixer.height = options.video.height || 240;\r\n            mixer.startDrawingFrames();\r\n        }\r\n\r\n        if (options.previewStream && typeof options.previewStream === 'function') {\r\n            options.previewStream(mixer.getMixedStream());\r\n        }\r\n\r\n        // record using MediaRecorder API\r\n        mediaRecorder = new MediaStreamRecorder(mixer.getMixedStream(), options);\r\n        mediaRecorder.record();\r\n    };\r\n\r\n    function getAllVideoTracks() {\r\n        var tracks = [];\r\n        arrayOfMediaStreams.forEach(function(stream) {\r\n            getTracks(stream, 'video').forEach(function(track) {\r\n                tracks.push(track);\r\n            });\r\n        });\r\n        return tracks;\r\n    }\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        mediaRecorder.stop(function(blob) {\r\n            self.blob = blob;\r\n\r\n            callback(blob);\r\n\r\n            self.clearRecordedData();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        if (mediaRecorder) {\r\n            mediaRecorder.pause();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        if (mediaRecorder) {\r\n            mediaRecorder.resume();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (mediaRecorder) {\r\n            mediaRecorder.clearRecordedData();\r\n            mediaRecorder = null;\r\n        }\r\n\r\n        if (mixer) {\r\n            mixer.releaseStreams();\r\n            mixer = null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add extra media-streams to existing recordings.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @param {MediaStreams} mediaStreams - Array of MediaStreams\r\n     * @example\r\n     * recorder.addStreams([newAudioStream, newVideoStream]);\r\n     */\r\n    this.addStreams = function(streams) {\r\n        if (!streams) {\r\n            throw 'First parameter is required.';\r\n        }\r\n\r\n        if (!(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        arrayOfMediaStreams.concat(streams);\r\n\r\n        if (!mediaRecorder || !mixer) {\r\n            return;\r\n        }\r\n\r\n        mixer.appendStreams(streams);\r\n\r\n        if (options.previewStream && typeof options.previewStream === 'function') {\r\n            options.previewStream(mixer.getMixedStream());\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Reset videos during live recording. Replace old videos e.g. replace cameras with full-screen.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @param {MediaStreams} mediaStreams - Array of MediaStreams\r\n     * @example\r\n     * recorder.resetVideoStreams([newVideo1, newVideo2]);\r\n     */\r\n    this.resetVideoStreams = function(streams) {\r\n        if (!mixer) {\r\n            return;\r\n        }\r\n\r\n        if (streams && !(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        mixer.resetVideoStreams(streams);\r\n    };\r\n\r\n    /**\r\n     * Returns MultiStreamsMixer\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * let mixer = recorder.getMixer();\r\n     * mixer.appendStreams([newStream]);\r\n     */\r\n    this.getMixer = function() {\r\n        return mixer;\r\n    };\r\n\r\n    // for debugging\r\n    this.name = 'MultiStreamRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.MultiStreamRecorder = MultiStreamRecorder;\r\n}\n\r\n// _____________________\r\n// RecordRTC.promises.js\r\n\r\n/**\r\n * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}\r\n * @summary Promises for {@link RecordRTC}\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTCPromisesHandler\r\n * @class\r\n * @example\r\n * var recorder = new RecordRTCPromisesHandler(mediaStream, options);\r\n * recorder.startRecording()\r\n *         .then(successCB)\r\n *         .catch(errorCB);\r\n * // Note: You can access all RecordRTC API using \"recorder.recordRTC\" e.g. \r\n * recorder.recordRTC.onStateChanged = function(state) {};\r\n * recorder.recordRTC.setRecordingDuration(5000);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\r\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\r\n * @throws Will throw an error if \"new\" keyword is not used to initiate \"RecordRTCPromisesHandler\". Also throws error if first argument \"MediaStream\" is missing.\r\n * @requires {@link RecordRTC}\r\n */\r\n\r\nfunction RecordRTCPromisesHandler(mediaStream, options) {\r\n    if (!this) {\r\n        throw 'Use \"new RecordRTCPromisesHandler()\"';\r\n    }\r\n\r\n    if (typeof mediaStream === 'undefined') {\r\n        throw 'First argument \"MediaStream\" is required.';\r\n    }\r\n\r\n    var self = this;\r\n\r\n    /**\r\n     * @property {Blob} blob - Access/reach the native {@link RecordRTC} object.\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * let internal = recorder.recordRTC.getInternalRecorder();\r\n     * alert(internal instanceof MediaStreamRecorder);\r\n     * recorder.recordRTC.onStateChanged = function(state) {};\r\n     */\r\n    self.recordRTC = new RecordRTC(mediaStream, options);\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.startRecording()\r\n     *         .then(successCB)\r\n     *         .catch(errorCB);\r\n     */\r\n    this.startRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.startRecording();\r\n                resolve();\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method stops the recording.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.stopRecording().then(function() {\r\n     *     var blob = recorder.getBlob();\r\n     * }).catch(errorCB);\r\n     */\r\n    this.stopRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.stopRecording(function(url) {\r\n                    self.blob = self.recordRTC.getBlob();\r\n\r\n                    if (!self.blob || !self.blob.size) {\r\n                        reject('Empty blob.', self.blob);\r\n                        return;\r\n                    }\r\n\r\n                    resolve(url);\r\n                });\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method pauses the recording. You can resume recording using \"resumeRecording\" method.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.pauseRecording()\r\n     *         .then(successCB)\r\n     *         .catch(errorCB);\r\n     */\r\n    this.pauseRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.pauseRecording();\r\n                resolve();\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.resumeRecording()\r\n     *         .then(successCB)\r\n     *         .catch(errorCB);\r\n     */\r\n    this.resumeRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.resumeRecording();\r\n                resolve();\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method returns data-url for the recorded blob.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.stopRecording().then(function() {\r\n     *     recorder.getDataURL().then(function(dataURL) {\r\n     *         window.open(dataURL);\r\n     *     }).catch(errorCB);;\r\n     * }).catch(errorCB);\r\n     */\r\n    this.getDataURL = function(callback) {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.getDataURL(function(dataURL) {\r\n                    resolve(dataURL);\r\n                });\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method returns the recorded blob.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.stopRecording().then(function() {\r\n     *     recorder.getBlob().then(function(blob) {})\r\n     * }).catch(errorCB);\r\n     */\r\n    this.getBlob = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.getBlob());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method returns the internal recording object.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * let internalRecorder = await recorder.getInternalRecorder();\r\n     * if(internalRecorder instanceof MultiStreamRecorder) {\r\n     *     internalRecorder.addStreams([newAudioStream]);\r\n     *     internalRecorder.resetVideoStreams([screenStream]);\r\n     * }\r\n     * @returns {Object} \r\n     */\r\n    this.getInternalRecorder = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.getInternalRecorder());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method resets the recorder. So that you can reuse single recorder instance many times.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * await recorder.reset();\r\n     * recorder.startRecording(); // record again\r\n     */\r\n    this.reset = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.reset());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Destroy RecordRTC instance. Clear all recorders and objects.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.destroy().then(successCB).catch(errorCB);\r\n     */\r\n    this.destroy = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.destroy());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Get recorder's readonly state.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * let state = await recorder.getState();\r\n     * // or\r\n     * recorder.getState().then(state => { console.log(state); })\r\n     * @returns {String} Returns recording state.\r\n     */\r\n    this.getState = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.getState());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * @property {Blob} blob - Recorded data as \"Blob\" object.\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * await recorder.stopRecording();\r\n     * let blob = recorder.getBlob(); // or \"recorder.recordRTC.blob\"\r\n     * invokeSaveAsDialog(blob);\r\n     */\r\n    this.blob = null;\r\n\r\n    /**\r\n     * RecordRTC version number\r\n     * @property {String} version - Release version number.\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @static\r\n     * @readonly\r\n     * @example\r\n     * alert(recorder.version);\r\n     */\r\n    this.version = '5.6.1';\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.RecordRTCPromisesHandler = RecordRTCPromisesHandler;\r\n}\n\r\n// ______________________\r\n// WebAssemblyRecorder.js\r\n\r\n/**\r\n * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.\r\n * @summary Video recording feature in Chrome, Firefox and maybe Edge.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef WebAssemblyRecorder\r\n * @class\r\n * @example\r\n * var recorder = new WebAssemblyRecorder(mediaStream);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}\r\n */\r\nfunction WebAssemblyRecorder(stream, config) {\r\n    // based on: github.com/GoogleChromeLabs/webm-wasm\r\n\r\n    if (typeof ReadableStream === 'undefined' || typeof WritableStream === 'undefined') {\r\n        // because it fixes readable/writable streams issues\r\n        console.error('Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js');\r\n    }\r\n\r\n    config = config || {};\r\n\r\n    config.width = config.width || 640;\r\n    config.height = config.height || 480;\r\n    config.frameRate = config.frameRate || 30;\r\n    config.bitrate = config.bitrate || 1200;\r\n    config.realtime = config.realtime || true;\r\n\r\n    function createBufferURL(buffer, type) {\r\n        return URL.createObjectURL(new Blob([buffer], {\r\n            type: type || ''\r\n        }));\r\n    }\r\n\r\n    var finished;\r\n\r\n    function cameraStream() {\r\n        return new ReadableStream({\r\n            start: function(controller) {\r\n                var cvs = document.createElement('canvas');\r\n                var video = document.createElement('video');\r\n                var first = true;\r\n                video.srcObject = stream;\r\n                video.muted = true;\r\n                video.height = config.height;\r\n                video.width = config.width;\r\n                video.volume = 0;\r\n                video.onplaying = function() {\r\n                    cvs.width = config.width;\r\n                    cvs.height = config.height;\r\n                    var ctx = cvs.getContext('2d');\r\n                    var frameTimeout = 1000 / config.frameRate;\r\n                    var cameraTimer = setInterval(function f() {\r\n                        if (finished) {\r\n                            clearInterval(cameraTimer);\r\n                            controller.close();\r\n                        }\r\n\r\n                        if (first) {\r\n                            first = false;\r\n                            if (config.onVideoProcessStarted) {\r\n                                config.onVideoProcessStarted();\r\n                            }\r\n                        }\r\n\r\n                        ctx.drawImage(video, 0, 0);\r\n                        if (controller._controlledReadableStream.state !== 'closed') {\r\n                            try {\r\n                                controller.enqueue(\r\n                                    ctx.getImageData(0, 0, config.width, config.height)\r\n                                );\r\n                            } catch (e) {}\r\n                        }\r\n                    }, frameTimeout);\r\n                };\r\n                video.play();\r\n            }\r\n        });\r\n    }\r\n\r\n    var worker;\r\n\r\n    function startRecording(stream, buffer) {\r\n        if (!config.workerPath && !buffer) {\r\n            finished = false;\r\n\r\n            // is it safe to use @latest ?\r\n\r\n            fetch(\r\n                'https://unpkg.com/webm-wasm@latest/dist/webm-worker.js'\r\n            ).then(function(r) {\r\n                r.arrayBuffer().then(function(buffer) {\r\n                    startRecording(stream, buffer);\r\n                });\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (!config.workerPath && buffer instanceof ArrayBuffer) {\r\n            var blob = new Blob([buffer], {\r\n                type: 'text/javascript'\r\n            });\r\n            config.workerPath = URL.createObjectURL(blob);\r\n        }\r\n\r\n        if (!config.workerPath) {\r\n            console.error('workerPath parameter is missing.');\r\n        }\r\n\r\n        worker = new Worker(config.workerPath);\r\n\r\n        worker.postMessage(config.webAssemblyPath || 'https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm');\r\n        worker.addEventListener('message', function(event) {\r\n            if (event.data === 'READY') {\r\n                worker.postMessage({\r\n                    width: config.width,\r\n                    height: config.height,\r\n                    bitrate: config.bitrate || 1200,\r\n                    timebaseDen: config.frameRate || 30,\r\n                    realtime: config.realtime\r\n                });\r\n\r\n                cameraStream().pipeTo(new WritableStream({\r\n                    write: function(image) {\r\n                        if (finished) {\r\n                            console.error('Got image, but recorder is finished!');\r\n                            return;\r\n                        }\r\n\r\n                        worker.postMessage(image.data.buffer, [image.data.buffer]);\r\n                    }\r\n                }));\r\n            } else if (!!event.data) {\r\n                if (!isPaused) {\r\n                    arrayOfBuffers.push(event.data);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * This method records video.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        arrayOfBuffers = [];\r\n        isPaused = false;\r\n        this.blob = null;\r\n        startRecording(stream);\r\n\r\n        if (typeof config.initCallback === 'function') {\r\n            config.initCallback();\r\n        }\r\n    };\r\n\r\n    var isPaused;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPaused = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPaused = false;\r\n    };\r\n\r\n    function terminate(callback) {\r\n        if (!worker) {\r\n            if (callback) {\r\n                callback();\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        // Wait for null event data to indicate that the encoding is complete\r\n        worker.addEventListener('message', function(event) {\r\n            if (event.data === null) {\r\n                worker.terminate();\r\n                worker = null;\r\n\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            }\r\n        });\r\n\r\n        worker.postMessage(null);\r\n    }\r\n\r\n    var arrayOfBuffers = [];\r\n\r\n    /**\r\n     * This method stops recording video.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        finished = true;\r\n\r\n        var recorder = this;\r\n\r\n        terminate(function() {\r\n            recorder.blob = new Blob(arrayOfBuffers, {\r\n                type: 'video/webm'\r\n            });\r\n\r\n            callback(recorder.blob);\r\n        });\r\n    };\r\n\r\n    // for debugging\r\n    this.name = 'WebAssemblyRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        arrayOfBuffers = [];\r\n        isPaused = false;\r\n        this.blob = null;\r\n\r\n        // todo: if recording-ON then STOP it first\r\n    };\r\n\r\n    /**\r\n     * @property {Blob} blob - The recorded blob object.\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.stop(function(){\r\n     *     var blob = recorder.blob;\r\n     * });\r\n     */\r\n    this.blob = null;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.WebAssemblyRecorder = WebAssemblyRecorder;\r\n}\r\n","import { AfterViewInit, Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { SearchServiceService } from 'src/app/services/search-service.service';\r\nimport { UserInfoService } from 'src/app/services/user-info.service';\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss']\r\n})\r\nexport class HeaderComponent implements OnInit {\r\n\r\n  usr = JSON.parse(localStorage.getItem('userdata')!)\r\n\r\n\r\n  constructor(private usrInfo: UserInfoService, private route: Router, private searchServ: SearchServiceService) {\r\n\r\n  }\r\n\r\n\r\n\r\n  // ngAfterViewInit(): void {\r\n  //   this.searchValue.nativeElement.value = this.searchServ.InputVal,\r\n  //     console.log(this.searchValue?.nativeElement.value);\r\n\r\n\r\n\r\n  // }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if (this.usr.id === \"\") {\r\n      this.route.navigate(['/landing'])\r\n    }\r\n  }\r\n  logout() {\r\n    console.log(`works`)\r\n    localStorage.removeItem(\"**\");\r\n    localStorage.removeItem('userdata');\r\n    this.usrInfo.signOut();\r\n    this.route.navigate(['/landing'])\r\n  }\r\n  search(str: string) {\r\n    console.log(str)\r\n\r\n    this.route.navigate(['/users/search/', (str)])\r\n  }\r\n\r\n}\r\n","\n    <span class=\"switch\"\n    [class.checked]=\"checked\"\n    [class.disabled]=\"disabled\"\n    [class.switch-large]=\"size === 'large'\"\n    [class.switch-medium]=\"size === 'medium'\"\n    [class.switch-small]=\"size === 'small'\"\n    [class.switch-labeled]=\"!!labelOn || !!labelOff\"\n    [style.background-color]=\"getColor()\"\n    [style.border-color]=\"getColor('borderColor')\"\n    >\n    <input type=\"checkbox\" id=\"enabled\" name=\"enabled\" [checked]=\"checked\" style=\"display: none;\" aria-invalid=\"false\">\n    <small [style.background]=\"getColor('switchColor')\">\n    </small>\n    <span class=\"switch-text\" *ngIf=\"!!labelOn || !!labelOff\">\n      <span class=\"on\" [innerHtml]=\"labelOn\"></span>\n      <span class=\"off\" [innerHtml]=\"labelOff\"></span>\n    </span>\n    </span>\n  ","import { Injectable } from '@angular/core';\r\nimport { UsersModule } from '../users/users.module'\r\nimport { AngularFirestore, AngularFirestoreCollection, AngularFirestoreDocument } from '@angular/fire/firestore';\r\n\r\n\r\n@Injectable({\r\n  providedIn: UsersModule\r\n})\r\nexport class FireService {\r\n\r\n  private collection: AngularFirestoreCollection<any> | undefined;\r\n  private document: AngularFirestoreDocument<any> | undefined;\r\n\r\n  constructor(private afs: AngularFirestore) { }\r\n\r\n  getCollection(collectionName: string) {\r\n    this.collection = this.afs.collection<any>(collectionName);\r\n    return this.collection.valueChanges({ idField: 'ID' });\r\n  }\r\n\r\n  getDocument(documentPath: string) { //collection/id\r\n    this.document = this.afs.doc<any>(documentPath);\r\n    return this.document.valueChanges();\r\n  }\r\n\r\n  addDocument(collectionName: string, newDoc: any) {\r\n    this.collection = this.afs.collection<any>(collectionName);\r\n    this.collection?.add(newDoc);\r\n  };\r\n\r\n  updateDocument(documentPath: string, updateObject: any) {\r\n    this.document = this.afs.doc<any>(documentPath);\r\n    this.document.update(updateObject);\r\n  };\r\n\r\n  setDocument(documentPath: string, newObject: any) {\r\n    this.document = this.afs.doc<any>(documentPath);\r\n    this.document.set(newObject);\r\n  };\r\n\r\n  deleteDocument(documentPath: string) {\r\n    this.document = this.afs.doc<any>(documentPath);\r\n    this.document.delete();\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { UsersRoutingModule } from './users-routing.module';\r\nimport { UsersComponent } from './users.component';\r\nimport { SidebarComponent } from './components/sidebar/sidebar.component';\r\nimport { HeaderComponent } from './components/header/header.component';\r\nimport { DiscoverComponent } from './components/discover/discover.component';\r\nimport { ProfileComponent } from './components/profile/profile.component';\r\nimport { OtherProfileComponent } from './components/other-profile/other-profile.component';\r\nimport { HomeComponent } from './components/home/home.component';\r\nimport { TalentsComponent } from './components/talents/talents.component';\r\nimport { SearchComponent } from './components/search/search.component';\r\nimport { NotoficationComponent } from './components/notofication/notofication.component';\r\nimport { ReportsComponent } from './components/reports/reports.component';\r\nimport { AngularFireModule } from '@angular/fire';\r\nimport { AngularFirestoreModule } from '@angular/fire/firestore';\r\nimport { environment } from '../../environments/environment';\r\nimport { AngularFireStorageModule } from '@angular/fire/storage';\r\nimport { BookmarkComponent } from './components/bookmark/bookmark.component';\r\nimport { ChatComponent } from './components/chat/chat.component';\r\nimport { SettingComponent } from './components/setting/setting.component';\r\nimport { UiSwitchModule } from 'ngx-toggle-switch';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UsersComponent,\r\n    SidebarComponent,\r\n    HeaderComponent,\r\n    HomeComponent,\r\n    TalentsComponent,\r\n    DiscoverComponent,\r\n    ProfileComponent,\r\n    OtherProfileComponent,\r\n    BookmarkComponent,\r\n    ChatComponent,\r\n    SettingComponent,\r\n    SearchComponent,\r\n    NotoficationComponent,\r\n    ReportsComponent\r\n  ],\r\n  imports: [\r\n    UiSwitchModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    UsersRoutingModule,\r\n    AngularFireModule.initializeApp({\r\n      apiKey: \"AIzaSyB34ZDbD7bLBLklSgRbyaEqdOo-ZB1V8dw\",\r\n      authDomain: \"sout-2d0f6.firebaseapp.com\",\r\n      projectId: \"sout-2d0f6\",\r\n      storageBucket: \"sout-2d0f6.appspot.com\",\r\n      messagingSenderId: \"706376997886\",\r\n      appId: \"1:706376997886:web:36a3101d876f715a217eaf\",\r\n      measurementId: \"G-5R8JHQGN68\"\r\n    }),\r\n    AngularFirestoreModule,\r\n    FormsModule,\r\n    AngularFireStorageModule,\r\n\r\n  ]\r\n})\r\nexport class UsersModule { }\r\n"],"sourceRoot":"webpack:///"}